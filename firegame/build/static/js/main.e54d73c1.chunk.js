(this.webpackJsonpfiregame=this.webpackJsonpfiregame||[]).push([[0],{16:function(e,t,a){e.exports={structure_first_row:"app_structure_first_row__1SfcR",structure_row:"app_structure_row__1ZtZT",structure_card:"app_structure_card__1lUW2",built_wonder:"app_built_wonder__3QPgH",nowrap:"app_nowrap__3S69u"}},2:function(e,t,a){e.exports={bubble:"styles_bubble__1BYLx",flex:"styles_flex__2Uon1",dont_grow:"styles_dont_grow__3fglV",log_entry_parent:"styles_log_entry_parent__Spbio",inline:"styles_inline__16emi",my_turn:"styles_my_turn__1uYPS",grey:"styles_grey__3crEA",sidebar:"styles_sidebar__31Rw6",main:"styles_main__2EatF",content:"styles_content__8FZAu",right:"styles_right__2QLMB",blue:"styles_blue__1cyu7"}},38:function(e,t,a){e.exports={rules:"app_rules__AeG2l"}},40:function(e,t,a){e.exports={login:"components_login__1by_G"}},42:function(e,t,a){e.exports=a(55)},55:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),c=a.n(o),i=a(37),s=a.n(i),l=a(7),u=a(24),d=a(8),m=a(3),h=a(4),p=a(5),g=a(6),f=a(28),b=a.n(f),y=(a(47),{databaseURL:"https://firegame-7eb05.firebaseio.com/"}),v=0;var k={init:function(){b.a.initializeApp(y),n=b.a.database(),window.clear=function(){return n.ref("/").set({})},window.undo=function(){return n.ref("".concat(S(),"/").concat(r)).set({})},n.ref(".info/serverTimeOffset").once("value").then((function(e){return v=e.val()}))},now:function(){return v+Date.now()},latestChild:function(e,t){n.ref(e).limitToLast(1).on("value",(function(e){var a=e.val();a&&(r=Object.keys(a)[0]),t(a)}))},push:function(e,t){n.ref(e).push(t)},connect:function(e,t){n.ref(e).on("value",(function(e){var a=e.val();t(a)}))},set:function(e,t){n.ref(e).set(t)}};function w(e){k.push(S(),e)}function O(e){if(e){var t=e[Object.keys(e)[0]];if(k.now()-t.info.timestamp<72e5)return R.gameW=t,void N()}R.gameW||w({info:{playerId:R.me.userId,playerName:R.lobby[R.me.userId]||R.me.userId,message:"opened a room",host:R.me.userId,timestamp:k.now(),id:0},game:null})}function j(){k.set("".concat(T(),"/timestamp"),k.now())}function E(e){var t={};if(e)for(var a=0,n=Object.entries(e);a<n.length;a++){var r=Object(l.a)(n[a],2),o=r[0],c=r[1];k.now()-c.timestamp>3e3||(t[o]=c.username,o===R.me.userId&&W())}(function(e){if(!R.lobby)return!1;if(Object.keys(e).length!==Object.keys(R.lobby).length)return!1;for(var t=0,a=Object.entries(e);t<a.length;t++){var n=Object(l.a)(a[t],2),r=n[0],o=n[1];if(R.lobby[r]!==o)return!1}return!0})(t)||(R.lobby=t,N())}var x=!1;function W(){x||(x=!0,setInterval(j,1e3),k.latestChild(S(),O))}var C=!1;var N=function(){throw Error("this should be overwritten during init")};function I(){return"".concat(M(),"/lobby")}function T(e){return void 0===e&&(e=R.me.userId),"".concat(I(),"/").concat(e)}function M(){return"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_NAMESPACE||window.location.hostname.replace("www.","").split(".")[0],"/").concat(R.me.gameName,"/").concat(R.me.roomId)}function S(){return"".concat(M(),"/game")}var _,P={init:function(e,t,a){if(!C){C=!0,k.init();var n=function(){localStorage.version!==A&&(localStorage.version=A,localStorage.userId="u_".concat(Math.random().toString(16).substr(2)));return localStorage.userId}(),r={roomId:e,gameName:t,VERSION:A,userId:n};R.me=r,N=a,k.connect(I(),E)}},setUsername:function(e){var t=R.me.userId,a=k.now(),n={userId:t,username:e,timestamp:a,signInTime:a};k.set(T(),n)},sendGameState:function(e,t,a){var n=R.gameW.info,r={game:t,info:{id:n.id+1,timestamp:k.now(),host:n.host,playerId:R.me.userId,playerName:R.lobby[R.me.userId]||R.me.userId,message:e}};void 0===t&&delete r.game,n.alert&&(r.info.alert=n.alert),a&&(r.info.isNewGame=a),w(r)}};var R=_={update:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t||_.gameW.game;P.sendGameState(e,a,void 0!==t)}},A="v0.1.1",G=function(){function e(){Object(m.a)(this,e),window.store=R,window.utils=this}return Object(h.a)(e,[{key:"isMyTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||R.gameW.game;if(!t)return!1;var a=this.getCurrent(t);return!!a&&a.userId===R.me.userId}},{key:"incrementPlayerTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||R.gameW.game;t.currentPlayer=this.playerIndexByIndex(t.currentPlayer+1,t)}},{key:"playerIndexByIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t||R.gameW.game;return e%a.players.length}},{key:"playerIndexById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t||R.gameW.game;return a.players.map((function(e){return e.userId})).indexOf(e)}},{key:"myIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this.playerIndexById(R.me.userId,e)}},{key:"getPlayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t||R.gameW.game;return a.players[e]}},{key:"getMe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this.getPlayer(this.myIndex(e))}},{key:"getCurrent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this.getPlayer(this.currentIndex(e),e)}},{key:"currentIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||R.gameW.game;return t.currentPlayer}},{key:"shuffle",value:function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e}},{key:"arrToDict",value:function(e,t){var a={};return e.forEach((function(e){var n=t(e);a[n]||(a[n]=[]),a[n].push(e)})),a}},{key:"m",value:function(e){var t=R.gameW.game.players[e];t.userId=R.me.userId,R.update("is masquerading as ".concat(t.userName))}},{key:"repeat",value:function(e,t){return Array.from(new Array(t).map((function(){return e})))}},{key:"enumArray",value:function(e){return Object.values(e).filter((function(e){return"number"===typeof e}))}}]),e}(),F=R,D=new G;function B(e){return e.currentPlayer=e.dealer,e.dealer=D.playerIndexByIndex(e.dealer+1,e),e.lead=null,e.deck=function(){for(var e=[],t=0;t<3;t++)for(var a=String.fromCharCode(65+t),n=1;n<=11;n++)e.push({suit:a,value:n});return D.shuffle(e),e}(),e.players=function(e){return e.players.map((function(t){return Object.assign(t,{hand:H(e),tricks:0})}))}(e),e.trump=e.deck.shift(),e}function H(e){for(var t=[],a=0;a<13;a++)t.push(e.deck.shift());return z(t),t}function z(e){e.sort((function(e,t){return L(e)-L(t)}))}function L(e){return 11*e.suit.codePointAt(0)+e.value}function U(e){return"".concat(e.suit,"/").concat(e.value||"-")}var q=function(e){var t=D.getMe(),a=t.hand[e],n=F.gameW.game,r=Boolean(n.staging);if(r)!function(e){var t=F.gameW.game;5===t.staging.value?t.deck.push(e):3===t.staging.value&&(t.trump=e)}(a),a=n.staging,n.staging=null;else if(n.lead&&!function(e,t){if(e.suit===t.suit){if(11!==t.value)return!0;if(1===e.value)return!0}for(var a=D.getMe().hand,n=0;n<a.length;n++){var r=a[n];if(r.suit===t.suit){if(11!==t.value)return!1;if(r.value>e.value)return!1}}return!0}(a,n.lead))return alert("cant play that card");if(t.hand.splice(e,1),!r){var o=function(e){var t=D.getMe().hand,a=F.gameW.game;if(5===e.value){var n=a.deck.shift(),r=U(n);return alert("you drew ".concat(r)),t.unshift(n),z(t),"draws a card"}if(3===e.value)return t.unshift(a.trump),z(t),"swaps trump";return null}(a);if(null!==o)return n.staging=a,F.update(o)}var c,i=U(a);if(!n.lead)return n.lead=a,D.incrementPlayerTurn(),F.update("lead with ".concat(i));!function(e){var t=F.gameW.game,a=t.lead;if(e.suit===a.suit)return e.value>a.value;if(9===e.value){if(9!==a.value)return a.suit!==t.trump.suit||e.value>a.value}else if(9===a.value&&e.value<a.value)return!1;return e.suit===t.trump.suit}(a)?(D.incrementPlayerTurn(),c=D.getCurrent()):c=t,c.tricks++,function(e,t){var a=D.getMe(),n=F.gameW.game;1===e.value?t!==a&&D.incrementPlayerTurn():1===n.lead.value&&t===a&&D.incrementPlayerTurn();7===e.value&&t.score++;7===n.lead.value&&t.score++}(a,c),n.previous="".concat(U(n.lead)," vs ").concat(i),n.lead=null;var s="played ".concat(i);if(0===t.hand.length){var l=n.players.map((function(e){return"".concat(e.userName,": ").concat(e.tricks)})).join(" / ");s="".concat(s," - new hand - ").concat(l),n.previous+="\n".concat(l),function(){for(var e=F.gameW.game.players,t=0;t<e.length;t++){var a=e[t];switch(a.tricks){case 0:case 1:case 2:case 3:a.score+=6;break;case 4:a.score+=1;break;case 5:a.score+=2;break;case 6:a.score+=3;break;case 7:case 8:case 9:a.score+=6}}}(),B(n)}F.update(s)},$=a(2),V=a.n($),J=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble,onClick:this.play.bind(this)},U(this.props.card))}},{key:"play",value:function(){if(D.isMyTurn()){var e=q(this.props.index);e&&F.update(e)}}}]),a}(c.a.Component),Y=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=D.getMe();return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Hand"),e&&e.hand&&e.hand.map((function(e,t){return c.a.createElement(J,{key:t,card:e,index:t})})))}}]),a}(c.a.Component),Q=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=F.gameW.game.lead||{suit:"-",value:0};return c.a.createElement("div",null,c.a.createElement("div",{className:V.a.bubble},c.a.createElement("p",null,"Trump"),c.a.createElement("p",null,U(F.gameW.game.trump))),c.a.createElement("div",{className:V.a.bubble},c.a.createElement("p",null,"Lead"),c.a.createElement("p",null,U(e))),c.a.createElement("div",{className:V.a.bubble},c.a.createElement("p",null,"Last"),c.a.createElement("p",null,F.gameW.game.previous)))}}]),a}(c.a.Component),K=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Rules"),c.a.createElement("pre",{className:V.a.bubble},c.a.createElement("div",null,c.a.createElement("span",null,"11")," ",c.a.createElement("span",null,"If lead, force either a 1 of same suit or highest card of same suit")),c.a.createElement("div",null,c.a.createElement("span",null,"9"),"  ",c.a.createElement("span",null,"Counts as trump if is only 9")),c.a.createElement("div",null,c.a.createElement("span",null,"7"),"  ",c.a.createElement("span",null,"Winner of this trick gets a point")),c.a.createElement("div",null,c.a.createElement("span",null,"5"),"  ",c.a.createElement("span",null,"Draw a card, then put a card at bottom of deck")),c.a.createElement("div",null,c.a.createElement("span",null,"3"),"  ",c.a.createElement("span",null,"May trade trump card with a card in hand")),c.a.createElement("div",null,c.a.createElement("span",null,"1"),"  ",c.a.createElement("span",null,"Lead next trick even if lose this trick"))),c.a.createElement("pre",{className:V.a.bubble},c.a.createElement("div",null,c.a.createElement("span",null,"0-3"),"  ","/",c.a.createElement("span",null,"6")," ",c.a.createElement("span",null,"Humble")),c.a.createElement("div",null,c.a.createElement("span",null,"4"),"    ","/",c.a.createElement("span",null,"1")," ",c.a.createElement("span",null,"DEFEATED")),c.a.createElement("div",null,c.a.createElement("span",null,"5"),"    ","/",c.a.createElement("span",null,"2")," ",c.a.createElement("span",null,"Defeated")),c.a.createElement("div",null,c.a.createElement("span",null,"6"),"    ","/",c.a.createElement("span",null,"3")," ",c.a.createElement("span",null,"defeated")),c.a.createElement("div",null,c.a.createElement("span",null,"7-9"),"  ","/",c.a.createElement("span",null,"6")," ",c.a.createElement("span",null,"Victory")),c.a.createElement("div",null,c.a.createElement("span",null,"10-13"),"/",c.a.createElement("span",null,"0")," ",c.a.createElement("span",null,"Greedy"))))}}]),a}(c.a.Component),X=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(Y,null),c.a.createElement("br",null),c.a.createElement(Q,null),c.a.createElement("br",null),c.a.createElement(K,null))}}]),a}(c.a.Component);function Z(e){return e.players=Object.keys(e.params.lobby).map((function(t,a){return{hand:[],tricks:0,score:0,userId:t,userName:e.params.lobby[t]}})),e}function ee(e){return e.dealer=D.myIndex(e),e.previous="new game",e}var te=function(e){var t={};return t.params=e,Promise.resolve(t).then(Z).then(ee).then(B)},ae=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("pre",{onClick:this.revert.bind(this)},this.getMessage())}},{key:"getMessage",value:function(){var e=this.props.wrapper,t=new Date(e.info.timestamp).toLocaleTimeString();return"(".concat(e.info.id,") [").concat(e.info.playerName,"] ").concat(e.info.message," ").concat(t)}},{key:"revert",value:function(){var e=R.me.userId;if(R.gameW.info.host===e){var t="restored to [".concat(this.getMessage(),"]");R.update(t,this.props.wrapper.game)}else alert("only the host can revert")}}]),a}(c.a.Component),ne=[],re=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={history:ne},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.updateHistory()}},{key:"componentDidUpdate",value:function(){this.updateHistory()}},{key:"updateHistory",value:function(){var e=R.gameW;if(!this.state.history[0]||e.info.id!==this.state.history[0].info.id){this.state.history.unshift(JSON.parse(JSON.stringify(e)));var t=e.info.alert;delete e.info.alert,t&&alert(t),this.setState({})}}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Log"),c.a.createElement("div",{className:V.a.dont_grow},c.a.createElement("div",{className:V.a.log_entry_parent},c.a.createElement("div",{className:V.a.inline},this.state.history.map((function(t,a){return c.a.createElement(ae,{key:a,wrapper:t,history:e.state.history})}))))))}}]),a}(c.a.Component);function oe(){if(R.gameW.info.host!==R.me.userId){var e=window.prompt("Enter the password to become the host.");e&&("danrules"===e?(R.gameW.info.host=R.me.userId,R.update("became the host")):window.open("https://www.youtube.com/watch?v=RfiQYRn7fBg"))}else alert("You're already the host.")}var ce=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.NewGame=void 0,e.isMyTurn=void 0,e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:V.a.sidebar},c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,this.name),c.a.createElement("div",null,this.renderStartNewGame())),c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",{onClick:oe},"Lobby"),Object.entries(R.lobby).map((function(t,a){var n=Object(l.a)(t,2),r=n[0],o=n[1];return c.a.createElement("div",{key:a,onClick:function(){return function(e){if(R.gameW.info.host!==R.me.userId)return;if(e===R.me.userId)return void alert("Can't kick yourself.");k.set(T(e),{})}(r)}},e.renderPlayer(r,o))}))),this.renderInfo(),c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,c.a.createElement("a",{href:".."},"Home"))),c.a.createElement(re,null))}},{key:"renderPlayer",value:function(e,t){return c.a.createElement(c.a.Fragment,null,t)}},{key:"startNewGame",value:function(){Promise.resolve().then(this.getParams.bind(this)).then(this.NewGame).catch((function(e){alert(e),console.error(e)})).then((function(e){return e&&R.update("started a new game",e)}))}},{key:"componentDidMount",value:function(){this.maybeSyncParams()}},{key:"componentDidUpdate",value:function(){this.maybeSyncParams()}},{key:"maybeSyncParams",value:function(){document.title=(this.isMyTurn()?"(!) ":"")+this.name}},{key:"renderInfo",value:function(){return null}}]),a}(c.a.Component),ie=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name="Fox in the Forest",e.NewGame=te,e.isMyTurn=D.isMyTurn.bind(D),e}return Object(h.a)(a,[{key:"getParams",value:function(){return{lobby:F.lobby}}},{key:"renderStartNewGame",value:function(){return c.a.createElement("div",null,c.a.createElement("button",{onClick:this.startNewGame.bind(this)},"New Game"))}},{key:"renderPlayer",value:function(e,t){var a,n="";F.gameW.info.host===e&&(n+="(host) "),F.me.userId===e&&(n+="(you) ");var r=[c.a.createElement("p",{key:"name"},"".concat(n).concat(F.lobby[e]))],o=null===(a=F.gameW.game)||void 0===a?void 0:a.players[D.playerIndexById(e)];return o&&(r.push(c.a.createElement("p",{key:"tricks"},"tricks: ",o.tricks)),r.push(c.a.createElement("p",{key:"score"},"score: ",o.score))),c.a.createElement("div",{key:e,className:V.a.bubble},r)}}]),a}(ce),se=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(D.isMyTurn()&&V.a.my_turn)},c.a.createElement("div",{className:V.a.main},c.a.createElement(ie,null),c.a.createElement("div",{className:V.a.content},c.a.createElement("div",null,F.gameW.game&&c.a.createElement(X,null)))))}}]),a}(c.a.Component),le=R,ue=new G;function de(e){e.board.sort((function(e,t){return e-t}))}var me=a(9),he=a.n(me),pe=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Hand"),this.getHand())}},{key:"getHand",value:function(){var e=ue.getMe();return e?(e.hand||[]).map(this.renderCard.bind(this)):null}},{key:"renderCard",value:function(e,t){var a=this,n=le.gameW.game.terms[e],r=[V.a.bubble];return this.props.selectedIndex===t&&r.push(he.a.selectedCard),c.a.createElement("div",{key:t,className:r.join(" "),onClick:function(e){return a.selectCard(t,e)}},c.a.createElement("div",{className:he.a.info},c.a.createElement("div",{className:he.a.card},c.a.createElement("p",null,n.word)),n.image&&c.a.createElement("img",{className:he.a.image,src:n.image,alt:""})))}},{key:"selectCard",value:function(e,t){t.stopPropagation(),this.props.selectCard(e)}}]),a}(c.a.Component),ge=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Timeline"),this.getCardsAndTargets())}},{key:"getCardsAndTargets",value:function(){var e=this,t=[this.renderTarget(0)];return le.gameW.game.board.forEach((function(a,n){t.push(e.renderCard(a)),t.push(e.renderTarget(n+1))})),t}},{key:"renderTarget",value:function(e){var t,a=this;return c.a.createElement("div",{key:"t".concat(e),className:"".concat(V.a.bubble," ").concat(he.a.target," ").concat((null===(t=le.gameW.game.last)||void 0===t?void 0:t.wrongTarget)===e?he.a.wrongTarget:""),onClick:function(t){return a.selectTarget(e,t)}})}},{key:"renderCard",value:function(e){var t=le.gameW.game.terms[e],a=[V.a.bubble,he.a.board_card],n=le.gameW.game.last;return e===(null===n||void 0===n?void 0:n.termIndex)&&a.push(n.correct?he.a.correct:he.a.incorrect),c.a.createElement("div",{key:"c".concat(e),className:a.join(" ")},c.a.createElement("div",{className:he.a.info},c.a.createElement("div",{className:he.a.card},c.a.createElement("p",null,t.word),c.a.createElement("p",null,t.definition)),t.image&&c.a.createElement("img",{className:he.a.image,src:t.image,alt:""})))}},{key:"selectTarget",value:function(e,t){t.stopPropagation(),this.props.selectTarget(e)}}]),a}(c.a.Component),fe=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e;return c.a.createElement("div",null,c.a.createElement(pe,{selectedIndex:null===(e=this.state)||void 0===e?void 0:e.selectedIndex,selectCard:this.selectCard.bind(this)}),c.a.createElement(ge,{selectTarget:this.selectTarget.bind(this)}))}},{key:"selectCard",value:function(e){var t;ue.isMyTurn()&&((null===(t=this.state)||void 0===t?void 0:t.selectedIndex)===e&&(e=-1),this.setState({selectedIndex:e}))}},{key:"selectTarget",value:function(e){var t;if(ue.isMyTurn()){if(!((null===(t=this.state)||void 0===t?void 0:t.selectedIndex)>-1))return alert("need to select a card from hand first");var a=le.gameW.game,n=a.board[e-1],r=a.board[e],o=a.players[a.currentPlayer],c=o.hand[this.state.selectedIndex],i=this.isBetween(c,n,r);if(a.last={correct:i,termIndex:c},a.board.push(o.hand.splice(this.state.selectedIndex,1)[0]),i)0===o.hand.length&&(le.gameW.info.alert="".concat(o.userName," wins!"));else{var s=a.deck;s&&o.hand.push(s.pop()),a.last.wrongTarget=n>c?e+1:e}de(le.gameW.game),this.setState({selectedIndex:-1});var l=le.gameW.game.terms[c],u="played [".concat(l.word,"]: [").concat(l.definition,"] - ").concat(i?"CORRECT":"WRONG");this.incrementPlayerTurn(),le.update(u)}}},{key:"incrementPlayerTurn",value:function(){for(var e=0;e<le.gameW.game.players.length;e++)if(ue.incrementPlayerTurn(),(ue.getCurrent().hand||[]).length>0)return}},{key:"isBetween",value:function(e,t,a){if(t>e||a<e){var n,r,o=le.gameW.game,c=o.terms[e].definition;return(null===(n=o.terms[t])||void 0===n?void 0:n.definition)===c||(null===(r=o.terms[a])||void 0===r?void 0:r.definition)===c}return!0}}]),a}(c.a.Component),be=a(11),ye=a(18),ve="https://cors-anywhere.herokuapp.com/https://quizlet.com/webapi/3.1/",ke=ve+"sets/";var we={fetch:function(e,t){return fetch(e+t).then((function(e){return e.json()})).then((function(e){return e.responses[0].models}))},TERMS_URL:"https://cors-anywhere.herokuapp.com/https://quizlet.com/webapi/3.1/terms?filters[isDeleted]=0&filters[setId]=",SEARCH_URL:"https://cors-anywhere.herokuapp.com/https://quizlet.com/webapi/3.1/sets/search?filters[isDeleted]=0&perPage=9&query=",FOLDER_URL:"https://cors-anywhere.herokuapp.com/https://quizlet.com/webapi/3.1/folder-sets?filters[folderId]=49189251&filters[isDeleted]=0",SET_URL:ke};function Oe(e){var t=we.fetch(we.SET_URL,e).then((function(e){return e.set[0]})),a=we.fetch(we.TERMS_URL,e).then((function(e){return e.term}));return Promise.all([t,a]).then((function(e){var t=Object(l.a)(e,2);return{set:t[0],terms:t[1]}}))}function je(e){return we.fetch(we.SEARCH_URL,e).then((function(e){return e.set[0].id})).then(Oe)}function Ee(e){var t=e.response.terms.map((function(e){return{definition:e.definition||null,word:e.word||null,image:e._imageUrl||null,rank:e.rank||0}}));return e.game.params.swap&&t.forEach((function(e){var t=[e.definition,e.word];e.word=t[0],e.definition=t[1]})),e.game.params.useRank&&t.forEach((function(e){e.definition=(e.rank+1).toString()})),t.sort((function(e,t){return e.rank-t.rank})),e.game.params.reverse&&t.reverse(),e.game.title=e.response.set.title,e.game.setId=e.response.set.id,e.game.terms=t,e.game.deck=ue.shuffle(Object.keys(t).map((function(e){return parseInt(e)}))),e}function xe(e){var t=Object.keys(e.game.params.lobby).map((function(t,a){return{index:a,userName:e.game.params.lobby[t],userId:t,hand:e.game.deck.splice(0,e.game.params.handSize)}}));return e.game.players=t,e.game.currentPlayer=ue.myIndex(e.game),e}function We(e){if(e.game.board=e.game.deck.splice(0,e.game.params.boardStartingSize),e.game.board.length<1)throw Error("too few terms in that set (".concat(e.game.terms.length,")"));return de(e.game),e}var Ce,Ne,Ie,Te,Me,Se,_e,Pe,Re,Ae=function(e){var t=parseInt(e.quizlet)?Oe:je,a={};return a.params=e,t(e.quizlet).then((function(e){return{response:e,game:a}})).then(Ee).then(xe).then(We).then((function(e){return e.game}))},Ge=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handSizeRef=c.a.createRef(),e.boardSizeRef=c.a.createRef(),e.swapRef=c.a.createRef(),e.reverseRef=c.a.createRef(),e.useRankRef=c.a.createRef(),e.quizletRef=c.a.createRef(),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.state||this.fetchFromFolder()}},{key:"render",value:function(){return c.a.createElement("form",{className:he.a.settings_form},c.a.createElement("div",null,c.a.createElement("span",null,"Hand Size: "),c.a.createElement("input",{className:he.a.settings_input,type:"text",defaultValue:"6",size:4,ref:this.handSizeRef})),c.a.createElement("div",null,c.a.createElement("span",null,"Board Size: "),c.a.createElement("input",{className:he.a.settings_input,type:"number",defaultValue:"6",ref:this.boardSizeRef})),c.a.createElement("div",null,c.a.createElement("label",null,"Swap: ",c.a.createElement("input",{type:"checkbox",ref:this.swapRef})),c.a.createElement("br",null),c.a.createElement("label",null,"Reverse:"," ",c.a.createElement("input",{type:"checkbox",ref:this.reverseRef})),c.a.createElement("br",null),c.a.createElement("label",null,"Use Rank:"," ",c.a.createElement("input",{type:"checkbox",ref:this.useRankRef}))),c.a.createElement("div",{className:V.a.dont_grow},c.a.createElement("select",{className:he.a.settings_select,onChange:this.selectChange.bind(this)},c.a.createElement("option",{defaultChecked:!0},"Select Set"),this.state&&this.getSets())),c.a.createElement("div",null,c.a.createElement("span",{onClick:this.refresh.bind(this)},"Quizlet: "),c.a.createElement("input",{type:"text",size:"284065846".length+2,ref:this.quizletRef,defaultValue:"284065846"})))}},{key:"refresh",value:function(){localStorage.fetchedFromFolderVersion=null,this.fetchFromFolder().then((function(){return alert("refreshed")}))}},{key:"getSets",value:function(){for(var e=[],t=0,a=Object.entries(this.state.setsToTitles);t<a.length;t++){var n=Object(l.a)(a[t],2),r=n[0],o=n[1];e.push(c.a.createElement("option",{key:r,value:r},o))}return e}},{key:"selectChange",value:function(e){e.preventDefault();var t=e.target.selectedIndex;if(0!==t){var a=e.target.options[t];this.quizletRef.current.value=a.value}}},{key:"fetchFromFolder",value:function(){var e=this;return this.fetchFromFolderHelper().then((function(t){return e.setState({setsToTitles:t})}))}},{key:"fetchFromFolderHelper",value:function(){return localStorage.fetchedFromFolderVersion===le.me.VERSION&&localStorage.fetchedFromFolder?Promise.resolve(localStorage.fetchedFromFolder).then(JSON.parse):we.fetch(we.FOLDER_URL,"").then(this.seedFromFolder.bind(this)).then((function(e){return localStorage.fetchedFromFolder=JSON.stringify(e),localStorage.fetchedFromFolderVersion=le.me.VERSION,e}))}},{key:"seedFromFolder",value:function(e){var t=e.folderSet.map((function(e){return we.fetch(we.SET_URL,e.setId.toString())}));return Promise.all(t).then((function(e){return e.map((function(e){var t=e.set[0];return{id:t.id,title:t.title}}))})).then((function(e){var t={};return e.forEach((function(e){return t[e.id]=e.title})),t}))}},{key:"getParams",value:function(){return{lobby:le.lobby,quizlet:this.quizletRef.current.value,handSize:parseInt(this.handSizeRef.current.value),boardStartingSize:parseInt(this.boardSizeRef.current.value),swap:this.swapRef.current.checked,reverse:this.reverseRef.current.checked,useRank:this.useRankRef.current.checked}}},{key:"maybeSyncParams",value:function(){if(le.gameW.info.isNewGame){var e=le.gameW.game.params;this.quizletRef.current.value=e.quizlet,this.handSizeRef.current.value=e.handSize.toString(),this.boardSizeRef.current.value=e.boardStartingSize.toString(),this.swapRef.current.checked=e.swap,this.reverseRef.current.checked=e.reverse,this.useRankRef.current.checked=e.useRank}}}]),a}(c.a.Component),Fe=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).settingsRef=c.a.createRef(),e.name="Timeline",e.NewGame=Ae,e.isMyTurn=ue.isMyTurn.bind(ue),e}return Object(h.a)(a,[{key:"renderStartNewGame",value:function(){return c.a.createElement("div",null,c.a.createElement(Ge,{ref:this.settingsRef}),c.a.createElement("button",{onClick:this.startNewGame.bind(this)},"New Game"))}},{key:"getParams",value:function(){return this.settingsRef.current.getParams()}},{key:"maybeSyncParams",value:function(){var e;Object(ye.a)(Object(be.a)(a.prototype),"maybeSyncParams",this).call(this),null===(e=this.settingsRef.current)||void 0===e||e.maybeSyncParams()}},{key:"renderInfo",value:function(){var e=le.gameW.game;return e?c.a.createElement("div",{className:V.a.bubble},c.a.createElement("div",{className:he.a.info},c.a.createElement("p",null,e.title),c.a.createElement("p",null,"Set Id: ",c.a.createElement("span",null,e.setId)),c.a.createElement("p",null,"Current Player:"," ",c.a.createElement("span",null,e.players[e.currentPlayer].userName)),c.a.createElement("div",null,e.players.map((function(e){return c.a.createElement("p",{key:e.index},e.userName," (",(e.hand||[]).length,")")}))))):null}}]),a}(ce),De=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(ue.isMyTurn()&&V.a.my_turn)},c.a.createElement("div",{className:V.a.main},c.a.createElement(Fe,null),c.a.createElement("div",{className:V.a.content},c.a.createElement("div",null,le.gameW.game&&c.a.createElement(fe,null)))))}}]),a}(c.a.Component),Be=a(21),He=a(1);!function(e){e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.guild=4]="guild",e[e.temple=5]="temple"}(Ce||(Ce={})),function(e){e.money="$",e.clay="\ud83e\uddf1",e.stone="\u2f6f",e.wood="\ud83c\udf32",e.paper="\ud83e\uddfb",e.glass="\ud83d\udd39"}(Ne||(Ne={})),function(e){e[e.brown=0]="brown",e[e.grey=1]="grey",e[e.yellow=2]="yellow",e[e.red=3]="red",e[e.blue=4]="blue",e[e.green=5]="green",e[e.purple=6]="purple"}(Ie||(Ie={})),function(e){e[e.wheel=0]="wheel",e[e.a=1]="a",e[e.writing=2]="writing",e[e.bowl=3]="bowl",e[e.astrolabe=4]="astrolabe",e[e.tablet=5]="tablet",e[e.law=6]="law"}(Te||(Te={})),function(e){e[e.lamp=0]="lamp",e[e.target=1]="target",e[e.water=2]="water",e[e.crescent=3]="crescent",e[e.mask=4]="mask",e[e.horseshoe=5]="horseshoe",e[e.vase=6]="vase",e[e.barrel=7]="barrel",e[e.helmet=8]="helmet",e[e.sword=9]="sword",e[e.pillar=10]="pillar",e[e.sun=11]="sun",e[e.crown=12]="crown",e[e.book=13]="book",e[e.gear=14]="gear",e[e.capital=15]="capital",e[e.harp=16]="harp"}(Me||(Me={})),(_e=Se||(Se={}))[_e.egyptian=0]="egyptian",_e[_e.mesopotamian=1]="mesopotamian",_e[_e.greek=2]="greek",_e[_e.roman=3]="roman",_e[_e.phoenician=4]="phoenician",function(e){e.agriculture="$6 + 4 points",e.mathematics="3 points / science token",e.urbanism="$6 + $4 when upgrading",e.polioretics="siege $1 / military",e.architecture="free wonders",e.law="extra science symbol",e.economy="opponents pay you when buying",e.masonry="free blue cards",e.mysticism="2 points per god token",e.engineering="upgrades cost $1",e.philosophy="7 points",e.theology="go again when building wonder",e.strategy="military moves extra"}(Pe||(Pe={})),function(e){e.science="select a science token",e.chooseWonder="choose a wonder",e.destroyGrey="destroy a grey card",e.destroyBrown="destroy a brown card",e.revive="construct a card from discard",e.library="choose a science token",e.destroyWonder="destroy one of your wonders",e.pickGod="choose a god to add to the pantheon",e.anubis="unbuild a wonder",e.ra="steal an unbuilt wonder",e.isis="use a card from the trash to build a wonder",e.zeus="destoy a card from the strucutre",e.nisaba="copy a science card",e.enki="select 1 / 2 science tokens",e.baal="steal a brown/grey card",e.theater="pick a god",e.gate="pick a top god",e.minerva="place Minerva"}(Re||(Re={}));var ze,Le,Ue=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Sciences"),c.a.createElement("div",{className:V.a.flex},Ct.gameW.game.sciences.slice(0,5).filter((function(e){return!e.taken})).map((function(e){return e.token})).map(this.renderScience.bind(this))))}},{key:"renderScience",value:function(e){var t=this;return c.a.createElement("div",{key:e,className:V.a.bubble,title:e,onClick:function(){return t.select(e)}},It.enumName(e,Pe))}},{key:"select",value:function(e){It.isMyCommercial(Re.science)&&It.buildScienceToken(e)}}]),a}(c.a.Component),qe=a(41),$e=[{name:"lumber yard",age:Ce.one,color:Ie.brown,cost:[],extra:{resource:[Ne.wood]}},{name:"clay pool",age:Ce.one,color:Ie.brown,cost:[],extra:{resource:[Ne.clay]}},{name:"quarry",age:Ce.one,color:Ie.brown,cost:[],extra:{resource:[Ne.stone]}},{name:"logging camp",age:Ce.one,color:Ie.brown,cost:[Ne.money],extra:{resource:[Ne.wood]}},{name:"stone pit",age:Ce.one,color:Ie.brown,cost:[Ne.money],extra:{resource:[Ne.stone]}},{name:"clay pit",age:Ce.one,color:Ie.brown,cost:[Ne.money],extra:{resource:[Ne.clay]}},{name:"press",age:Ce.one,color:Ie.grey,cost:[Ne.money],extra:{resource:[Ne.paper]}},{name:"glassworks",age:Ce.one,color:Ie.grey,cost:[Ne.money],extra:{resource:[Ne.glass]}},{name:"baths",age:Ce.one,color:Ie.blue,cost:[Ne.stone],upgradesTo:Me.water,extra:{points:3}},{name:"altar",age:Ce.one,color:Ie.blue,cost:[],upgradesTo:Me.crescent,extra:{points:3}},{name:"theater",age:Ce.one,color:Ie.blue,cost:[],upgradesTo:Me.mask,extra:{points:3}},{name:"guard tower",age:Ce.one,color:Ie.red,cost:[],extra:{military:1}},{name:"garrison",age:Ce.one,color:Ie.red,cost:[Ne.clay],upgradesTo:Me.sword,extra:{military:1}},{name:"palisade",age:Ce.one,color:Ie.red,cost:[Ne.money,Ne.money],upgradesTo:Me.crown,extra:{military:1}},{name:"stable",age:Ce.one,color:Ie.red,cost:[Ne.wood],upgradesTo:Me.horseshoe,extra:{military:1}},{name:"stone reserve",age:Ce.one,color:Ie.yellow,cost:[Ne.money,Ne.money,Ne.money],extra:{discount:[Ne.stone]}},{name:"wood reserve",age:Ce.one,color:Ie.yellow,cost:[Ne.money,Ne.money,Ne.money],extra:{discount:[Ne.wood]}},{name:"clay reserve",age:Ce.one,color:Ie.yellow,cost:[Ne.money,Ne.money,Ne.money],extra:{discount:[Ne.clay]}},{name:"tavern",age:Ce.one,color:Ie.yellow,cost:[],extra:{f:function(){return It.getMe().money+=4}},message:"$4",upgradesTo:Me.vase},{name:"apothecary",age:Ce.one,color:Ie.green,cost:[Ne.glass],extra:{points:1,science:Te.wheel}},{name:"workshop",age:Ce.one,color:Ie.green,cost:[Ne.paper],extra:{points:1,science:Te.a}},{name:"scriptorium",age:Ce.one,color:Ie.green,cost:[Ne.money,Ne.money],extra:{science:Te.writing},upgradesTo:Me.book},{name:"pharmacist",age:Ce.one,color:Ie.green,cost:[Ne.money,Ne.money],extra:{science:Te.bowl},upgradesTo:Me.gear},{name:"sawmill",age:Ce.two,color:Ie.brown,cost:[Ne.money,Ne.money],extra:{resource:[Ne.wood,Ne.wood]}},{name:"brickyard",age:Ce.two,color:Ie.brown,cost:[Ne.money,Ne.money],extra:{resource:[Ne.clay,Ne.clay]}},{name:"shelf quarry",age:Ce.two,color:Ie.brown,cost:[Ne.money,Ne.money],extra:{resource:[Ne.stone,Ne.stone]}},{name:"drying room",age:Ce.two,color:Ie.grey,cost:[],extra:{resource:[Ne.paper]}},{name:"glassblower",age:Ce.two,color:Ie.grey,cost:[],extra:{resource:[Ne.glass]}},{name:"courthouse",age:Ce.two,color:Ie.blue,cost:[Ne.wood,Ne.wood,Ne.glass],extra:{points:5}},{name:"aqueduct",age:Ce.two,color:Ie.blue,cost:[Ne.stone,Ne.stone,Ne.stone],upgradesFrom:Me.water,extra:{points:5}},{name:"statue",age:Ce.two,color:Ie.blue,cost:[Ne.clay,Ne.clay],upgradesFrom:Me.mask,upgradesTo:Me.pillar,extra:{points:4}},{name:"temple",age:Ce.two,color:Ie.blue,cost:[Ne.wood,Ne.paper],upgradesFrom:Me.crescent,upgradesTo:Me.sun,extra:{points:4}},{name:"rostrum",age:Ce.two,color:Ie.blue,cost:[Ne.stone,Ne.wood],upgradesTo:Me.capital,extra:{points:4}},{name:"archery range",age:Ce.two,color:Ie.red,cost:[Ne.stone,Ne.wood,Ne.paper],upgradesTo:Me.target,extra:{military:2}},{name:"barracks",age:Ce.two,color:Ie.red,cost:[Ne.money,Ne.money,Ne.money],upgradesFrom:Me.sword,extra:{military:1}},{name:"walls",age:Ce.two,color:Ie.red,cost:[Ne.stone,Ne.stone],extra:{military:2}},{name:"horse breeders",age:Ce.two,color:Ie.red,cost:[Ne.wood,Ne.clay],upgradesTo:Me.horseshoe,extra:{military:1}},{name:"parade ground",age:Ce.two,color:Ie.red,cost:[Ne.clay,Ne.clay,Ne.glass],upgradesTo:Me.helmet,extra:{military:2}},{name:"forum",age:Ce.two,color:Ie.yellow,cost:[Ne.money,Ne.money,Ne.money,Ne.clay],extra:{resourceOptions:[Ne.glass,Ne.paper]}},{name:"caravansery",age:Ce.two,color:Ie.yellow,cost:[Ne.money,Ne.money,Ne.paper,Ne.glass],extra:{resourceOptions:[Ne.wood,Ne.clay,Ne.stone]}},{name:"customs house",age:Ce.two,color:Ie.yellow,cost:[Ne.money,Ne.money,Ne.money,Ne.money],extra:{discount:[Ne.glass,Ne.paper]}},{name:"brewery",age:Ce.two,color:Ie.yellow,cost:[],extra:{f:function(){return It.getMe().money+=6}},message:"$6",upgradesTo:Me.barrel},{name:"school",age:Ce.two,color:Ie.green,cost:[Ne.paper,Ne.paper,Ne.wood],extra:{points:1,science:Te.wheel},upgradesTo:Me.harp},{name:"laboratory",age:Ce.two,color:Ie.green,cost:[Ne.wood,Ne.glass,Ne.glass],extra:{points:1,science:Te.a},upgradesTo:Me.lamp},{name:"library",age:Ce.two,color:Ie.green,cost:[Ne.stone,Ne.wood,Ne.glass],extra:{points:2,science:Te.writing},upgradesFrom:Me.book},{name:"dispensary",age:Ce.two,color:Ie.green,cost:[Ne.clay,Ne.clay,Ne.stone],extra:{points:2,science:Te.bowl},upgradesFrom:Me.gear},{name:"pantheon",age:Ce.three,color:Ie.blue,cost:[Ne.clay,Ne.wood,Ne.paper,Ne.paper],extra:{points:6},upgradesFrom:Me.sun},{name:"obelisk",age:Ce.three,color:Ie.blue,cost:[Ne.stone,Ne.stone,Ne.glass],extra:{points:5}},{name:"senate",age:Ce.three,color:Ie.blue,cost:[Ne.clay,Ne.clay,Ne.stone,Ne.paper],extra:{points:5},upgradesFrom:Me.capital},{name:"gardens",age:Ce.three,color:Ie.blue,cost:[Ne.clay,Ne.clay,Ne.wood,Ne.wood],extra:{points:6},upgradesFrom:Me.pillar},{name:"palace",age:Ce.three,color:Ie.blue,cost:[Ne.clay,Ne.wood,Ne.stone,Ne.glass,Ne.glass],extra:{points:7}},{name:"town hall",age:Ce.three,color:Ie.blue,cost:[Ne.stone,Ne.stone,Ne.stone,Ne.wood,Ne.wood],extra:{points:7}},{name:"fortifications",age:Ce.three,color:Ie.red,cost:[Ne.stone,Ne.stone,Ne.clay,Ne.paper],extra:{military:2},upgradesFrom:Me.crown},{name:"pretorium",age:Ce.three,color:Ie.red,cost:[Ne.money,Ne.money,Ne.money,Ne.money,Ne.money,Ne.money,Ne.money,Ne.money],extra:{military:3}},{name:"arsenal",age:Ce.three,color:Ie.red,cost:[Ne.clay,Ne.clay,Ne.clay,Ne.wood,Ne.wood],extra:{military:3}},{name:"siege workshop",age:Ce.three,color:Ie.red,cost:[Ne.wood,Ne.wood,Ne.wood,Ne.glass],extra:{military:2},upgradesFrom:Me.target},{name:"circus",age:Ce.three,color:Ie.red,cost:[Ne.clay,Ne.clay,Ne.stone,Ne.stone],extra:{military:2},upgradesFrom:Me.helmet},{name:"lighthouse",age:Ce.three,color:Ie.yellow,cost:[Ne.clay,Ne.clay,Ne.glass],extra:{points:3,f:function(){return It.getMe().money+=(It.getMe().cards||[]).filter((function(e){return $e[e].color===Ie.yellow})).length}},message:"$1 / yellow",upgradesFrom:Me.vase},{name:"arena",age:Ce.three,color:Ie.yellow,cost:[Ne.clay,Ne.stone,Ne.wood],extra:{points:3,f:function(){return It.getMe().money+=2*It.getMe().wonders.filter((function(e){return e.built})).length}},message:"$2 / wonder",upgradesFrom:Me.barrel},{name:"port",age:Ce.three,color:Ie.yellow,cost:[Ne.wood,Ne.glass,Ne.paper],extra:{points:3,f:function(){return It.getMe().money+=2*(It.getMe().cards||[]).filter((function(e){return $e[e].color===Ie.brown})).length}},message:"$2 / brown"},{name:"armory",age:Ce.three,color:Ie.yellow,cost:[Ne.stone,Ne.stone,Ne.glass],extra:{points:3,f:function(){return It.getMe().money+=(It.getMe().cards||[]).filter((function(e){return $e[e].color===Ie.red})).length}},message:"$1 / red"},{name:"chamber of commerce",age:Ce.three,color:Ie.yellow,cost:[Ne.paper,Ne.paper],extra:{points:3,f:function(){return It.getMe().money+=3*(It.getMe().cards||[]).filter((function(e){return $e[e].color===Ie.grey})).length}},message:"$3 / grey"},{name:"observatory",age:Ce.three,color:Ie.green,cost:[Ne.stone,Ne.paper,Ne.paper],extra:{points:2,science:Te.astrolabe},upgradesFrom:Me.lamp},{name:"university",age:Ce.three,color:Ie.green,cost:[Ne.clay,Ne.glass,Ne.paper],extra:{points:2,science:Te.astrolabe},upgradesFrom:Me.harp},{name:"study",age:Ce.three,color:Ie.green,cost:[Ne.wood,Ne.wood,Ne.glass,Ne.paper],extra:{points:3,science:Te.tablet}},{name:"academy",age:Ce.three,color:Ie.green,cost:[Ne.stone,Ne.wood,Ne.glass,Ne.glass],extra:{points:3,science:Te.tablet}},{name:"moneylenders guild",age:Ce.guild,color:Ie.purple,cost:[Ne.stone,Ne.stone,Ne.wood,Ne.wood],extra:{guild:function(e){return Math.floor(e.money/3)}},message:"1 point / $3"},{name:"merchants guild",age:Ce.guild,color:Ie.purple,cost:[Ne.clay,Ne.wood,Ne.glass,Ne.paper],extra:{guild:function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.yellow})).length},f:function(){return It.getMe().money+=Math.max(Ct.gameW.game.players.map((function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.yellow})).length})).length)}},message:"$1, 1 point / yellow (both)"},{name:"shipowners guild",age:Ce.guild,color:Ie.purple,cost:[Ne.clay,Ne.stone,Ne.glass,Ne.paper],extra:{guild:function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.brown||$e[e].color===Ie.grey})).length},f:function(){return It.getMe().money+=Math.max(Ct.gameW.game.players.map((function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.brown||$e[e].color===Ie.grey})).length})).length)}},message:"$1, 1 point / brown/grey (both)"},{name:"tacticians guild",age:Ce.guild,color:Ie.purple,cost:[Ne.stone,Ne.stone,Ne.clay,Ne.paper],extra:{guild:function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.red})).length},f:function(){return It.getMe().money+=Math.max(Ct.gameW.game.players.map((function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.red})).length})).length)}},message:"$1, 1 point / red (both)"},{name:"scientists guild",age:Ce.guild,color:Ie.purple,cost:[Ne.clay,Ne.clay,Ne.wood,Ne.wood],extra:{guild:function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.green})).length},f:function(){return It.getMe().money+=Math.max(Ct.gameW.game.players.map((function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.green})).length})).length)}},message:"$1, 1 point / green (both)"},{name:"magistrates guild",age:Ce.guild,color:Ie.purple,cost:[Ne.wood,Ne.wood,Ne.clay,Ne.paper],extra:{guild:function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.blue})).length},f:function(){return It.getMe().money+=Math.max(Ct.gameW.game.players.map((function(e){return(e.cards||[]).filter((function(e){return $e[e].color===Ie.blue})).length})).length)}},message:"$1, 1 point / blue (both)"},{name:"builders guild",age:Ce.guild,color:Ie.purple,cost:[Ne.stone,Ne.stone,Ne.clay,Ne.wood,Ne.glass],extra:{guild:function(e){return 2*e.wonders.filter((function(e){return e.built})).length}},message:"2 points / wonder (both)"},{name:"egyptian grand temple",age:Ce.temple,color:Ie.purple,cost:[Ne.clay,Ne.clay,Ne.clay,Ne.glass,Ne.paper],extra:{godUpgrade:Se.egyptian}},{name:"phoenician grand temple",age:Ce.temple,color:Ie.purple,cost:[Ne.wood,Ne.stone,Ne.glass,Ne.paper,Ne.paper],extra:{godUpgrade:Se.phoenician}},{name:"meopotamian grand temple",age:Ce.temple,color:Ie.purple,cost:[Ne.wood,Ne.wood,Ne.wood,Ne.glass,Ne.paper],extra:{godUpgrade:Se.mesopotamian}},{name:"roman grand temple",age:Ce.temple,color:Ie.purple,cost:[Ne.clay,Ne.stone,Ne.glass,Ne.glass,Ne.paper],extra:{godUpgrade:Se.roman}},{name:"greek grand temple",age:Ce.temple,color:Ie.purple,cost:[Ne.stone,Ne.stone,Ne.stone,Ne.glass,Ne.paper],extra:{godUpgrade:Se.greek}}],Ve=[{name:"anubis",source:Se.egyptian,message:"destroy a built wonder",f:function(){return It.addCommercial({commercial:Re.anubis,playerIndex:It.myIndex()})}},{name:"ra",source:Se.egyptian,message:"steal an unbuilt wonder",f:function(){return It.addCommercial({commercial:Re.ra,playerIndex:It.myIndex()})}},{name:"isis",source:Se.egyptian,message:"trash -> wonder",f:function(){return It.addCommercial({commercial:Re.isis,playerIndex:It.myIndex()})}},{name:"aphrodite",source:Se.greek,message:"9 points",f:function(){return null},points:function(){return 9}},{name:"zeus",source:Se.greek,message:"destroy a structure card",f:function(){return It.addCommercial({commercial:Re.zeus,playerIndex:It.myIndex()})}},{name:"hades",source:Se.greek,message:"build a card from the trash",f:function(){return It.addCommercial({commercial:Re.revive,playerIndex:It.myIndex()})}},{name:"enki",source:Se.mesopotamian,message:"select 1 / 2 science tokens",f:function(){return It.addCommercial({commercial:Re.enki,playerIndex:It.myIndex()})}},{name:"nisaba",source:Se.mesopotamian,message:"copy a science from opponent",f:function(){return It.addCommercial({commercial:Re.nisaba,playerIndex:It.myIndex()})}},{name:"ishtar",source:Se.mesopotamian,message:"gain law science token",f:function(){return It.gainScience(Te.law)}},{name:"baal",source:Se.phoenician,message:"steal a brown/grey card",f:function(){return It.addCommercial({commercial:Re.baal,playerIndex:It.myIndex()})}},{name:"astarte",source:Se.phoenician,message:"$7, 1 point per",f:function(){return Ct.gameW.game.astarte=7},points:function(){return Ct.gameW.game.astarte||0}},{name:"tanit",source:Se.phoenician,message:"$12",f:function(){return It.getMe().money+=12}},{name:"neptune",source:Se.roman,message:"destroy/trigger military tokens",f:function(){var e=It.getMe().militaryBonuses,t=It.getOpponent().militaryBonuses;t[3]?(It.getOpponent().money-=t[6],delete t[3],delete t[6]):t[6]?(It.getOpponent().money-=t[6],delete t[6],e[3]?delete e[3]:e[6]&&delete e[6]):e[3]?(It.getOpponent().money-=e[6],delete e[3],delete e[6]):e[6]&&(It.getOpponent().money-=e[6],delete e[6]),It.getOpponent().money=Math.max(0,It.getOpponent().money)}},{name:"minerva",source:Se.roman,message:"block military movement",f:function(){return It.addCommercial({commercial:Re.minerva,playerIndex:It.myIndex()})}},{name:"mars",source:Se.roman,message:"military 2",f:function(){return It.increaseMilitary(2)}},{name:"gate",message:"cost x2: select 1 from top gods",f:function(){It.addCommercial({commercial:Re.gate,playerIndex:It.myIndex()});var e=Ct.gameW.game.gods[Se.mesopotamian];e&&"enki"===Ve[e[0]].name&&It.assignEnki()}}],Je=[{name:"the temple of artemis",message:"$12, go again",cost:[Ne.paper,Ne.paper,Ne.glass,Ne.stone],f:function(){return It.getMe().money+=12},goAgain:!0},{name:"circus maximus",message:"3 points military +1 and destroy a grey card",cost:[Ne.glass,Ne.wood,Ne.stone,Ne.stone],f:function(){It.increaseMilitary(1),It.addCommercial({commercial:Re.destroyGrey,playerIndex:It.myIndex()})},points:3},{name:"the statue of zeus",message:"3 points military +1 and destroy a brown card",cost:[Ne.paper,Ne.paper,Ne.clay,Ne.wood,Ne.stone],f:function(){It.increaseMilitary(1),It.addCommercial({commercial:Re.destroyBrown,playerIndex:It.myIndex()})},points:3},{name:"the hanging gardens",message:"$6, 3 points, go again",cost:[Ne.paper,Ne.glass,Ne.wood,Ne.wood],f:function(){return It.getMe().money+=6},goAgain:!0,points:3},{name:"the great lighthouse",message:"4 points o: ".concat(Ne.wood,"/").concat(Ne.clay,"/").concat(Ne.stone),cost:[Ne.paper,Ne.paper,Ne.stone,Ne.wood],f:function(){return null},points:4,resourceOptions:[Ne.wood,Ne.clay,Ne.stone]},{name:"piraeus",message:"2 points, go again o: ".concat(Ne.paper,"/").concat(Ne.glass),cost:[Ne.clay,Ne.stone,Ne.wood,Ne.wood],f:function(){return null},goAgain:!0,points:2,resourceOptions:[Ne.paper,Ne.glass]},{name:"the sanctuary",message:"$2 discount on gods, go again",cost:[Ne.paper,Ne.glass,Ne.stone,Ne.stone],f:function(){return null},goAgain:!0,expansion:!0},{name:"the mausoleum",message:"2 points build from discard",cost:[Ne.paper,Ne.glass,Ne.glass,Ne.clay,Ne.clay],f:function(){return It.addCommercial({commercial:Re.revive,playerIndex:It.myIndex()})},points:2},{name:"the appian way",message:"steal $3, 3 points, go again",cost:[Ne.paper,Ne.clay,Ne.clay,Ne.stone,Ne.stone],f:function(){It.getMe().money+=3,It.stealMoney(3)},points:3,goAgain:!0},{name:"the pyramids",message:"9 points",cost:[Ne.paper,Ne.stone,Ne.stone,Ne.stone],f:function(){return null},points:9},{name:"the sphinx",message:"6 points, go again",cost:[Ne.glass,Ne.glass,Ne.clay,Ne.stone],f:function(){return null},points:6,goAgain:!0},{name:"the great library",message:"4 points select 1/3 science tokens",cost:[Ne.paper,Ne.glass,Ne.wood,Ne.wood],f:function(){return It.addCommercial({commercial:Re.library,playerIndex:It.myIndex(),library:It.shuffle(Ct.gameW.game.sciences.slice(5).filter((function(e){return!e.taken})).filter((function(e){return-1===(Ct.gameW.game.enki||[]).indexOf(e.token)}))).slice(0,3).map((function(e){return e.token}))})},points:4},{name:"the colossus",message:"military +2, 3 points",cost:[Ne.glass,Ne.clay,Ne.clay,Ne.clay],f:function(){return It.increaseMilitary(2)},points:3},{name:"the divine theater",message:"2 points pick a god",cost:[Ne.paper,Ne.paper,Ne.glass,Ne.wood,Ne.wood],f:function(){It.addCommercial({commercial:Re.theater,playerIndex:It.myIndex()}),(Ct.gameW.game.gods[Se.mesopotamian]||[]).find((function(e){return"enki"===Ve[e].name}))&&It.assignEnki()},points:2,expansion:!0}],Ye=(ze={},Object(He.a)(ze,Ce.one,[[4,4],[3,3,3],[2,2,2,2],[1,1,1,1,1],[0,0,0,0,0,0]]),Object(He.a)(ze,Ce.two,[[0,0,0,0,0,0],[1,1,1,1,1],[2,2,2,2],[3,3,3],[4,4]]),Object(He.a)(ze,Ce.three,[[2,2],[1,1,1],[0,0,0,0],[1,3],[0,0,0,0],[1,1,1],[2,2]]),ze),Qe={cards:$e,structure:Ye,wonders:Je,gods:Ve},Ke=a(16),Xe=a.n(Ke),Ze=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"".concat(Xe.a.structure_card," ").concat(V.a.bubble),onClick:function(){return e.props.selectCard(e.props.x,e.props.y,e.props.offset)},style:{transform:"translate(".concat(50*this.props.offset,"%, 0%)"),visibility:this.props.taken?"hidden":"visible",zIndex:this.props.y}},this.renderCard())}},{key:"renderCard",value:function(){var e=Qe.cards[this.props.cardIndex];if(!this.props.revealed){if(Ct.gameW.game.params.godExpansion)if(Ct.gameW.game.age===Ce.one){if(this.props.x%2===0)return"god token"}else if(Ct.gameW.game.age===Ce.two&&this.props.x%2===0&&1===this.props.y)return"discount token";return Ct.gameW.game.age!==e.age?Ce[e.age]:"?"}var t=It.getMe()||It.getCurrent(),a=It.playerIndexByIndex(1-t.index),n=It.getPlayer(a);return c.a.createElement("div",{title:JSON.stringify(e,null,2)},c.a.createElement("div",{style:{backgroundColor:Ie[e.color]}},"_"),c.a.createElement("div",null,e.name),c.a.createElement("div",null,"cost: ",e.cost.join("")," ($",It.getCardCost(e,t),"/",It.getCardCost(e,n),")"),e.message&&c.a.createElement("div",null,e.message),this.renderExtra(e),void 0!==e.upgradesFrom&&c.a.createElement("div",null,"from: ",Me[e.upgradesFrom]),void 0!==e.upgradesTo&&c.a.createElement("div",null,"to: ",Me[e.upgradesTo]))}},{key:"renderExtra",value:function(e){return c.a.createElement(c.a.Fragment,null,e.extra.resource&&c.a.createElement("div",null,"(",e.extra.resource.join(""),")"),e.extra.resourceOptions&&c.a.createElement("div",null,"(",e.extra.resourceOptions.join("/"),")"),e.extra.discount&&c.a.createElement("div",null,"d: (",e.extra.discount.join(""),")"),e.extra.points&&c.a.createElement("div",null,e.extra.points," points"),e.extra.military&&c.a.createElement("div",null,"military: ",e.extra.military),void 0!==e.extra.science&&c.a.createElement("div",null,"symbol: ",Te[e.extra.science]),void 0!==e.extra.godUpgrade&&c.a.createElement("div",null,Se[e.extra.godUpgrade]))}}]),a}(c.a.Component),et=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Structure"),Ct.gameW.game.structure&&Ct.gameW.game.structure.map((function(t,a){return c.a.createElement("div",{key:a,className:"".concat(Xe.a.structure_row," ").concat(0===a&&Xe.a.structure_first_row)},Object.entries(t).map((function(t,n){var r=Object(l.a)(t,2),o=r[0],i=r[1];return c.a.createElement(Ze,Object.assign({key:n,selectCard:e.props.selectCard,y:a,x:n,offset:o},i))})))})))}}]),a}(c.a.Component),tt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"".concat(V.a.flex," ").concat(V.a.bubble)},c.a.createElement("div",null,"Tokens:"),this.props.tokens.map((function(t,a){return c.a.createElement("div",{key:a,className:"".concat(V.a.bubble," ").concat((e.props.usedTokens||{})[a]&&V.a.grey),onClick:function(n){It.isMyTurn()&&(Ct.gameW.game.commercials||t.isGod||(n.stopPropagation(),e.props.discount(a)))}},t.isGod?Se[t.value]:e.props.playerIndex===It.myIndex()?t.value:"$")})))}}]),a}(c.a.Component),at=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"".concat(V.a.bubble," ").concat(Xe.a.nowrap)},this.props.player.wonders.map((function(t,a){return e.renderWonder(a)})))}},{key:"renderWonder",value:function(e){var t=this.props.player.wonders[e],a=Qe.wonders[t.wonderIndex],n=t.built?this.renderBuilt(a):this.renderUnbuilt(a,e);return c.a.createElement("div",{key:e,title:JSON.stringify(a,null,2)},n)}},{key:"renderBuilt",value:function(e){return c.a.createElement("div",{className:Xe.a.built_wonder},e.name)}},{key:"renderUnbuilt",value:function(e,t){var a=this;return c.a.createElement("div",{className:t===this.props.selected?V.a.grey:void 0,onClick:function(e){return a.selectSelf(t,e)}},e.name," - ",e.cost.join("")," ($",It.getWonderCost(e,this.props.player),")")}},{key:"selectSelf",value:function(e,t){t.stopPropagation(),this.props.select(e)}}]),a}(c.a.Component),nt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},this.props.sciences.map((function(e){return c.a.createElement("div",{key:e,title:e},It.enumName(e,Pe))})))}}]),a}(c.a.Component),rt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=It.arrToDict(this.props.cards.map((function(e){return Qe.cards[e]})),(function(e){return e.color.toString()}));return Object.entries(t).map((function(t){var a=Object(l.a)(t,2),n=a[0],r=a[1];return c.a.createElement("div",{key:n,className:V.a.bubble},c.a.createElement("div",{style:{backgroundColor:Ie[parseInt(n)]}},"_"),e.renderColorCards(parseInt(n),r))}))}},{key:"renderColorCards",value:function(e,t){var a=function(){return""};switch(e){case Ie.brown:case Ie.grey:a=function(e){return e.extra.resource.join("")};break;case Ie.yellow:a=function(e){return[e.extra.discount&&"d: ".concat(e.extra.discount.join("")),e.extra.resourceOptions&&"o: ".concat(e.extra.resourceOptions.join("/"))].filter(Boolean).join(" - ")};break;case Ie.red:a=function(e){return e.extra.military.toLocaleString()};break;case Ie.blue:a=function(e){return e.extra.points.toLocaleString()};break;case Ie.green:a=function(e){return[Te[e.extra.science],e.extra.points].filter(Boolean).join(" + ")}}return t.map((function(e){return c.a.createElement("pre",{key:e.name,title:JSON.stringify(e,null,2)},[e.name,a(e),e.message,void 0!==e.upgradesTo&&Me[e.upgradesTo]].filter(Boolean).join(" - "))}))}}]),a}(c.a.Component),ot=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble,onClick:this.f.bind(this)},this.text())}},{key:"text",value:function(){var e=this.props.god.name;return"astarte"===e?"".concat(e,": ").concat(Ct.gameW.game.astarte||0):e}},{key:"f",value:function(e){"astarte"===this.props.god.name&&It.isMyTurn()&&Ct.gameW.game.astarte&&(Ct.gameW.game.astarte--,It.getMe().money++,Ct.update("used Astarte"),e.stopPropagation())}}]),a}(c.a.Component),ct=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("div",{className:"".concat(V.a.bubble," ").concat(-1===this.props.selected&&V.a.grey),onClick:function(){return e.props.selectWonder(-1)}},c.a.createElement("h2",null,this.props.player.userName," - $",this.props.player.money," -"," ",It.getScore(this.props.player)),c.a.createElement("div",{className:V.a.flex},this.props.player.wonders&&c.a.createElement(at,{player:this.props.player,select:this.props.selectWonder,selected:this.props.selected}),this.props.player.cards&&c.a.createElement(rt,{cards:this.props.player.cards})),this.props.player.scienceTokens&&c.a.createElement(nt,{sciences:this.props.player.scienceTokens}),this.props.player.tokens&&c.a.createElement(tt,{tokens:this.props.player.tokens,usedTokens:this.props.usedTokens,discount:this.props.discount,playerIndex:this.props.player.index}),c.a.createElement("div",null,(this.props.player.gods||[]).map((function(e){return Qe.gods[e]})).map((function(e,t){return c.a.createElement(ot,{god:e,key:t})})))))}}]),a}(c.a.Component),it=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Military"),c.a.createElement("div",{className:V.a.flex},Array.from(new Array(19)).map((function(t,a){return c.a.createElement("div",{key:a,className:"".concat(Xe.a.military," ").concat(V.a.bubble),onClick:function(){return e.minerva(a-9)}},c.a.createElement("div",null,e.getFill(Ct.gameW.game.military,a-9),c.a.createElement("br",null),It.getMilitaryPoints(Math.abs(a-9))))}))))}},{key:"minerva",value:function(e){It.isMyCommercial(Re.minerva)&&(Ct.gameW.game.minerva=e,It.endCommercial("placed Minerva"))}},{key:"getFill",value:function(e,t){if(t===e)return"x";var a=Ct.gameW.game.players[t>0?0:1].militaryBonuses[Math.abs(t)];return 0===a?t*(It.myIndex()-.5)>0?"LOSE":"WIN":"*".repeat(a)+(t===Ct.gameW.game.minerva?" M":"")}}]),a}(c.a.Component),st=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e,t=[V.a.bubble];return this.props.selected&&t.push(V.a.grey),c.a.createElement("div",{className:t.join(" "),onClick:this.props.select},c.a.createElement("h2",null,"Trash: ",(null===(e=Ct.gameW.game.trash)||void 0===e?void 0:e.length)||0))}}]),a}(c.a.Component),lt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;if(!It.isMyTurn())return null;var t=It.getMe().wonders.filter((function(e){return!e.built}));return t.length?Ct.gameW.game.trash?c.a.createElement("div",{className:V.a.bubble},c.a.createElement("div",null,c.a.createElement("h2",null,"Build Wonder"),c.a.createElement("div",null,t.map((function(e){return{pWonder:e,wonder:Qe.wonders[e.wonderIndex]}})).map((function(t){return c.a.createElement("div",{className:V.a.bubble,key:t.pWonder.wonderIndex,onClick:function(){if(It.isMyTurn()){if(!e.state)return alert("pick a card from trash first");Ct.gameW.game.trash.splice(e.state.trashIndex,1),t.pWonder.built=!0,Qe.wonders[t.pWonder.wonderIndex].f(),t.wonder.goAgain&&It.incrementPlayerTurn(),It.endCommercial("built ".concat(t.wonder.name))}},title:JSON.stringify(t.wonder,null,2)},t.wonder.name)}))),c.a.createElement("div",null,c.a.createElement("h2",null,"Trash Cards"),Ct.gameW.game.trash.map((function(e){return{trashIndex:e,card:Qe.cards[e]}})).map((function(t){var a;return c.a.createElement("div",{key:t.trashIndex,title:JSON.stringify(t.card,null,2),className:"".concat(V.a.bubble," ").concat((null===(a=e.state)||void 0===a?void 0:a.trashIndex)===t.trashIndex?V.a.grey:""),onClick:function(){var a;return e.setState({trashIndex:t.trashIndex===(null===(a=e.state)||void 0===a?void 0:a.trashIndex)?-1:t.trashIndex})}},c.a.createElement("div",{style:{backgroundColor:Ie[t.card.color]}},"_"),t.card.name)}))))):(It.endCommercial("no cards in trash"),null):(It.endCommercial("no wonders to build"),null)}}]),a}(c.a.Component),ut=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e,t=null===(e=Ct.gameW.game.wondersToChoose)||void 0===e?void 0:e.length,a=t>4?t-4:t;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Wonders"),c.a.createElement("div",{className:V.a.flex},Object.keys(Array.from(new Array(a))).map(this.renderWonder.bind(this))))}},{key:"renderWonder",value:function(e){var t=this,a=parseInt(e),n=Qe.wonders[Ct.gameW.game.wondersToChoose[a]];return c.a.createElement("div",{key:a,className:V.a.bubble,title:JSON.stringify(n,null,2),onClick:function(){return t.chooseWonder(a)}},c.a.createElement("p",null,n.name),c.a.createElement("p",null,n.message),c.a.createElement("div",null,"cost: ",n.cost.join("")))}},{key:"chooseWonder",value:function(e){if(It.isMyTurn()){var t=Ct.gameW.game,a=t.wondersToChoose,n=a.splice(e,1)[0];It.getMe().wonders||(It.getMe().wonders=[]),It.getMe().wonders.push({built:!1,wonderIndex:n});var r=a.length;if(r){var o=2===Math.abs(r-4)?It.currentIndex():1-It.currentIndex();It.addCommercial({commercial:t.commercials[0].commercial,playerIndex:o})}else t.age=Ce.one,It.deal(t);It.endCommercial("selected ".concat(Qe.wonders[n].name))}}}]),a}(c.a.Component),dt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=It.getPlayer(1-It.currentIndex()),a=(t.cards||[]).map((function(e,t){return{handIndex:t,cardIndex:e,card:Qe.cards[e]}})).filter((function(t){return t.card.color===e.props.color}));return a.length?c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,t.userName,"'s ",Ie[this.props.color]," Cards"),c.a.createElement("div",{className:V.a.flex},a.map((function(a){return c.a.createElement("div",{key:a.cardIndex,onClick:function(){return e.destroyCard(a.handIndex,t)},className:V.a.bubble},a.card.name)})))):(It.endCommercial("could not destroy a ".concat(Ie[this.props.color]," card")),null)}},{key:"destroyCard",value:function(e,t){if(It.isMyTurn()){var a=t.cards.splice(e,1)[0];Ct.gameW.game.trash||(Ct.gameW.game.trash=[]),Ct.gameW.game.trash.push(a),It.endCommercial("destroyed ".concat(Qe.cards[a].name))}}}]),a}(c.a.Component),mt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;if(!It.isMyTurn())return null;var t=Ct.gameW.game.trash||[];if(t)return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Discarded Cards"),c.a.createElement("div",{className:V.a.flex},t.map((function(e){return Qe.cards[e]})).map((function(t,a){return c.a.createElement("div",{title:JSON.stringify(t,null,2),onClick:function(){return e.reviveCard(a)},className:V.a.bubble},c.a.createElement("div",{style:{backgroundColor:Ie[t.color]}},"_"),t.name)}))));It.endCommercial("could not revive a card")}},{key:"reviveCard",value:function(e){if(It.isMyTurn()){var t=Ct.gameW.game.trash.splice(e,1)[0],a=It.getMe();a.cards||(a.cards=[]),a.cards.push(t);var n=Qe.cards[t];It.handleCardGain(n,!1),It.endCommercial("revived ".concat(n.name))}}}]),a}(c.a.Component),ht=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Library"),c.a.createElement("div",{className:V.a.flex},Ct.gameW.game.commercials[0].library.map((function(e){return c.a.createElement("div",{onClick:function(){return It.buildScienceToken(e)},className:V.a.bubble,key:e},It.enumName(e,Pe)," -"," ",e)}))))}}]),a}(c.a.Component),pt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Destroy Wonder"),c.a.createElement("div",{className:V.a.flex},It.getCurrent().wonders.map((function(e,t){return{wonder:e,index:t}})).filter((function(e){return!e.wonder.built})).map((function(e){return c.a.createElement("div",{key:e.index,onClick:function(){It.isMyTurn()&&(It.getMe().wonders.splice(e.index,1),It.endCommercial("destroyed ".concat(Qe.wonders[e.wonder.wonderIndex].name)))}},Qe.wonders[e.wonder.wonderIndex].name)}))))}}]),a}(c.a.Component),gt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=Ct.gameW.game.godTokens[0];return It.isMyTurn()?c.a.createElement("div",{className:V.a.bubble},c.a.createElement("div",{className:V.a.flex},Ct.gameW.game.gods[t].slice(0,2).map((function(t,a){return c.a.createElement("div",{key:a,onClick:function(){if(It.isMyTurn()){if(void 0===e.props.selectedPantheon)return alert("need to select a target first");var t=Ct.gameW.game.godTokens.shift(),n=Ct.gameW.game.gods[t].splice(a,1)[0];Ct.gameW.game.pantheon[e.props.selectedPantheon]=n;var r=It.getMe();r.tokens||(r.tokens=[]),r.tokens.push({value:t,isGod:!0}),It.endCommercial("placed a god"),e.props.reset()}},className:V.a.bubble,title:JSON.stringify(Qe.gods[t],null,2)},c.a.createElement("p",null,Qe.gods[t].name),c.a.createElement("p",null,Qe.gods[t].message))})))):c.a.createElement("div",{className:V.a.bubble},Se[t])}}]),a}(c.a.Component),ft=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=It.getMe().wonders.concat(It.getOpponent().wonders).filter((function(e){return e.built}));if(e.length)return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Unbuild Wonder"),c.a.createElement("div",{className:V.a.flex},e.map((function(e){return{wonderObj:e,wonder:Qe.wonders[e.wonderIndex]}})).map((function(e){return c.a.createElement("div",{key:e.wonderObj.wonderIndex,className:V.a.bubble,onClick:function(){It.isMyTurn()&&(e.wonderObj.built=!1,It.endCommercial("unbuilt ".concat(e.wonder.name)))}},e.wonder.name)}))));It.endCommercial("couldnt destroy a wonder")}}]),a}(c.a.Component),bt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=It.getPlayer(1-It.currentIndex()).wonders.map((function(e,t){return{wonder:e,index:t}})).filter((function(e){return!e.wonder.built}));if(e.length)return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Steal Wonder"),c.a.createElement("div",{className:V.a.flex},e.map((function(e){return c.a.createElement("div",{key:e.index,className:V.a.bubble,onClick:function(){It.isMyTurn()&&(It.getOpponent().wonders.splice(e.index,1),It.getMe().wonders.push(e.wonder),It.endCommercial("stole ".concat(Qe.wonders[e.wonder.wonderIndex].name)))}},Qe.wonders[e.wonder.wonderIndex].name)}))));It.endCommercial("could not steal a wonder")}}]),a}(c.a.Component),yt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=(It.getPlayer(1-It.currentIndex()).cards||[]).filter((function(e){return Qe.cards[e].color===Ie.green}));return e.length?c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Copy Science"),c.a.createElement("div",{className:V.a.flex},e.map((function(e){return{index:e,card:Qe.cards[e]}})).map((function(e){return c.a.createElement("div",{key:e.index,onClick:function(){if(It.isMyTurn()){var t=e.card.extra.science;It.gainScience(t),It.endCommercial("copied ".concat(Te[t]))}}},Te[e.card.extra.science])})))):(It.isMyTurn()&&It.endCommercial("no sciences to copy"),null)}}]),a}(c.a.Component),vt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Choose a Science Token"),c.a.createElement("div",{className:V.a.flex},R.gameW.game.enki.map((function(e){return c.a.createElement("div",{key:e,onClick:function(){It.buildScienceToken(e),delete R.gameW.game.enki},className:V.a.bubble},It.enumName(e,Pe)," -"," ",e)}))))}}]),a}(c.a.Component),kt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=(It.getPlayer(1-It.currentIndex()).cards||[]).map((function(e,t){return{handIndex:t,card:Qe.cards[e]}})).filter((function(e){return e.card.color===Ie.brown||e.card.color===Ie.grey}));return e.length?c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Steal a brown/grey card"),c.a.createElement("div",{className:V.a.flex},e.map((function(e,t){return c.a.createElement("div",{key:t,onClick:function(){if(It.isMyTurn()){var t=It.getMe();t.cards||(t.cards=[]);var a=It.getOpponent().cards.splice(e.handIndex,1)[0];t.cards.push(a),It.endCommercial("stole ".concat(e.card.name))}},className:V.a.bubble},e.card.name)})))):(It.endCommercial("no cards to steal"),null)}}]),a}(c.a.Component),wt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Pick a god"),c.a.createElement("div",{className:V.a.flex},Object.values(Ct.gameW.game.gods).flatMap((function(e){return e})).map((function(e){return{godIndex:e,god:Qe.gods[e]}})).map((function(e){return c.a.createElement("div",{key:e.godIndex,onClick:function(){if(It.isMyTurn()){var t=Ct.gameW.game.gods[e.god.source],a=t.indexOf(e.godIndex),n=It.getMe(),r=t.splice(a,1)[0];Qe.gods[r].f(),n.gods||(n.gods=[]),n.gods.push(r),It.endCommercial("built ".concat(e.god.name))}},className:V.a.bubble,title:JSON.stringify(e.god,null,2)},e.god.name,"enki"===e.god.name&&" - ".concat(Ct.gameW.game.enki.map((function(e){return It.enumName(e,Pe)})).join(" ")))}))))}}]),a}(c.a.Component),Ot=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Pick a top god"),c.a.createElement("div",{className:V.a.flex},Object.values(Ct.gameW.game.gods).map((function(e){return e[0]})).filter((function(e){return void 0!==e})).map((function(e){return{godIndex:e,god:Qe.gods[e]}})).map((function(e){return c.a.createElement("div",{key:e.godIndex,onClick:function(){if(It.isMyTurn()){var t=It.getMe();t.gods||(t.gods=[]);var a=Ct.gameW.game.gods[e.god.source].shift();t.gods.push(a);var n=Qe.gods[a],r=Ct.gameW.game.gods[Se.mesopotamian];r&&n.source!==Se.mesopotamian&&"enki"===Qe.gods[r[0]].name&&delete Ct.gameW.game.enki,n.f(),It.endCommercial("built ".concat(n.name))}},className:V.a.bubble,title:JSON.stringify(e.god,null,2)},e.god.name,"enki"===e.god.name&&" - ".concat(Ct.gameW.game.enki.map((function(e){return It.enumName(e,Pe)})).join(" ")))}))))}}]),a}(c.a.Component),jt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){switch(Ct.gameW.game.commercials[0].commercial){case Re.chooseWonder:return c.a.createElement(ut,null);case Re.destroyGrey:return c.a.createElement(dt,{color:Ie.grey});case Re.destroyBrown:return c.a.createElement(dt,{color:Ie.brown});case Re.revive:return c.a.createElement(mt,null);case Re.library:return c.a.createElement(ht,null);case Re.destroyWonder:return c.a.createElement(pt,null);case Re.pickGod:return c.a.createElement(gt,{reset:this.props.reset,selectedPantheon:this.props.selectedPantheon});case Re.anubis:return c.a.createElement(ft,null);case Re.ra:return c.a.createElement(bt,null);case Re.isis:return c.a.createElement(lt,null);case Re.nisaba:return c.a.createElement(yt,null);case Re.enki:return c.a.createElement(vt,null);case Re.baal:return c.a.createElement(kt,null);case Re.theater:return c.a.createElement(wt,null);case Re.gate:return c.a.createElement(Ot,null)}return null}}]),a}(c.a.Component),Et=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Pantheon"),c.a.createElement("div",{className:V.a.flex},Ct.gameW.game.pantheon.map(this.renderGod.bind(this))))}},{key:"renderGod",value:function(e,t){var a=this,n=3+(0===It.myIndex()?5-t:t),r=[V.a.bubble];return t===this.props.selectedPantheon&&r.push(V.a.grey),c.a.createElement("div",{key:t,className:r.join(" "),onClick:function(){return a.props.selectPantheon(t)}},c.a.createElement("div",null,this.godContent(e)),c.a.createElement("div",null,"$",n))}},{key:"godContent",value:function(e){if(-1===e)return null;var t=Qe.gods[e];return Ct.gameW.game.age===Ce.one?Se[t.source]:c.a.createElement("div",null,c.a.createElement("div",null,t.name),c.a.createElement("div",null,t.message),"enki"===t.name&&c.a.createElement("div",null,Ct.gameW.game.enki.map((function(e){return c.a.createElement("span",{title:e,className:V.a.bubble},It.enumName(e,Pe))}))))}}]),a}(c.a.Component);!function(e){e[e.trash=-2]="trash",e[e.build=-1]="build"}(Le||(Le={}));var xt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"onKeyDown",value:function(e){var t;switch(e){case"t":this.select(Le.trash);break;case"b":this.select(Le.build);break;default:var a=parseInt(e)-1;if(a>=((null===(t=It.getMe())||void 0===t?void 0:t.wonders)||[]).length)return;this.select(a)}}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(qe.a,{keyName:"t,b,1,2,3,4,5,6,7",onKeyDown:this.onKeyDown.bind(this)}),Ct.gameW.game.commercials&&c.a.createElement(jt,{selectedPantheon:this.state.selectedPantheon,reset:this.reset.bind(this)}),Ct.gameW.game.params.godExpansion&&c.a.createElement("div",null,c.a.createElement(Et,{selectPantheon:this.selectPantheon.bind(this),selectedPantheon:this.state.selectedPantheon})),c.a.createElement("div",null,c.a.createElement(et,Object.assign({selectCard:this.selectCard.bind(this)},this.props))),this.renderPlayers(),c.a.createElement("div",null,c.a.createElement(it,{players:this.getPlayers()})),c.a.createElement("div",null,c.a.createElement(Ue,null)),c.a.createElement(st,{select:this.selectTrash.bind(this),selected:this.state.selectedTarget===Le.trash}))}},{key:"reset",value:function(){this.setState({selectedTarget:void 0,selectedPantheon:void 0,usedTokens:void 0})}},{key:"getPlayers",value:function(){return It.myIndex()>=0?[It.getMe(),It.getOpponent()]:Ct.gameW.game.players}},{key:"renderPlayers",value:function(){var e=this.getPlayers();return c.a.createElement("div",null,c.a.createElement(ct,{player:e[0],selected:this.state.selectedTarget,usedTokens:this.state.usedTokens,selectWonder:this.select.bind(this),discount:this.discountToken.bind(this)}),c.a.createElement(ct,{player:e[1],selectWonder:function(){return null},discount:function(){return null}}))}},{key:"selectPantheon",value:function(e){if(It.isMyTurn()){var t=Ct.gameW.game.pantheon[e];if(Ct.gameW.game.age===Ce.one){if(-1!==t)return;this.state.selectedPantheon===e&&(e=-1),this.setState({selectedPantheon:e})}else It.buyGod(e,this.state.usedTokens),this.reset()}}},{key:"discountToken",value:function(e){if(It.isMyTurn()){var t=this.state.usedTokens||{};t[e]?delete t[e]:t[e]=!0,this.setState({usedTokens:t})}}},{key:"select",value:function(e){if(It.isMyTurn())return this.state.selectedTarget===e?this.reset():void this.setState({selectedTarget:e})}},{key:"selectTrash",value:function(){this.select(Le.trash)}},{key:"selectCard",value:function(e,t){var a=It.selectCard(e,t,this.state.selectedTarget);a&&(this.reset(),Ct.update(a))}}]),a}(c.a.Component),Wt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e,n;Object(m.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=t.call.apply(t,[this].concat(o))).tokenToPoints=(e={},Object(He.a)(e,Pe.agriculture,(function(){return 4})),Object(He.a)(e,Pe.mathematics,(function(e){return 3*(e.scienceTokens||[]).length})),Object(He.a)(e,Pe.mysticism,(function(e){return 2*(e.tokens||[]).length})),Object(He.a)(e,Pe.philosophy,(function(){return 7})),e),n}return Object(h.a)(a,[{key:"getMilitaryPoints",value:function(e){return e<=0?0:e<=2?2:e<=5?5:10}},{key:"currentIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||Ct.gameW.game;return t&&t.commercials?t.commercials[0].playerIndex:Object(ye.a)(Object(be.a)(a.prototype),"currentIndex",this).call(this,e)}},{key:"endCommercial",value:function(e){Nt.isMyTurn()&&(Ct.gameW.game.commercials.shift(),Ct.update(e))}},{key:"getOpponent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this.getPlayer(1-this.myIndex(e))}},{key:"deal",value:function(e){var t,a=Nt.shuffle(Qe.cards.map((function(e,t){return{card:e,index:t}})).filter((function(t){return t.card.age===e.age})).map((function(e){return e.index}))).splice(0,20);if(e.age===Ce.two&&e.params.godExpansion&&Nt.assignGate(e),e.age===Ce.three){a.splice(0,3);var n=e.params.godExpansion?Ce.temple:Ce.guild,r=Qe.cards.map((function(e,t){return{card:e,index:t}})).filter((function(e){return e.card.age===n})).map((function(e){return e.index}));a.push.apply(a,Object(Be.a)(r.splice(0,3))),Nt.shuffle(a)}e.structure=Qe.structure[e.age].map((function(e,t){return e.map((function(e){return{offset:e,cardIndex:a.pop(),revealed:t%2===0,taken:!1}}))}));var o=Nt.getMe(),c=Nt.getMilitary(o);t=c>0?Nt.getOpponent().index:c<0?o.index:1-e.wentFirst,e.currentPlayer=e.wentFirst=t}},{key:"assignGate",value:function(e){for(var t=0;t<e.pantheon.length;t++){var a;-1===e.pantheon[t]?e.pantheon[t]=Qe.gods.map((function(e,t){return{god:e,godIndex:t}})).find((function(e){return void 0===e.god.source})).godIndex:"enki"===(null===(a=Qe.gods[e.pantheon[t]])||void 0===a?void 0:a.name)&&Nt.assignEnki()}}},{key:"assignEnki",value:function(){Ct.gameW.game.enki=Nt.shuffle(Ct.gameW.game.sciences.slice(5).filter((function(e){return!e.taken}))).slice(0,2).map((function(e){return e.token}))}},{key:"getCostCost",value:function(e,t){var a=t.cards||[],n=Nt.countResources(e),r=Nt.countResources(a.flatMap((function(e){return Qe.cards[e].extra.resource||[]}))),o=Nt.countResources((Nt.getPlayer(1-t.index).cards||[]).flatMap((function(e){return Qe.cards[e].extra.resource||[]}))),c=a.flatMap((function(e){return Qe.cards[e].extra.discount||[]})),i=n[Ne.money]||0;delete n[Ne.money];var s={};return Object.keys(n).forEach((function(e){var t=e,a=n[t]-(r[t]||0);if(!(a<=0)){var l=c.includes(t)?1:2+(o[t]||0);s[t]={pricePer:l,needed:a},i+=a*l}})),a.map((function(e){return Qe.cards[e].extra.resourceOptions})).concat(this.getWonderOptions(t)).filter(Boolean).forEach((function(e){var t=0,a=null;(Object.entries(s).forEach((function(n){var r=Object(l.a)(n,2),o=r[0],c=r[1],i=o;0!==c.needed&&(null===e||void 0===e?void 0:e.includes(i))&&c.pricePer>t&&(t=c.pricePer,a=i)})),null!==a)&&(s[a].needed--,i-=t)})),i}},{key:"getWonderOptions",value:function(e){return(e.wonders||[]).filter((function(e){return e.built})).map((function(e){return Qe.wonders[e.wonderIndex]})).map((function(e){return e.resourceOptions})).filter(Boolean)}},{key:"getCardCost",value:function(e,t){if((t.cards||[]).find((function(t){return void 0!==e.upgradesFrom&&Qe.cards[t].upgradesTo===e.upgradesFrom})))return 0;if((t.scienceTokens||[]).includes(Pe.masonry)&&e.color===Ie.blue)return 0;if(e.age===Ce.temple&&(t.tokens||[]).find((function(t){return t.isGod&&t.value===e.extra.godUpgrade})))return 0;var a=Nt.getCostCost(e.cost,t);return void 0!==e.upgradesFrom&&(t.scienceTokens||[]).includes(Pe.engineering)&&a>0?1:a}},{key:"countResources",value:function(e){var t={};return e.forEach((function(e){t[e]=(t[e]||0)+1})),t}},{key:"getMilitary",value:function(e){var t=Ct.gameW.game.military;return 0===e.index?t:-t}},{key:"getScore",value:function(e){var t=(e.cards||[]).map((function(e){return Qe.cards[e].extra.points||0})).reduce((function(e,t){return e+t}),0),a=Math.floor(e.money/3),n=(e.cards||[]).map((function(e){return Qe.cards[e].extra.guild})).filter(Boolean).map((function(e){return Math.max.apply(Math,Object(Be.a)(Ct.gameW.game.players.map(e)))})).reduce((function(e,t){return e+t}),0),r=Nt.getMilitaryPoints(Nt.getMilitary(e)),o=(e.scienceTokens||[]).map((function(e){return Nt.tokenToPoints[e]})).filter(Boolean).map((function(t){return t(e)})).reduce((function(e,t){return e+t}),0),c=(e.wonders||[]).filter((function(e){return e.built})).map((function(e){return Qe.wonders[e.wonderIndex].points||0})).reduce((function(e,t){return e+t}),0),i=(e.gods||[]).map((function(e){return Qe.gods[e]})).filter((function(e){return e.points})).map((function(e){return e.points()})).reduce((function(e,t){return e+t}),0),s=(e.cards||[]).filter((function(e){return Qe.cards[e].age===Ce.temple})).length;return t+a+n+r+o+c+i+(0===s?0:1===s?5:2===s?12:21)}},{key:"stealMoney",value:function(e){Nt.getOpponent().money=Math.max(0,Nt.getOpponent().money-e)}},{key:"getWonderCost",value:function(e,t){return(t.scienceTokens||[]).includes(Pe.architecture)?0:Nt.getCostCost(e.cost,t)}},{key:"increaseMilitary",value:function(e){var t=Nt.getMe();(t.scienceTokens||[]).includes(Pe.polioretics)&&Nt.stealMoney(e);for(var a=0===Nt.myIndex()?1:-1,n=Ct.gameW.game,r=0;r<e;r++){if(n.military+=a,n.military===n.minerva)return n.military-=a,void delete n.minerva;var o=Math.abs(n.military),c=t.militaryBonuses[o];void 0!==c&&(0===c?Ct.gameW.info.alert="".concat(t.userName," wins"):delete t.militaryBonuses[o],Nt.stealMoney(c))}}},{key:"addCommercial",value:function(e){Ct.gameW.game.commercials||(Ct.gameW.game.commercials=[]),Ct.gameW.game.commercials.push(e)}},{key:"enumName",value:function(e,t){return Object.entries(t).find((function(t){var a=Object(l.a)(t,2);a[0];return a[1]===e}))[0]}},{key:"gainScience",value:function(e){var t=Nt.getMe();t.scienceIcons||(t.scienceIcons={}),t.scienceIcons[e]||(t.scienceIcons[e]=0),2===++t.scienceIcons[e]?(Ct.gameW.game.commercials||(Ct.gameW.game.commercials=[]),Ct.gameW.game.commercials.push({commercial:Re.science,playerIndex:Nt.myIndex()})):6===Object.keys(t.scienceIcons).length&&(Ct.gameW.info.alert="".concat(t.userName," wins"))}},{key:"isMyCommercial",value:function(e){var t;return!!Ct.gameW.game.commercials&&(Nt.isMyTurn()&&(null===(t=Ct.gameW.game.commercials[0])||void 0===t?void 0:t.commercial)===e)}},{key:"buyGod",value:function(e,t){var a=Ct.gameW.game.pantheon[e],n=Qe.gods[a],r=Nt.getMe(),o=3+(0===Nt.myIndex()?5-e:e);if(void 0===n.source&&(o*=2),(Nt.getMe().wonders||[]).find((function(e){return e.built&&"the sanctuary"===Qe.wonders[e.wonderIndex].name}))&&(o-=2),Object.keys(t||{}).map((function(e){return parseInt(e)})).sort((function(e,t){return t-e})).map((function(e){return r.tokens.splice(e,1)[0].value})).forEach((function(e){o=Math.max(0,o-e)})),r.money<o)return alert("cannot afford");r.money-=o,r.gods||(r.gods=[]),r.gods.push(a),n.f(),Ct.gameW.game.pantheon[e]=-1,Nt.incrementPlayerTurn(),Ct.update("purchased ".concat(n.name))}},{key:"takeToken",value:function(e,t){var a=Ct.gameW.game,n=Nt.getMe();n.tokens||(n.tokens=[]),a.age===Ce.one?t%2===0&&Nt.addCommercial({commercial:Re.pickGod,playerIndex:Nt.myIndex()}):a.age===Ce.two&&t%2===0&&1===e&&n.tokens.push({isGod:!1,value:a.discounts.pop()})}},{key:"canTakeCard",value:function(e,t,a){var n=Ct.gameW.game.structure[e+1];if(!n)return!0;var r=2*t+a;return 0===n.filter((function(e,t){return!e.taken&&1===Math.abs(e.offset+2*t-r)})).length}},{key:"handleCardGain",value:function(e,t){var a=Nt.getMe();e.extra.f&&e.extra.f();var n=a.scienceTokens||[];if(t&&void 0!==e.upgradesFrom&&(a.scienceTokens||[]).includes(Pe.urbanism)&&a.cards.filter((function(t){return Qe.cards[t].upgradesTo===e.upgradesFrom})).length&&(a.money+=4),e.extra.military){var r=e.extra.military;n.includes(Pe.strategy)&&r++,Nt.increaseMilitary(r)}void 0!==e.extra.science&&Nt.gainScience(e.extra.science)}},{key:"selectCard",value:function(e,t,a){var n;if(Nt.isMyTurn()){var r=null===(n=(Ct.gameW.game.commercials||[])[0])||void 0===n?void 0:n.commercial,o=Ct.gameW.game.structure[t][e];if(r===Re.zeus)return o.taken=!0,Ct.gameW.game.trash||(Ct.gameW.game.trash=[]),Ct.gameW.game.trash.push(o.cardIndex),void Nt.endCommercial("destroyed a card");if(r)return alert(r);if(void 0===a)return alert("need to select a target first");if(!Nt.canTakeCard(t,e,o.offset))return alert("cannot take that card");var c=Qe.cards[o.cardIndex];if(a===Le.build){var i=Nt.getCardCost(c,Nt.getMe());if(i>Nt.getMe().money)return alert("cannot afford that card");if(Nt.getMe().money-=i,(Nt.getOpponent().scienceTokens||[]).includes(Pe.economy)&&(!(Nt.getMe().scienceTokens||[]).includes(Pe.urbanism)||void 0===c.upgradesFrom)){var s=Math.max(0,i-c.cost.filter((function(e){return e===Ne.money})).length);Nt.getOpponent().money+=s}}else if(a>=0){var l=Nt.getWonderCost(Qe.wonders[Nt.getMe().wonders[a].wonderIndex],Nt.getMe());if(l>Nt.getMe().money)return alert("cannot afford that wonder");Nt.getMe().money-=l,(Nt.getOpponent().scienceTokens||[]).includes(Pe.economy)&&(Nt.getOpponent().money+=l)}o.taken=!0;var u=t-1,d=Ct.gameW.game.structure[u];d&&d.forEach((function(e,t){!e.revealed&&Nt.canTakeCard(u,t,e.offset)&&(Ct.gameW.game.params.godExpansion&&Nt.takeToken(u,t),e.revealed=!0)}));var m,h=Nt.getMe();if(a===Le.trash)m="trashed ".concat(c.name),Ct.gameW.game.trash||(Ct.gameW.game.trash=[]),Ct.gameW.game.trash.push(o.cardIndex),h.money+=2+(h.cards||[]).map((function(e){return Qe.cards[e]})).filter((function(e){return e.color===Ie.yellow})).length;else if(a===Le.build)m="built ".concat(c.name),h.cards||(h.cards=[]),h.cards.push(o.cardIndex),Nt.handleCardGain(c,!0);else{var p=Nt.getMe().wonders[a];p.built=!0;var g,f=Qe.wonders[p.wonderIndex];if(f.f(),(f.goAgain||(h.scienceTokens||[]).includes(Pe.theology))&&Nt.incrementPlayerTurn(),m="built ".concat(f.name," using ").concat(c.name),Nt.getMe().wonders.filter((function(e){return!e.built})).length+Nt.getOpponent().wonders.filter((function(e){return!e.built})).length===1)g=Nt.getMe().wonders.filter((function(e){return!e.built})).length?h.index:1-h.index,Nt.addCommercial({commercial:Re.destroyWonder,playerIndex:g})}if(Nt.incrementPlayerTurn(),!Ct.gameW.game.structure.flat().filter((function(e){return!e.taken})).length)switch(Ct.gameW.game.age){case Ce.one:Ct.gameW.game.age=Ce.two,Nt.deal(Ct.gameW.game);break;case Ce.two:Ct.gameW.game.age=Ce.three,Nt.deal(Ct.gameW.game);break;case Ce.three:Ct.gameW.info.alert="game over"}return m}}},{key:"buildScienceToken",value:function(e){if(Nt.isMyTurn()){var t=Nt.getMe();switch(t.scienceTokens||(t.scienceTokens=[]),t.scienceTokens.push(e),Ct.gameW.game.sciences.find((function(t){return t.token===e})).taken=!0,e){case Pe.agriculture:case Pe.urbanism:Nt.getMe().money+=6;break;case Pe.law:Nt.gainScience(Te.law)}Nt.endCommercial("built ".concat(Nt.enumName(e,Pe)))}}}]),a}(G),Ct=R,Nt=new Wt,It=Nt;function Tt(e){return e.military=0,e.trash=[],e.sciences=It.shuffle(Object.values(Pe)).filter((function(t){return e.params.godExpansion||t!==Pe.mysticism&&t!==Pe.polioretics&&t!==Pe.engineering})).map((function(e){return{token:e}})),e}function Mt(e){if(e.players=Object.entries(Ct.lobby).sort((function(e,t){return t[0]===Ct.me.userId?1:-1})).map((function(e,t){var a=Object(l.a)(e,2);return{userId:a[0],userName:a[1],wonders:[],money:7,military:0,index:t,militaryBonuses:{3:2,6:5,9:0}}})),2!==e.players.length)throw new Error("need 2 players");return e.wentFirst=1-It.myIndex(e),e}function St(e){return e.commercials=[{commercial:Re.chooseWonder,playerIndex:It.myIndex(e)}],e.wondersToChoose=It.shuffle(Qe.wonders.map((function(e,t){return{wonder:e,index:t}})).filter((function(t){return e.params.godExpansion||!t.wonder.expansion})).map((function(e){return e.index}))).slice(0,8),e}function _t(e){if(e.params.godExpansion){e.discounts=It.shuffle([2,3,4]),e.godTokens=It.shuffle(Object.keys(Se).concat(Object.keys(Se)).map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)})));var t={};Object.values(Se).forEach((function(e){return t[e]=Qe.gods.map((function(e,t){return{g:e,index:t}})).filter((function(t){return t.g.source===e})).map((function(e){return e.index}))})),e.gods=t,e.pantheon=Array.from(new Array(6)).map((function(){return-1}))}return e}var Pt,Rt,At,Gt,Ft=function(e){var t={};return t.params=e,Promise.resolve(t).then(Tt).then(Mt).then(St).then(_t)},Dt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).expansionRef=c.a.createRef(),e.name="7 Wonders Duel",e.NewGame=Ft,e.isMyTurn=It.isMyTurn.bind(It),e}return Object(h.a)(a,[{key:"renderStartNewGame",value:function(){return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("label",null,"God Expansion:"," ",c.a.createElement("input",{type:"checkbox",ref:this.expansionRef}))),c.a.createElement("button",{onClick:this.startNewGame.bind(this)},"New Game"))}},{key:"getParams",value:function(){return{godExpansion:this.expansionRef.current.checked,lobby:Ct.lobby}}},{key:"maybeSyncParams",value:function(){Object(ye.a)(Object(be.a)(a.prototype),"maybeSyncParams",this).call(this),Ct.gameW.info.isNewGame&&(this.expansionRef.current.checked=Ct.gameW.game.params.godExpansion)}}]),a}(ce),Bt=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(It.isMyTurn()&&V.a.my_turn)},c.a.createElement("div",{className:V.a.main},c.a.createElement(Dt,null),c.a.createElement("div",{className:V.a.content},c.a.createElement("div",null,Ct.gameW.game&&c.a.createElement(xt,null)))))}}]),a}(c.a.Component);(Gt=At||(At={}))[Gt.guard=0]="guard",Gt[Gt.priest=1]="priest",Gt[Gt.baron=2]="baron",Gt[Gt.handmaid=3]="handmaid",Gt[Gt.prince=4]="prince",Gt[Gt.king=5]="king",Gt[Gt.countess=6]="countess",Gt[Gt.princess=7]="princess",Gt[Gt.bishop=8]="bishop",Gt[Gt.queen=9]="queen",Gt[Gt.constable=10]="constable",Gt[Gt.count=11]="count",Gt[Gt.sycophant=12]="sycophant",Gt[Gt.baroness=13]="baroness",Gt[Gt.cardinal=14]="cardinal",Gt[Gt.guardX=15]="guardX",Gt[Gt.jester=16]="jester",Gt[Gt.assassin=17]="assassin";var Ht=(Pt={},Object(He.a)(Pt,At.guard,5),Object(He.a)(Pt,At.priest,2),Object(He.a)(Pt,At.baron,2),Object(He.a)(Pt,At.handmaid,2),Object(He.a)(Pt,At.prince,2),Object(He.a)(Pt,At.king,1),Object(He.a)(Pt,At.countess,1),Object(He.a)(Pt,At.princess,1),Object(He.a)(Pt,At.bishop,-1),Object(He.a)(Pt,At.queen,-1),Object(He.a)(Pt,At.constable,-1),Object(He.a)(Pt,At.count,-2),Object(He.a)(Pt,At.sycophant,-2),Object(He.a)(Pt,At.baroness,-2),Object(He.a)(Pt,At.cardinal,-2),Object(He.a)(Pt,At.guardX,-3),Object(He.a)(Pt,At.jester,-1),Object(He.a)(Pt,At.assassin,-1),Pt),zt=(Rt={},Object(He.a)(Rt,At.guard,1),Object(He.a)(Rt,At.priest,2),Object(He.a)(Rt,At.baron,3),Object(He.a)(Rt,At.handmaid,4),Object(He.a)(Rt,At.prince,5),Object(He.a)(Rt,At.king,6),Object(He.a)(Rt,At.countess,7),Object(He.a)(Rt,At.princess,8),Object(He.a)(Rt,At.bishop,9),Object(He.a)(Rt,At.queen,7),Object(He.a)(Rt,At.constable,6),Object(He.a)(Rt,At.count,5),Object(He.a)(Rt,At.sycophant,4),Object(He.a)(Rt,At.baroness,3),Object(He.a)(Rt,At.cardinal,2),Object(He.a)(Rt,At.guardX,1),Object(He.a)(Rt,At.jester,0),Object(He.a)(Rt,At.assassin,0),Rt);function Lt(e){if(e.players=Object.entries($t.lobby).sort((function(e,t){return t[0]===$t.me.userId?1:-1})).map((function(e){var t=Object(l.a)(e,2);return{userId:t[0],userName:t[1],score:0}})),e.players.length<2||e.players.length>8)throw new Error("need 2-8 players");return e.currentPlayer=Zt.myIndex(e),e}function Ut(e){return e.deck=[],Object.entries(Ht).forEach((function(t){var a=Object(l.a)(t,2),n=a[0],r=a[1];if(r<0){if(e.players.length<5)return;r=-r}for(var o=0;o<r;o++)e.deck.push(parseInt(n))})),e.aside=Zt.shuffle(e.deck).pop(),e.players.forEach((function(t){t.hand=[e.deck.pop()],delete t.played})),2===e.players.length&&(e.two_p_aside=Array.from(new Array(3)).map((function(){return e.deck.pop()}))),Zt.getCurrent(e).hand.push(e.deck.pop()),e}var qt=function(e){var t={};return t.params=e,Promise.resolve(t).then(Lt).then(Ut)},$t=R;function Vt(e){return e.hand?zt[e.hand[0]]+(e.played||[]).filter((function(e){return e===At.count})).length+(e.played||[]).map((function(e){return zt[e]})).reduce((function(e,t){return e+t}),0)/1e3:-1}var Jt,Yt,Qt,Kt,Xt=new(function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"advanceTurn",value:function(){delete $t.gameW.game.sycophant;var e=($t.gameW.game.deck||[]).pop();if(void 0!==e)for(var t=1;t<R.gameW.game.players.length;t++)if(Xt.incrementPlayerTurn(),Xt.getCurrent().hand)return void($t.gameW.game.players.filter((function(e){return e.hand})).length>1?Xt.getCurrent().hand.push(e):$t.gameW.game.played=-1);Xt.setWinner()}},{key:"setWinner",value:function(){var e,t=Array.from($t.gameW.game.players).map((function(e,t){return{player:e,index:t,value:Vt(e)}})).sort((function(e,t){return t.value-e.value}));t[0].player.hand[0]===At.bishop&&t.map((function(e){return e.player.hand})).filter(Boolean).find((function(e){return e[0]===At.princess}))&&t.shift(),t[0].value===(null===(e=t[1])||void 0===e?void 0:e.value)?$t.gameW.game.tiedPlayers=t.filter((function(e){return e.value===t[0].value})).map((function(e){return e.index})):$t.gameW.game.currentPlayer=t[0].index,$t.gameW.game.played=-1}},{key:"cardString",value:function(e){return"".concat(At[e]," (").concat(zt[e],")")}},{key:"discard",value:function(e,t){var a=e.hand[0];if(e.played||(e.played=[]),t||a===At.princess)delete e.hand,e.score+=e.played.filter((function(e){return e===At.constable})).length;else{var n=$t.gameW.game.deck?$t.gameW.game.deck.pop():$t.gameW.game.aside;e.hand=[n]}e.played.unshift(a)}}]),a}(G)),Zt=Xt,ea=(Jt={},Object(He.a)(Jt,At.guard,"Choose a player and number (other than 1). If that player has that card, they are out of the round."),Object(He.a)(Jt,At.priest,"Look at a player's hand."),Object(He.a)(Jt,At.baron,"Secretly compare hands with another player. The player with the LOWER number is knocked out"),Object(He.a)(Jt,At.handmaid,"You are immune to the effects of other players\u2019 cards until the start of your next turn."),Object(He.a)(Jt,At.prince,"Choose a player (including yourself) to discard their hand and draw a new card."),Object(He.a)(Jt,At.king,"Trade hands with another player."),Object(He.a)(Jt,At.countess,"(No effect) - you must discard if you also have the King or Prince."),Object(He.a)(Jt,At.princess,"If discarded, you lose."),Object(He.a)(Jt,At.bishop,"Choose a player and number. If player has that card, you win a token. Also, if you were correct, that player may discard their card and draw a new one. Bishop loses to the Princess at round end."),Object(He.a)(Jt,At.queen,"Secretly compare hands with another player. The player with the HIGHER number is knocked out"),Object(He.a)(Jt,At.constable,"If knocked out with this in the discard pile, you win a token."),Object(He.a)(Jt,At.count,"At round end, increases proximity to Princess by 1 for each Count in your discard pile."),Object(He.a)(Jt,At.sycophant,"When you discard the Sycophant, choose a player (including yourself). Then, as long as the next card played has an effect that chooses one or more players, it has to at least choose the player you chose with the Sycophant."),Object(He.a)(Jt,At.baroness,"Look at the hands of 2 other players."),Object(He.a)(Jt,At.cardinal,"When you discard the Cardinal, choose exactly 2 players (you may include yourself), who will switch hands. Then, once the hands are switched, you may look at one of them."),Object(He.a)(Jt,At.guardX,"Expansion guard is the same as the normal guard."),Object(He.a)(Jt,At.jester,"Choose another player. If that player wins the round, you win a token."),Object(He.a)(Jt,At.assassin,"If attacked by a guard (regardless if successful), the guard is eliminiated, and you draw a new card, discarding the assassin."),Jt),ta=(Yt={},Object(He.a)(Yt,At.guard,"\n1: Guard Odette\nCharged with seeing to the security of the royal family, Odette follows her orders with persistence and diligence\u2026 even though her mentor is said to have drowned while fleeing arrest for complicity in the Queen\u2019s treason.\n\nWhen you discard the Guard, choose a player and name a number (other than 1). If that player has that number in their hand, that player is knocked out of the round. If all other players still in the round cannot be chosen (eg. due to Handmaid or Sycophant), this card is discarded without effect."),Object(He.a)(Yt,At.priest,"\n2: Priest Tomas\nOpen, honest, and uplifting, Father Tomas always seeks out the opportunity to do good. With the arrest of the Queen, he is often seen about the palace, acting as confessor, counselor, and friend.\n\nWhen you discard the Priest, you can look at another player\u2019s hand. Do not reveal the hand to any other players."),Object(He.a)(Yt,At.baron,"\n3: Baron Talus\nThe scion of an esteemed house that has long been a close ally of the royal family, Baron Talus has a quiet and gentle demeanor that conceals a man used to being obeyed. His suggestions are often treated as if they came from the King himself.\n\nWhen you discard the Baron, choose another player still in the round. You and that player secretly compare your hands. The player with the lower number is knocked out of the round. In case of a tie, nothing happens."),Object(He.a)(Yt,At.handmaid,"\n4: Handmaid Susannah\nFew would trust a mere Handmaid with a letter of importance. Fewer still understand Susannah\u2019s cleverness, or her skilled ability at playing the foolish Handmaid. That the Queen\u2019s confidante and loyal servant escaped any attention after the Queen\u2019s arrest is a testament to her clever mind.\n\nWhen you discard the Handmaid, you are immune to the effects of other players\u2019 cards until the start of your next turn. If all players other than the player whose turn it is are protected by the Handmaid, the player must choose himor herself for a card\u2019s effects, if possible."),Object(He.a)(Yt,At.prince,"\n5: Prince Arnaud\nAs a social gadfly, Prince Arnaud was not as distressed over his mother\u2019s arrest as one would suppose. Since many women clamor for his attention, he hopes to help his sister find the same banal happiness by playing matchmaker.\n\nWhen you discard Prince Arnaud, choose one player still in the round (including yourself). That player discards his or her hand (but doesn\u2019t apply its effect, unless it is the Princess, see page 8) and draws a new one. If the deck is empty and the player cannot draw a card, that player draws the card that was removed at the start of the round. If all other players are protected by the Handmaid, you must choose yourself."),Object(He.a)(Yt,At.king,"\n6: King Arnaud IV\nThe undisputed ruler of Tempest\u2026 for the moment. Because of his role in the arrest of Queen Marianna, he does not rate as highly with Princess Annette as a father should. He hopes to work himself back into her graces.\n\nWhen you discard King Arnaud IV, trade the card in your hand with the card held by another player of your choice. You cannot trade with a player who is out of the round."),Object(He.a)(Yt,At.countess,"\n7: Countess Wilhelmina\nAlways on the prowl for a handsome man or juicy gossip, Wilhelmina\u2019s age and noble blood make her one of Princess Annette\u2019s friends. While she has great influence over the Princess, she makes herself scarce whenever the King or Prince are around. Unlike other cards, which take effect when discarded, the text on the Countess applies while she is in your hand. In fact, the only time it doesn\u2019t apply is when you discard her.\n\nIf you ever have the Countess and either the King or Prince in your hand, you must discard the Countess. You do not have to reveal the other card in your hand. Of course, you can also discard the Countess even if you do not have a royal family member in your hand. The Countess likes to play mind games...."),Object(He.a)(Yt,At.princess,"\n8: Princess Annette\nHampered only by the na\xefvet\xe9 of youth, Princess Annette is elegant, charming, and beautiful. Obviously, you want the princess to carry your letter. However, she is self-conscious about matters of the heart, and if confronted, will toss your letter in the fire and deny looking at any correspondence.\n\nIf you discard the Princess\u2014no matter how or why\u2014she has tossed your letter into the fire. You are immediately knocked out of the round. If the Princess was discarded by a card effect, any remaining effects of that card do not apply (you do not draw a card from the Prince, for example). Effects tied to being knocked out the round still apply (eg. Constable, Jester), however."),Object(He.a)(Yt,At.bishop,"\n9: Bishop Vinizio\nMeasured and calculating, Bishop Vinizio may come across as a schemer or opportunist. The truth, though, is that he cares deeply for the welfare of his congregants, and will go to great lengths to protect and help them.\n\nDiscarding the Bishop allows you to name a number and a player. If the player has that number in their hand, you get a Token of Affection. If this would give you enough Tokens to win the game, then you win immediately and the game ends. If you gained a Token of Affection from this effect, then the player whose card you effectively revealed with the Bishop may discard their card (but doesn\u2019t apply its effects, unless it is the Princess, see page 8) and draw a new one. At the end of a round, despite his impressive 9, the Princess still beats the Bishop when comparing the values of cards in players\u2019 hands. He is considered to have a value of 9 for all other game effects, however"),Object(He.a)(Yt,At.queen,"\n7: Dowager Queen Tummia\nMother to King Arnaud, the dowager Queen Mother Tummia was devastated by the arrest of her daughter-in-law, Queen Marianna. She now focuses her attention on her granddaughter, Princess Annette, in whom she sees much of the deposed Queen.\n\nWhen you discard the Dowager Queen, choose another player still in the round. You and that player secretly compare your hands. The player with the higher number is knocked out of the round. In case of a tie, nothing happens."),Object(He.a)(Yt,At.constable,"\n6: Constable Viktor\nBecause the security of the royal court ultimately rests in the hands of Constable Viktor, it was his decision to arrest the Queen for high treason. Now, as the weight of his duty bears down on him, he is determined to see no harm befall the young Princess.\n\nThe Constable is a somewhat unusual card, insofar as its effect applies not when discarded, like most cards, but when you are knocked out of the round with it in your discard pile. Should this happen, show the Constable, then claim a Token of Affection. If this would give you enough Tokens to win the game, then you win immediately and the game ends."),Object(He.a)(Yt,At.count,"\n5: Count Guntram\nAn ambitious man, the wily Count Guntram is careful to offer his support to whomever he believes is most likely to benefit his own interests in court. Once he has made his choice, though, his loyalty is certain, as he continues to work behind the scenes on his chosen patron\u2019s behalf.\n\nWhen the round ends, if it is necessary to check the number in the players\u2019 hands to determine a winner, the Count will increase that number by 1. Note that this stacks, so if you have both copies of the Count in your discard pile, the number will increase by 2. In this case, the cards with a number of 7\u2014the Countess and the Dowager Queen\u2014would beat the Princess. If increasing the number of the card in your hand with the Count would result in a tie for highest number in a player\u2019s hand, then resolve ties normally, by adding the numbers of the cards in the discard pile of each tied player and comparing the totals."),Object(He.a)(Yt,At.sycophant,"\n4: Sycophant Morris\nThe Sycophant is a true opportunist. Obsequious to the point of groveling, he will do almost anything to gain favor from more powerful and influential courtiers, then seek to use that favor to further his own standing in court.\n\nWhen you discard the Sycophant, choose a player (including yourself). Then, as long as the next card played has an effect that chooses one or more players, it has to at least choose the player you chose with the Sycophant."),Object(He.a)(Yt,At.baroness,"\n3: Baroness Fiona\nWhile Baroness Fiona is seemingly content to remain in the political shadow of her husband, Baron Talus, this is really a ruse. Fiona has a keen mind for courtly intrigue, and will take firm, albeit discrete action as she sees fit, regardless of whether it aligns with her husband\u2019s interests.\n\nWhen you discard the Baroness, you can look at the hands of either 1 or 2 other players. Do not reveal them to any other players."),Object(He.a)(Yt,At.cardinal,"\n2: Cardinal Vesper\nA devout and notoriously uncompromising man, Cardinal Vesper would see the Princess married to an \u201cappropriate\u201d suitor\u2014and as soon as possible, at that. The girl\u2019s happiness is certainly a consideration, but stabilizing the royal family and its succession in the wake of the Queen\u2019s alleged treason is what matters most.\n\nWhen you discard the Cardinal, choose exactly 2 players (you may include yourself), who will switch hands. Then, once the hands are switched, you may look at one of them without revealing it to any other players. If less than 2 players still in the round can be chosen, (eg. due to Handmaid or Sycophant), this card is discarded without effect."),Object(He.a)(Yt,At.guardX,"\n1: Guard Dougaul\nDour and uncompromising, Dougaul is every bit as committed to the security and well-being of the royal family as Odette, his fellow Guard. He has an abiding, almost fatherly fondness for the young Princess, though, and will cast a wary and searching eye on any suitor seeking her favor.\n\nWhen you discard the Guard, choose a player and name a number (other than 1). If that player has that number in their hand, that player is knocked out of the round. If all other players still in the round cannot be chosen (eg. due to Handmaid or Sycophant), this card is discarded without effect."),Object(He.a)(Yt,At.jester,"\n0: Jester Darius\nAlthough often seen in court, Jester Darius is a mere entertainer. This might seem to suggest his influence is negligible, but like many of low station who work in the royal court, Darius is largely invisible to the powerful courtiers around him. As a result, he sees and hears much more than most realize, giving him a potent sort of influence of his own.\n\nWhen you discard the Jester, choose another player\u2014ideally, the one you believe is most likely to win the round. It\u2019s helpful to place the Jester token provided in the game near the player you chose, so everyone remembers your choice. If you\u2019re correct, and your chosen player does win the round, you gain a Token of Affection. If this would give you enough Tokens to win the game, then you win immediately and the game ends."),Object(He.a)(Yt,At.assassin,"\n0: Assassin\nA shadowy and elusive figure of menace, the Assassin will work for whomever can meet his price. He is particularly adept at circumventing the Guards who protect the court, allowing him to pursue his secretive activities undisturbed\u2014whether that\u2019s delivering a suitor\u2019s letter of affection to the cloistered Princess, or conducting more sinister business...\n\nThis is a card whose effect only applies while it is in your hand. If another player chooses you when playing a Guard, then regardless of what number that player named (even 0!), when you reveal the Assassin (to all players), the Guard\u2019s player is eliminated from the round, while you are not. Of course, all other players will now know that you have the Assassin in your hand. It would be both improper and dangerous to keep consorting with such an unsavory character, so after you\u2019ve resolved the Assassin\u2019s effect, you must discard him and draw a new card. If the deck is empty and you cannot draw a card, then draw the card that was removed at the start of the round."),Yt),aa=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,c.a.createElement("a",{href:"http://alderac.com/wp-content/uploads/2017/11/Love-Letter-Premium_Rulebook.pdf"},"Rules")),c.a.createElement("div",{className:V.a.bubble},c.a.createElement("ol",null,c.a.createElement("li",null,"Draw a card."),c.a.createElement("li",null,"Pick one of your two cards to play. Its effect is activated."),c.a.createElement("li",null,"Your remaining card stays in your hand."),c.a.createElement("li",null,"The last player remaining in the round is the winner, and earns a token of affection."),c.a.createElement("li",null,"If multiple players are still in the round when the deck runs out, the player with the higher rank card in their hand wins the round."),c.a.createElement("li",null,"If there is a tie, the player with the highest sum of ranks in their discard pile is the winner of the round."),c.a.createElement("li",null,"If there is STILL a tie, nobody wins a token of affection."),c.a.createElement("li",null,"When the round is over, a new round begins, and everyone draws a new starting card."),c.a.createElement("li",null,"You need a bunch of tokens of affection to win the game."),c.a.createElement("li",null,"Each round, secretly remove one card from the deck. It is replaced at the end of the round."),c.a.createElement("li",null,"In a 2-4 player game, only use the first 8 types of card."),c.a.createElement("li",null,"In a 2 player game, remove and reveal 3 cards from the deck to expedite rounds."))),c.a.createElement("div",null,Object.values(At).map((function(e){return"number"===typeof e&&c.a.createElement("div",{key:e,title:ta[e].replace(/^\s+|\s+$/g,"")},Zt.cardString(e),": ",Math.abs(Ht[e]),c.a.createElement("p",null,ea[e]))}))))}}]),a}(c.a.Component),na=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.getCard();return c.a.createElement("div",{className:V.a.bubble,onClick:this.play.bind(this),title:ta[e]},Zt.cardString(e))}},{key:"getCard",value:function(){return Zt.getMe().hand[this.props.index]}},{key:"play",value:function(){if(Zt.isMyTurn()&&void 0===$t.gameW.game.played){var e=Zt.getMe();if(e.hand[1-this.props.index]===At.countess)switch(e.hand[this.props.index]){case At.prince:case At.king:return void alert("need to play ".concat(At[At.countess]))}var t=e.hand.splice(this.props.index,1)[0];switch(e.played||(e.played=[]),e.played.unshift(t),t){case At.princess:Zt.discard(e,!0);case At.handmaid:case At.assassin:case At.count:case At.constable:case At.countess:Zt.advanceTurn();break;default:$t.gameW.game.played=t}$t.update("played ".concat(Zt.cardString(t)))}}}]),a}(c.a.Component),ra=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=Zt.getMe();return e&&e.hand?c.a.createElement("div",null,c.a.createElement("h2",null,"Hand: ",e.hand.map(this.card))):null}},{key:"card",value:function(e,t){return c.a.createElement(na,{index:t,key:t})}}]),a}(c.a.Component),oa=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.action()}},{key:"componentDidUpdate",value:function(){this.action()}},{key:"action",value:function(){window.requestAnimationFrame(this.actionHelper.bind(this))}},{key:"actionHelper",value:function(){Zt.isMyTurn()&&($t.gameW.game.cardinal||(this.props.targets.length<2?this.props.finish("not enough targets"):2===this.props.targets.length&&this.execute(this.props.targets[0],this.props.targets[1])))}},{key:"execute",value:function(e,t){if(Zt.isMyTurn()){var a=$t.gameW.game.players;$t.gameW.game.cardinal={p1:e,p2:t};var n=[a[t].hand,a[e].hand];a[e].hand=n[0],a[t].hand=n[1],$t.update("swapped ".concat(a[e].userName," and ").concat(a[t].userName))}}},{key:"render",value:function(){return Zt.isMyTurn()?$t.gameW.game.cardinal?this.renderView():this.props.targets.length<=2?null:this.renderChoose():null}},{key:"renderView",value:function(){var e=this,t=$t.gameW.game.cardinal;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Peek at a swapped player's new hand"),c.a.createElement("div",{className:V.a.bubble,onClick:function(){return e.view(-1)}},"None"),c.a.createElement("div",{className:V.a.bubble,onClick:function(){return e.view(t.p1)}},$t.gameW.game.players[t.p1].userName),c.a.createElement("div",{className:V.a.bubble,onClick:function(){return e.view(t.p2)}},$t.gameW.game.players[t.p2].userName))}},{key:"view",value:function(e){if(delete $t.gameW.game.cardinal,e<0)this.props.finish("declined to peek");else{var t=$t.gameW.game.players[e];alert(Zt.cardString(t.hand[0])),this.props.finish("peeked at [".concat(t.userName,"]'s hand"))}}},{key:"renderChoose",value:function(){var e=this;return this.props.targets.map((function(e){return{index:e,player:$t.gameW.game.players[e]}})).map((function(t){return c.a.createElement("div",{key:t.index,onClick:function(){return e.choose(t.index)},className:"".concat(V.a.bubble," ").concat(e.state&&e.state.targetIndex===t.index&&V.a.grey)},t.player.userName)}))}},{key:"choose",value:function(e){if(this.state){var t=this.state.targetIndex;-1!==t&&(t!==e&&this.execute(t,e),e=-1)}this.setState({targetIndex:e})}}]),a}(c.a.Component),ca=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.action()}},{key:"componentDidUpdate",value:function(){this.action()}},{key:"action",value:function(){window.requestAnimationFrame(this.actionHelper.bind(this))}},{key:"actionHelper",value:function(){0===this.props.targets.length?this.props.finish("not enough targets"):this.props.targets.length<=2&&this.execute(this.props.targets[0],this.props.targets[1])}},{key:"execute",value:function(e,t){var a=$t.gameW.game.players,n=void 0===t?[e]:[e,t],r=n.map((function(e){return a[e]})).map((function(e){return"".concat(e.userName,": ").concat(Zt.cardString(e.hand[0]))})).join("\n");alert(r);var o="viewed ".concat(n.map((function(e){return a[e].userName})).join(" and "));this.props.finish(o)}},{key:"render",value:function(){var e=this;return this.props.targets.map((function(e){return{index:e,player:$t.gameW.game.players[e]}})).map((function(t){return c.a.createElement("div",{key:t.index,onClick:function(){return e.choose(t.index)},className:"".concat(V.a.bubble," ").concat(e.state&&e.state.targetIndex===t.index&&V.a.grey)},t.player.userName)}))}},{key:"choose",value:function(e){if(this.state){var t=this.state.targetIndex;-1!==t&&(t!==e&&this.execute(t,e),e=-1)}this.setState({targetIndex:e})}}]),a}(c.a.Component),ia=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).executed=!1,e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.executed=!1}}]),a}(c.a.Component),sa=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).inputRef=c.a.createRef(),e}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("form",{className:V.a.bubble,onSubmit:this.execute.bind(this)},"Choose a rank for ",this.props.player.userName,": ",c.a.createElement("br",null),c.a.createElement("input",{ref:this.inputRef}))}},{key:"execute",value:function(e){return e.preventDefault(),e.stopPropagation(),this.executeHelper(),!1}},{key:"executeHelper",value:function(){var e=this.inputRef.current.value;if(!this.executed){this.executed=!0,this.props.reset();var t=e===zt[this.props.player.hand[0]].toString(),a="guessed ".concat(e," for [").concat(this.props.player.userName,"] - ").concat(t?"correct":"incorrect");t?(Zt.getMe().score++,$t.gameW.game.bishop=Zt.myIndex(),$t.gameW.game.currentPlayer=this.props.index,$t.update(a)):this.props.finish(a)}}}]),a}(ia),la=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("div",null,"You were correctly guessed by the bishop. Would you like to discard your hand?"),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return e.execute(!0)}},"Yes"),c.a.createElement("button",{onClick:function(){return e.execute(!1)}},"No")))}},{key:"execute",value:function(e){if(!this.executed){this.executed=!0,this.props.reset();var t=Zt.getMe().hand[0];e&&Zt.discard(Zt.getMe(),!1),$t.gameW.game.currentPlayer=$t.gameW.game.bishop,delete $t.gameW.game.bishop,this.props.finish(e?"discarded ".concat(Zt.cardString(t)):"did not discard")}}}]),a}(ia),ua=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).inputRef=c.a.createRef(),e}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("form",{className:V.a.bubble,onSubmit:this.execute.bind(this)},"Choose a rank for ",this.props.player.userName,": ",c.a.createElement("br",null),c.a.createElement("input",{ref:this.inputRef}))}},{key:"execute",value:function(e){return e.preventDefault(),e.stopPropagation(),this.executeHelper(),!1}},{key:"executeHelper",value:function(){var e=this.inputRef.current.value;if("1"!==e){if(!this.executed){this.executed=!0,this.props.reset();var t=e===zt[this.props.player.hand[0]].toString();t&&Zt.discard(this.props.player,!0),this.props.finish("guessed ".concat(e," for [").concat(this.props.player.userName,"] - ").concat(t?"correct":"incorrect"))}}else alert("Cannot choose 1")}}]),a}(ia),da=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).inputRef=c.a.createRef(),e}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("form",{className:V.a.bubble,onSubmit:this.execute.bind(this)},"What do you do on your date?",c.a.createElement("br",null),c.a.createElement("input",{ref:this.inputRef}))}},{key:"execute",value:function(e){return e.preventDefault(),e.stopPropagation(),this.executeHelper(),!1}},{key:"executeHelper",value:function(){var e=this.inputRef.current.value;if(!this.executed){this.executed=!0,this.props.reset(),delete $t.gameW.game.played;var t=$t.gameW.game.players.filter((function(e){return e.hand})).map((function(e){return"".concat(e.userName,": ").concat(Zt.cardString(e.hand[0]))})).join(", "),a="{".concat(t,"} ").concat(e||"has a boring date");Ut($t.gameW.game),$t.gameW.info.alert=a,Zt.getMe().score++,$t.update(a)}}}]),a}(ia),ma=!1;!function(e){e[e.bishop=0]="bishop",e[e.bishopDiscard=1]="bishopDiscard",e[e.guard=2]="guard",e[e.winner=3]="winner"}(Kt||(Kt={}));var ha,pa,ga,fa,ba,ya,va,ka,wa,Oa,ja,Ea,xa,Wa,Ca,Na,Ia,Ta,Ma,Sa,_a,Pa,Ra,Aa,Ga,Fa,Da,Ba,Ha,za,La,Ua,qa,$a,Va,Ja,Ya,Qa,Ka,Xa,Za,en,tn,an,nn,rn,on,cn,sn,ln,un,dn,mn,hn,pn,gn,fn,bn,yn,vn,kn,wn,On,jn,En,xn,Wn,Cn,Nn,In,Tn,Mn,Sn,_n,Pn,Rn,An,Gn,Fn,Dn,Bn,Hn,zn,Ln,Un,qn,$n,Vn=(Qt={},Object(He.a)(Qt,Kt.bishop,sa),Object(He.a)(Qt,Kt.bishopDiscard,la),Object(He.a)(Qt,Kt.guard,ua),Object(He.a)(Qt,Kt.winner,da),Qt),Jn=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.action()}},{key:"componentDidUpdate",value:function(){this.action()}},{key:"action",value:function(){window.requestAnimationFrame(this.actionHelper.bind(this))}},{key:"actionHelper",value:function(){if(Zt.isMyTurn()&&void 0!==$t.gameW.game.played&&void 0===this.state.c&&!ma){switch(ma=!0,$t.gameW.game.played){case-1:var e=$t.gameW.game.jester;if(delete $t.gameW.game.jester,$t.gameW.game.tiedPlayers){var t=$t.gameW.game.tiedPlayers;delete $t.gameW.game.tiedPlayers,Ut($t.gameW.game),$t.update("no one wins because of a tie between ".concat(t.map((function(e){return $t.gameW.game.players[e].userName})).join(",")))}if(e===Zt.myIndex()){var a=$t.gameW.game.players.find((function(e){return-1!==(e.played||[]).indexOf(At.jester)}));a.score++,$t.update("wins, [".concat(a.userName,"] scores a jester"))}else this.setState({c:Kt.winner});break;case At.cardinal:case At.baroness:break;case At.bishop:if(void 0!==$t.gameW.game.bishop){this.setState({c:Kt.bishopDiscard});break}default:var n=this.getTargets();0===n.length?this.finish("no targets"):1===n.length&&this.execute(n[0])}ma=!1}}},{key:"getTargets",value:function(){return $t.gameW.game.players.map((function(e,t){return{player:e,index:t}})).filter((function(e){return e.player.hand})).filter((function(e){return(e.player.played||[])[0]!==At.handmaid})).filter((function(e){return void 0===$t.gameW.game.sycophant||e.index===$t.gameW.game.sycophant||$t.gameW.game.played===At.cardinal||$t.gameW.game.played===At.baroness})).filter((function(e){return $t.gameW.game.played===At.prince||$t.gameW.game.played===At.sycophant||$t.gameW.game.played===At.cardinal||e.player.userId!==Zt.getCurrent().userId})).map((function(e){return e.index}))}},{key:"execute",value:function(e){var t=$t.gameW.game.players[e];switch($t.gameW.game.played){case At.guardX:case At.guard:t.hand[0]===At.assassin?(Zt.discard(t,!1),Zt.discard(Zt.getMe(),!0),this.finish("was assassinated by ".concat(t.userName))):this.setState({c:Kt.guard,index:e});break;case At.priest:alert(Zt.cardString(t.hand[0])),this.finish("looked at [".concat(t.userName,"]'s hand"));break;case At.baron:var a=zt[t.hand[0]]-zt[Zt.getMe().hand[0]];if(0===a)this.finish("baron tied [".concat(t.userName,"]"));else{var n=a>0?Zt.getMe():t,r=Zt.cardString(n.hand[0]);Zt.discard(n,!0),this.finish("baron [".concat(t.userName,"] (").concat(r,")"))}break;case At.prince:var o="made [".concat(t.userName,"] discard ").concat(Zt.cardString(t.hand[0]));Zt.discard(t,!1),this.finish(o);break;case At.king:var c=Zt.getMe(),i=[t.hand,c.hand];c.hand=i[0],t.hand=i[1],this.finish("swapped with [".concat(t.userName,"]"));break;case At.jester:$t.gameW.game.jester=e,this.finish("selected ".concat(t.userName," to win"));break;case At.sycophant:this.finish(),$t.gameW.game.sycophant=e,$t.update("sycophanted ".concat(t.userName));break;case At.queen:var s=zt[t.hand[0]]-zt[Zt.getMe().hand[0]];if(0===s)this.finish("queen tied [".concat(t.userName,"]"));else{var l=s<0?Zt.getMe():t,u=Zt.cardString(l.hand[0]);Zt.discard(l,!0),this.finish("queen [".concat(t.userName,"] (").concat(u,")"))}break;case At.bishop:this.setState({c:Kt.bishop,index:e})}}},{key:"finish",value:function(e){delete $t.gameW.game.played,Zt.advanceTurn(),void 0!==e&&$t.update(e)}},{key:"reset",value:function(){this.setState({c:void 0,index:void 0})}},{key:"render",value:function(){var e=this;if(!Zt.isMyTurn()||void 0===$t.gameW.game.played)return null;if(void 0!==this.state.c){var t={c:Vn[this.state.c]};return c.a.createElement(t.c,{index:this.state.index,player:$t.gameW.game.players[this.state.index],finish:this.finish.bind(this),reset:this.reset.bind(this)})}if(void 0!==$t.gameW.game.bishop)return null;var a=this.getTargets();return $t.gameW.game.played===At.cardinal?c.a.createElement(oa,{targets:a,finish:this.finish.bind(this)}):$t.gameW.game.played===At.baroness?c.a.createElement(ca,{targets:a,finish:this.finish.bind(this)}):a.length<=1?null:a.map((function(e){return{index:e,player:$t.gameW.game.players[e]}})).map((function(t,a){return c.a.createElement("div",{key:a,className:V.a.bubble,onClick:function(){return e.execute(t.index)}},t.player.userName)}))}}]),a}(c.a.Component),Yn=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return $t.gameW.game.two_p_aside?c.a.createElement("div",null,c.a.createElement("h2",null,"Aside for two players:"),c.a.createElement("div",null,$t.gameW.game.two_p_aside.map(Zt.cardString).join(" "))):null}}]),a}(c.a.Component),Qn=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e,t=$t.gameW.info;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"[",t.playerName,"] ",t.message),c.a.createElement(Jn,null),c.a.createElement(ra,null),c.a.createElement("div",{className:V.a.flex},c.a.createElement("h2",null,"Suitors:"),$t.gameW.game.players.map((function(e,t){return c.a.createElement("div",{key:t,className:"".concat(V.a.bubble," ").concat(void 0===e.hand&&V.a.grey," ").concat($t.gameW.game.currentPlayer===t&&V.a.blue),title:e.played?e.played.map(Zt.cardString).join("\n"):"NONE"},$t.gameW.game.jester===t?"(J) ":"",e.userName," - (",e.score,")")}))),c.a.createElement("h2",null,"Deck: ",(null===(e=$t.gameW.game.deck)||void 0===e?void 0:e.length)||0),c.a.createElement(Yn,null))}}]),a}(c.a.Component),Kn=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name="Love Letter",e.NewGame=qt,e.isMyTurn=Zt.isMyTurn.bind(Zt),e}return Object(h.a)(a,[{key:"renderStartNewGame",value:function(){return c.a.createElement("div",null,c.a.createElement("button",{onClick:this.startNewGame.bind(this)},"New Game"))}},{key:"getParams",value:function(){return{lobby:$t.lobby}}}]),a}(ce),Xn=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(Zt.isMyTurn()&&V.a.my_turn)},c.a.createElement("div",{className:V.a.main},c.a.createElement(Kn,null),c.a.createElement("div",{className:V.a.content},c.a.createElement("div",null,c.a.createElement("div",null,$t.gameW.game&&c.a.createElement(Qn,null)),c.a.createElement("div",null,c.a.createElement(aa,null))))))}}]),a}(c.a.Component);!function(e){e[e.green=0]="green",e[e.blue=1]="blue",e[e.red=2]="red",e[e.white=3]="white",e[e.black=4]="black",e[e.gold=5]="gold"}($n||($n={}));var Zn,er=(ha={},Object(He.a)(ha,$n.green,"\ud83d\udfe2"),Object(He.a)(ha,$n.blue,"\ud83d\udd35"),Object(He.a)(ha,$n.red,"\ud83d\udd34"),Object(He.a)(ha,$n.white,"\u26aa"),Object(He.a)(ha,$n.black,"\u26ab"),Object(He.a)(ha,$n.gold,"\u2b50"),ha);!function(e){e[e.one=0]="one",e[e.two=1]="two",e[e.three=2]="three"}(Zn||(Zn={}));var tr=[{level:Zn.one,color:$n.black,points:0,price:(pa={},Object(He.a)(pa,$n.white,1),Object(He.a)(pa,$n.blue,1),Object(He.a)(pa,$n.green,1),Object(He.a)(pa,$n.red,1),pa)},{level:Zn.one,color:$n.black,points:0,price:(ga={},Object(He.a)(ga,$n.white,1),Object(He.a)(ga,$n.blue,2),Object(He.a)(ga,$n.green,1),Object(He.a)(ga,$n.red,1),ga)},{level:Zn.one,color:$n.black,points:0,price:(fa={},Object(He.a)(fa,$n.white,2),Object(He.a)(fa,$n.blue,2),Object(He.a)(fa,$n.red,1),fa)},{level:Zn.one,color:$n.black,points:0,price:(ba={},Object(He.a)(ba,$n.green,1),Object(He.a)(ba,$n.red,3),Object(He.a)(ba,$n.black,1),ba)},{level:Zn.one,color:$n.black,points:0,price:(ya={},Object(He.a)(ya,$n.green,2),Object(He.a)(ya,$n.red,1),ya)},{level:Zn.one,color:$n.black,points:0,price:(va={},Object(He.a)(va,$n.white,2),Object(He.a)(va,$n.green,2),va)},{level:Zn.one,color:$n.black,points:0,price:Object(He.a)({},$n.green,3)},{level:Zn.one,color:$n.black,points:1,price:Object(He.a)({},$n.blue,4)},{level:Zn.one,color:$n.blue,points:0,price:(ka={},Object(He.a)(ka,$n.white,1),Object(He.a)(ka,$n.green,1),Object(He.a)(ka,$n.red,1),Object(He.a)(ka,$n.black,1),ka)},{level:Zn.one,color:$n.blue,points:0,price:(wa={},Object(He.a)(wa,$n.white,1),Object(He.a)(wa,$n.green,1),Object(He.a)(wa,$n.red,2),Object(He.a)(wa,$n.black,1),wa)},{level:Zn.one,color:$n.blue,points:0,price:(Oa={},Object(He.a)(Oa,$n.white,1),Object(He.a)(Oa,$n.green,2),Object(He.a)(Oa,$n.red,2),Oa)},{level:Zn.one,color:$n.blue,points:0,price:(ja={},Object(He.a)(ja,$n.blue,1),Object(He.a)(ja,$n.green,3),Object(He.a)(ja,$n.red,1),ja)},{level:Zn.one,color:$n.blue,points:0,price:(Ea={},Object(He.a)(Ea,$n.white,1),Object(He.a)(Ea,$n.black,2),Ea)},{level:Zn.one,color:$n.blue,points:0,price:(xa={},Object(He.a)(xa,$n.green,2),Object(He.a)(xa,$n.black,2),xa)},{level:Zn.one,color:$n.blue,points:0,price:Object(He.a)({},$n.black,3)},{level:Zn.one,color:$n.blue,points:1,price:Object(He.a)({},$n.red,4)},{level:Zn.one,color:$n.white,points:0,price:(Wa={},Object(He.a)(Wa,$n.blue,1),Object(He.a)(Wa,$n.green,1),Object(He.a)(Wa,$n.red,1),Object(He.a)(Wa,$n.black,1),Wa)},{level:Zn.one,color:$n.white,points:0,price:(Ca={},Object(He.a)(Ca,$n.blue,1),Object(He.a)(Ca,$n.green,2),Object(He.a)(Ca,$n.red,1),Object(He.a)(Ca,$n.black,1),Ca)},{level:Zn.one,color:$n.white,points:0,price:(Na={},Object(He.a)(Na,$n.blue,2),Object(He.a)(Na,$n.green,2),Object(He.a)(Na,$n.black,1),Na)},{level:Zn.one,color:$n.white,points:0,price:(Ia={},Object(He.a)(Ia,$n.white,3),Object(He.a)(Ia,$n.blue,1),Object(He.a)(Ia,$n.black,1),Ia)},{level:Zn.one,color:$n.white,points:0,price:(Ta={},Object(He.a)(Ta,$n.red,2),Object(He.a)(Ta,$n.black,1),Ta)},{level:Zn.one,color:$n.white,points:0,price:(Ma={},Object(He.a)(Ma,$n.blue,2),Object(He.a)(Ma,$n.black,2),Ma)},{level:Zn.one,color:$n.white,points:0,price:Object(He.a)({},$n.blue,3)},{level:Zn.one,color:$n.white,points:1,price:Object(He.a)({},$n.green,4)},{level:Zn.one,color:$n.green,points:0,price:(Sa={},Object(He.a)(Sa,$n.white,1),Object(He.a)(Sa,$n.blue,1),Object(He.a)(Sa,$n.red,1),Object(He.a)(Sa,$n.black,1),Sa)},{level:Zn.one,color:$n.green,points:0,price:(_a={},Object(He.a)(_a,$n.white,1),Object(He.a)(_a,$n.blue,1),Object(He.a)(_a,$n.red,1),Object(He.a)(_a,$n.black,2),_a)},{level:Zn.one,color:$n.green,points:0,price:(Pa={},Object(He.a)(Pa,$n.blue,1),Object(He.a)(Pa,$n.red,2),Object(He.a)(Pa,$n.black,2),Pa)},{level:Zn.one,color:$n.green,points:0,price:(Ra={},Object(He.a)(Ra,$n.white,1),Object(He.a)(Ra,$n.blue,3),Object(He.a)(Ra,$n.green,1),Ra)},{level:Zn.one,color:$n.green,points:0,price:(Aa={},Object(He.a)(Aa,$n.white,2),Object(He.a)(Aa,$n.blue,1),Aa)},{level:Zn.one,color:$n.green,points:0,price:(Ga={},Object(He.a)(Ga,$n.blue,2),Object(He.a)(Ga,$n.red,2),Ga)},{level:Zn.one,color:$n.green,points:0,price:Object(He.a)({},$n.red,3)},{level:Zn.one,color:$n.green,points:1,price:Object(He.a)({},$n.black,4)},{level:Zn.one,color:$n.red,points:0,price:(Fa={},Object(He.a)(Fa,$n.white,1),Object(He.a)(Fa,$n.blue,1),Object(He.a)(Fa,$n.green,1),Object(He.a)(Fa,$n.black,1),Fa)},{level:Zn.one,color:$n.red,points:0,price:(Da={},Object(He.a)(Da,$n.white,2),Object(He.a)(Da,$n.blue,1),Object(He.a)(Da,$n.green,1),Object(He.a)(Da,$n.black,1),Da)},{level:Zn.one,color:$n.red,points:0,price:(Ba={},Object(He.a)(Ba,$n.white,2),Object(He.a)(Ba,$n.green,1),Object(He.a)(Ba,$n.black,2),Ba)},{level:Zn.one,color:$n.red,points:0,price:(Ha={},Object(He.a)(Ha,$n.white,1),Object(He.a)(Ha,$n.red,1),Object(He.a)(Ha,$n.black,3),Ha)},{level:Zn.one,color:$n.red,points:0,price:(za={},Object(He.a)(za,$n.blue,2),Object(He.a)(za,$n.green,1),za)},{level:Zn.one,color:$n.red,points:0,price:(La={},Object(He.a)(La,$n.white,2),Object(He.a)(La,$n.red,2),La)},{level:Zn.one,color:$n.red,points:0,price:Object(He.a)({},$n.white,3)},{level:Zn.one,color:$n.red,points:1,price:Object(He.a)({},$n.white,4)},{level:Zn.two,color:$n.black,points:1,price:(Ua={},Object(He.a)(Ua,$n.white,3),Object(He.a)(Ua,$n.blue,2),Object(He.a)(Ua,$n.green,2),Ua)},{level:Zn.two,color:$n.black,points:1,price:(qa={},Object(He.a)(qa,$n.white,3),Object(He.a)(qa,$n.green,3),Object(He.a)(qa,$n.black,2),qa)},{level:Zn.two,color:$n.black,points:2,price:($a={},Object(He.a)($a,$n.blue,1),Object(He.a)($a,$n.green,4),Object(He.a)($a,$n.red,2),$a)},{level:Zn.two,color:$n.black,points:2,price:(Va={},Object(He.a)(Va,$n.green,5),Object(He.a)(Va,$n.red,3),Va)},{level:Zn.two,color:$n.black,points:2,price:Object(He.a)({},$n.white,5)},{level:Zn.two,color:$n.black,points:3,price:Object(He.a)({},$n.black,6)},{level:Zn.two,color:$n.blue,points:1,price:(Ja={},Object(He.a)(Ja,$n.blue,2),Object(He.a)(Ja,$n.green,2),Object(He.a)(Ja,$n.red,3),Ja)},{level:Zn.two,color:$n.blue,points:1,price:(Ya={},Object(He.a)(Ya,$n.blue,2),Object(He.a)(Ya,$n.green,3),Object(He.a)(Ya,$n.black,3),Ya)},{level:Zn.two,color:$n.blue,points:2,price:(Qa={},Object(He.a)(Qa,$n.white,5),Object(He.a)(Qa,$n.blue,3),Qa)},{level:Zn.two,color:$n.blue,points:2,price:(Ka={},Object(He.a)(Ka,$n.white,2),Object(He.a)(Ka,$n.red,1),Object(He.a)(Ka,$n.black,4),Ka)},{level:Zn.two,color:$n.blue,points:2,price:Object(He.a)({},$n.blue,5)},{level:Zn.two,color:$n.blue,points:3,price:Object(He.a)({},$n.blue,6)},{level:Zn.two,color:$n.white,points:1,price:(Xa={},Object(He.a)(Xa,$n.green,3),Object(He.a)(Xa,$n.red,2),Object(He.a)(Xa,$n.black,2),Xa)},{level:Zn.two,color:$n.white,points:1,price:(Za={},Object(He.a)(Za,$n.white,2),Object(He.a)(Za,$n.blue,3),Object(He.a)(Za,$n.red,3),Za)},{level:Zn.two,color:$n.white,points:2,price:(en={},Object(He.a)(en,$n.green,1),Object(He.a)(en,$n.red,4),Object(He.a)(en,$n.black,2),en)},{level:Zn.two,color:$n.white,points:2,price:(tn={},Object(He.a)(tn,$n.red,5),Object(He.a)(tn,$n.black,3),tn)},{level:Zn.two,color:$n.white,points:2,price:Object(He.a)({},$n.red,5)},{level:Zn.two,color:$n.white,points:3,price:Object(He.a)({},$n.white,6)},{level:Zn.two,color:$n.green,points:1,price:(an={},Object(He.a)(an,$n.white,3),Object(He.a)(an,$n.green,2),Object(He.a)(an,$n.red,3),an)},{level:Zn.two,color:$n.green,points:1,price:(nn={},Object(He.a)(nn,$n.white,2),Object(He.a)(nn,$n.blue,3),Object(He.a)(nn,$n.black,2),nn)},{level:Zn.two,color:$n.green,points:2,price:(rn={},Object(He.a)(rn,$n.white,4),Object(He.a)(rn,$n.blue,2),Object(He.a)(rn,$n.black,1),rn)},{level:Zn.two,color:$n.green,points:2,price:(on={},Object(He.a)(on,$n.blue,5),Object(He.a)(on,$n.green,3),on)},{level:Zn.two,color:$n.green,points:2,price:Object(He.a)({},$n.green,5)},{level:Zn.two,color:$n.green,points:3,price:Object(He.a)({},$n.green,6)},{level:Zn.two,color:$n.red,points:1,price:(cn={},Object(He.a)(cn,$n.white,2),Object(He.a)(cn,$n.red,2),Object(He.a)(cn,$n.black,3),cn)},{level:Zn.two,color:$n.red,points:1,price:(sn={},Object(He.a)(sn,$n.blue,3),Object(He.a)(sn,$n.red,2),Object(He.a)(sn,$n.black,3),sn)},{level:Zn.two,color:$n.red,points:2,price:(ln={},Object(He.a)(ln,$n.white,1),Object(He.a)(ln,$n.blue,4),Object(He.a)(ln,$n.green,2),ln)},{level:Zn.two,color:$n.red,points:2,price:(un={},Object(He.a)(un,$n.white,3),Object(He.a)(un,$n.black,5),un)},{level:Zn.two,color:$n.red,points:2,price:Object(He.a)({},$n.black,5)},{level:Zn.two,color:$n.red,points:3,price:Object(He.a)({},$n.red,6)},{level:Zn.three,color:$n.black,points:3,price:(dn={},Object(He.a)(dn,$n.white,3),Object(He.a)(dn,$n.blue,3),Object(He.a)(dn,$n.green,5),Object(He.a)(dn,$n.red,3),dn)},{level:Zn.three,color:$n.black,points:4,price:Object(He.a)({},$n.red,7)},{level:Zn.three,color:$n.black,points:4,price:(mn={},Object(He.a)(mn,$n.green,3),Object(He.a)(mn,$n.red,6),Object(He.a)(mn,$n.black,3),mn)},{level:Zn.three,color:$n.black,points:5,price:(hn={},Object(He.a)(hn,$n.red,7),Object(He.a)(hn,$n.black,3),hn)},{level:Zn.three,color:$n.blue,points:3,price:(pn={},Object(He.a)(pn,$n.white,3),Object(He.a)(pn,$n.green,3),Object(He.a)(pn,$n.red,3),Object(He.a)(pn,$n.black,5),pn)},{level:Zn.three,color:$n.blue,points:4,price:Object(He.a)({},$n.white,7)},{level:Zn.three,color:$n.blue,points:4,price:(gn={},Object(He.a)(gn,$n.white,6),Object(He.a)(gn,$n.blue,3),Object(He.a)(gn,$n.black,3),gn)},{level:Zn.three,color:$n.blue,points:5,price:(fn={},Object(He.a)(fn,$n.white,7),Object(He.a)(fn,$n.blue,3),fn)},{level:Zn.three,color:$n.white,points:3,price:(bn={},Object(He.a)(bn,$n.blue,3),Object(He.a)(bn,$n.green,3),Object(He.a)(bn,$n.red,5),Object(He.a)(bn,$n.black,3),bn)},{level:Zn.three,color:$n.white,points:4,price:Object(He.a)({},$n.black,7)},{level:Zn.three,color:$n.white,points:4,price:(yn={},Object(He.a)(yn,$n.white,3),Object(He.a)(yn,$n.red,3),Object(He.a)(yn,$n.black,6),yn)},{level:Zn.three,color:$n.white,points:5,price:(vn={},Object(He.a)(vn,$n.white,3),Object(He.a)(vn,$n.black,7),vn)},{level:Zn.three,color:$n.green,points:3,price:(kn={},Object(He.a)(kn,$n.white,5),Object(He.a)(kn,$n.blue,3),Object(He.a)(kn,$n.red,3),Object(He.a)(kn,$n.black,3),kn)},{level:Zn.three,color:$n.green,points:4,price:Object(He.a)({},$n.blue,7)},{level:Zn.three,color:$n.green,points:4,price:(wn={},Object(He.a)(wn,$n.white,3),Object(He.a)(wn,$n.blue,6),Object(He.a)(wn,$n.green,3),wn)},{level:Zn.three,color:$n.green,points:5,price:(On={},Object(He.a)(On,$n.blue,7),Object(He.a)(On,$n.green,3),On)},{level:Zn.three,color:$n.red,points:3,price:(jn={},Object(He.a)(jn,$n.white,3),Object(He.a)(jn,$n.blue,5),Object(He.a)(jn,$n.green,3),Object(He.a)(jn,$n.black,3),jn)},{level:Zn.three,color:$n.red,points:4,price:Object(He.a)({},$n.green,7)},{level:Zn.three,color:$n.red,points:4,price:(En={},Object(He.a)(En,$n.blue,3),Object(He.a)(En,$n.green,6),Object(He.a)(En,$n.red,3),En)},{level:Zn.three,color:$n.red,points:5,price:(xn={},Object(He.a)(xn,$n.green,7),Object(He.a)(xn,$n.red,3),xn)}],ar={nobles:[(Wn={},Object(He.a)(Wn,$n.green,4),Object(He.a)(Wn,$n.blue,4),Wn),(Cn={},Object(He.a)(Cn,$n.green,4),Object(He.a)(Cn,$n.red,4),Cn),(Nn={},Object(He.a)(Nn,$n.green,4),Object(He.a)(Nn,$n.white,4),Nn),(In={},Object(He.a)(In,$n.green,4),Object(He.a)(In,$n.black,4),In),(Tn={},Object(He.a)(Tn,$n.blue,4),Object(He.a)(Tn,$n.red,4),Tn),(Mn={},Object(He.a)(Mn,$n.blue,4),Object(He.a)(Mn,$n.white,4),Mn),(Sn={},Object(He.a)(Sn,$n.blue,4),Object(He.a)(Sn,$n.black,4),Sn),(_n={},Object(He.a)(_n,$n.red,4),Object(He.a)(_n,$n.white,4),_n),(Pn={},Object(He.a)(Pn,$n.red,4),Object(He.a)(Pn,$n.black,4),Pn),(Rn={},Object(He.a)(Rn,$n.white,4),Object(He.a)(Rn,$n.black,4),Rn),(An={},Object(He.a)(An,$n.green,3),Object(He.a)(An,$n.blue,3),Object(He.a)(An,$n.red,3),An),(Gn={},Object(He.a)(Gn,$n.green,3),Object(He.a)(Gn,$n.blue,3),Object(He.a)(Gn,$n.white,3),Gn),(Fn={},Object(He.a)(Fn,$n.green,3),Object(He.a)(Fn,$n.blue,3),Object(He.a)(Fn,$n.black,3),Fn),(Dn={},Object(He.a)(Dn,$n.green,3),Object(He.a)(Dn,$n.red,3),Object(He.a)(Dn,$n.white,3),Dn),(Bn={},Object(He.a)(Bn,$n.green,3),Object(He.a)(Bn,$n.red,3),Object(He.a)(Bn,$n.black,3),Bn),(Hn={},Object(He.a)(Hn,$n.green,3),Object(He.a)(Hn,$n.white,3),Object(He.a)(Hn,$n.black,3),Hn),(zn={},Object(He.a)(zn,$n.blue,3),Object(He.a)(zn,$n.red,3),Object(He.a)(zn,$n.white,3),zn),(Ln={},Object(He.a)(Ln,$n.blue,3),Object(He.a)(Ln,$n.red,3),Object(He.a)(Ln,$n.black,3),Ln),(Un={},Object(He.a)(Un,$n.blue,3),Object(He.a)(Un,$n.white,3),Object(He.a)(Un,$n.black,3),Un),(qn={},Object(He.a)(qn,$n.red,3),Object(He.a)(qn,$n.white,3),Object(He.a)(qn,$n.black,3),qn)],cards:tr},nr=R,rr=new(function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"finishTurn",value:function(e){nr.gameW.game.tooManyTokens||rr.incrementPlayerTurn(),nr.gameW.game.over&&0===nr.gameW.game.currentPlayer&&(nr.gameW.info.alert="game over"),nr.update(e)}},{key:"gainToken",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;nr.gameW.game.tokens[e]-=a;var n=rr.getMe();n.tokens||(n.tokens=[]),(t=n.tokens).push.apply(t,Object(Be.a)(Array.from(new Array(a)).map((function(t){return e})))),n.tokens.length>10&&(nr.gameW.game.tooManyTokens=!0)}},{key:"cardString",value:function(e){return"".concat(er[e.color]," - (").concat(e.points,"): ").concat(Object.entries(e.price).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return"".concat(er[parseInt(a)]," x").concat(n)})).join(" / "))}},{key:"getScore",value:function(e){return(e.cards||[]).map((function(e){return e.points})).reduce((function(e,t){return e+t}),0)+3*e.nobles}}]),a}(G)),or=rr,cr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e,t=this,a=or.getMe();return a?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Tokens (",(null===(e=a.tokens)||void 0===e?void 0:e.length)||0,")"),a.cards&&c.a.createElement("div",{className:V.a.bubble},a.cards.map((function(e){return er[e.color]})).sort()),this.mustDiscard()&&c.a.createElement("h2",null,"Must Discard"),c.a.createElement("div",{className:V.a.flex},(a.tokens||[]).map((function(e,a){return c.a.createElement("div",{key:a,onClick:function(){return t.selectToken(a)},className:"".concat(t.props.selectedTokens[a]&&V.a.grey)},er[e])}))))):null}},{key:"selectToken",value:function(e){if(this.mustDiscard()){var t=or.getMe().tokens,a=t.splice(e,1)[0];return nr.gameW.game.tokens[a]++,t.length<=10&&(delete nr.gameW.game.tooManyTokens,or.incrementPlayerTurn()),void nr.update("discarded ".concat(er[a]))}this.props.selectToken(e)}},{key:"mustDiscard",value:function(){return or.isMyTurn()&&nr.gameW.game.tooManyTokens}}]),a}(c.a.Component),ir=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Players"),c.a.createElement("div",null,nr.gameW.game.players.map((function(t,a){return c.a.createElement("div",{key:a},c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h5",{title:e.tokensString(t.tokens||[])},t.userName," -"," ",["".concat(or.getScore(t)," points"),"".concat((t.hand||[]).length," hand"),"".concat(t.nobles," nobles"),"".concat((t.cards||[]).length," cards"),"".concat((t.tokens||[]).length," tokens")].join(" / ")),c.a.createElement("div",{className:V.a.flex},or.enumArray($n).map((function(a){return e.renderCards(a,t)})))))})))))}},{key:"renderCards",value:function(e,t){var a=(t.cards||[]).filter((function(t){return t.color===e}));return 0===a.length?null:c.a.createElement("div",{className:V.a.bubble,key:e},a.map((function(e,t){return c.a.createElement("div",{key:t,title:"Level ".concat(Zn[e.level])},er[e.color]," - (",e.points,")")})))}},{key:"tokensString",value:function(e){var t={};return e.forEach((function(e){return t[e]=1+(t[e]||0)})),Object.keys(t).map((function(e){return parseInt(e)})).map((function(e){return"".concat(er[e]," x").concat(t[e])})).join(" / ")}}]),a}(c.a.Component),sr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Board"),or.enumArray(Zn).map((function(t){var a=nr.gameW.game.cards[t];return a&&c.a.createElement("div",{key:t},c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h5",{onClick:function(){or.isMyTurn()&&e.reserve(t,4)}},"Level ",Zn[t],":"," ",a.length-4),Array.from(new Array(4)).map((function(e,t){return a[t]})).filter(Boolean).map((function(a,n){return c.a.createElement("div",{key:n,onClick:function(){or.isMyTurn()&&(e.props.goldSelected?e.reserve(t,n):e.props.buyCard(t,n))}},or.cardString(a))}))))})))}},{key:"reserve",value:function(e,t){var a=or.getMe();a.hand||(a.hand=[]);if(3!==a.hand.length){this.props.selectGold(),or.gainToken($n.gold);var n=nr.gameW.game.cards[e].splice(t,1)[0];if(n){a.hand.push(n);var r=4===t?"face down":"".concat(er[n.color]," number ").concat(t+1),o="reserved a level ".concat(Zn[e]," card (").concat(r,")");or.finishTurn(o)}}else alert("Already have ".concat(3," cards"))}}]),a}(c.a.Component),lr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(V.a.bubble," ").concat(V.a.right)},c.a.createElement("h2",null,"Nobles"),(nr.gameW.game.nobles||[]).map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("div",{className:V.a.bubble},Object.entries(e).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return{token:parseInt(a),count:n}})).map((function(e){var t=e.token,a=e.count;return"".concat(er[t],": ").concat(a)})).join(" ")))})))}}]),a}(c.a.Component),ur=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Bank"),c.a.createElement("div",null,Object.keys(nr.gameW.game.tokens).map((function(e){return parseInt(e)})).map((function(t){return t!==$n.gold&&c.a.createElement("div",{onClick:function(){return e.select(t)},key:t,className:"".concat(e.isSelected(t)&&V.a.grey)},e.renderToken(t))})),c.a.createElement("button",{onClick:this.take.bind(this)},"Take"),c.a.createElement("div",{onClick:function(){return e.selectGold(!0)},className:"".concat(this.props.goldSelected&&V.a.grey)},this.renderToken($n.gold))))}},{key:"renderToken",value:function(e){return"".concat(er[e],": ").concat(nr.gameW.game.tokens[e])}},{key:"select",value:function(e){this.selectGold(!1);this.isSelected(e)||3!==Object.values(this.state).filter(Boolean).length?this.setState(Object(He.a)({},e,!this.isSelected(e))):alert("Can only select ".concat(3," tokens"))}},{key:"selectGold",value:function(e){this.props.selectGold(e),e&&this.clearSelect()}},{key:"clearSelect",value:function(){var e={};Object.keys(this.state).map((function(e){return parseInt(e)})).forEach((function(t){return e[t]=!1})),this.setState(e)}},{key:"isSelected",value:function(e){return e===$n.gold?this.props.goldSelected:this.state[e]}},{key:"take",value:function(){if(or.isMyTurn())if(this.props.goldSelected)alert("To take a gold, reserve a card.");else{var e,t,a=Object.entries(this.state).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return{token:parseInt(a),selected:n}})).filter((function(e){return e.selected})).map((function(e){return e.token}));if(1===a.length){e=2,t=6}else{if(3!==a.length)return void alert("Need to select either 1 or 3 token types.");e=1,t=1}var n=!0;a.forEach((function(e){return n=n&&nr.gameW.game.tokens[e]>=t})),n?(a.forEach((function(t){return or.gainToken(t,e)})),or.getMe().tokens.sort(),this.clearSelect(),or.finishTurn("took ".concat(a.map((function(e){return er[e]})).join(", ")))):alert("Not allowed")}}}]),a}(c.a.Component),dr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=or.getMe();return t?c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Hand"),(t.hand||[]).map((function(t,a){return c.a.createElement("div",{key:a,onClick:function(){return e.props.buyHandCard(a)}},or.cardString(t))}))):null}}]),a}(c.a.Component),mr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={goldSelected:!1,selectedTokens:{}},n}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(ur,{goldSelected:this.state.goldSelected,selectGold:this.selectGold.bind(this)}),c.a.createElement(cr,{selectedTokens:this.state.selectedTokens,selectToken:this.selectToken.bind(this)}),c.a.createElement(lr,null)),c.a.createElement("div",null,c.a.createElement(dr,{buyHandCard:this.buyHandCard.bind(this)}))),c.a.createElement("div",null,c.a.createElement(ir,null))),c.a.createElement("div",null,c.a.createElement(sr,{selectGold:this.selectGold.bind(this),goldSelected:this.state.goldSelected,buyCard:this.buyCard.bind(this)})))}},{key:"selectToken",value:function(e){var t=Object.assign(this.state.selectedTokens,Object(He.a)({},e,!this.state.selectedTokens[e]));this.setState({selectedTokens:t})}},{key:"buyCard",value:function(e,t){var a=nr.gameW.game.cards[e][t];this.buyCardHelper(a)&&(nr.gameW.game.cards[e].splice(t,1),or.finishTurn("bought a ".concat(er[a.color]," level ").concat(Zn[a.level]," card (number ").concat(t+1,")")))}},{key:"buyHandCard",value:function(e){if(or.isMyTurn()){var t=or.getMe(),a=t.hand[e];this.buyCardHelper(a)&&(t.hand.splice(e,1),or.finishTurn("bought a ".concat(er[a.color]," level ").concat(Zn[a.level]," card from hand")))}}},{key:"buyCardHelper",value:function(e){var t=this,a=Object.assign({},e.price),n=or.getMe();(n.cards||[]).forEach((function(e){return a[e.color]&&a[e.color]--}));var r=0;Object.entries(this.state.selectedTokens).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return{index:parseInt(a),selected:n}})).filter((function(e){return e.selected})).map((function(e){return e.index})).map((function(e){return n.tokens[e]})).forEach((function(e){e!==$n.gold?a[e]--:r++}));var o=0;if(Object.keys(a).map((function(e){return parseInt(e)})).forEach((function(e){var t=a[e];t<0&&(o=NaN),o+=t})),o!==r)return alert("Incorrect payment"),!1;Object.entries(this.state.selectedTokens).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return{index:parseInt(a),selected:n}})).filter((function(e){return e.selected})).map((function(e){return e.index})).sort().forEach((function(e,t){return nr.gameW.game.tokens[n.tokens.splice(e-t,1)[0]]++})),n.cards||(n.cards=[]),n.cards.push(e),n.cards.sort((function(e,a){return t.handValue(e)-t.handValue(a)}));var c={};return n.cards.forEach((function(e){c[e.color]=1+(c[e.color]||0)})),nr.gameW.game.nobles&&nr.gameW.game.nobles.map((function(e,t){return{noble:e,index:t}})).filter((function(e){return 0===Object.entries(e.noble).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return{token:parseInt(a),number:n}})).map((function(e){return(c[e.token]||0)<e.number})).filter(Boolean).length})).forEach((function(e,t){nr.gameW.game.nobles.splice(e.index-t,1),n.nobles++})),!nr.gameW.game.over&&or.getScore(n)>=15&&(nr.gameW.info.alert="This is the last round.",nr.gameW.game.over=!0),this.setState({selectedTokens:{},goldSelected:!1}),!0}},{key:"handValue",value:function(e){return parseInt("".concat(e.color).concat(e.level,".").concat(Array.from(JSON.stringify(e)).map((function(e){return e.codePointAt(0)}))))}},{key:"selectGold",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({goldSelected:e&&!this.state.goldSelected})}}]),a}(c.a.Component);function hr(e){return e.players=Object.entries(nr.lobby).sort((function(e,t){return t[0]===nr.me.userId?1:-1})).map((function(e){var t=Object(l.a)(e,2);return{userId:t[0],userName:t[1],nobles:0}})),e.currentPlayer=or.myIndex(e),e}function pr(e){return e.cards={},or.enumArray(Zn).forEach((function(t){e.cards[t]=or.shuffle(ar.cards.filter((function(e){return e.level===t})))})),e}function gr(e){return e.nobles=or.shuffle(ar.nobles).slice(0,e.players.length+1),e}function fr(e){return e.tokens={},or.enumArray($n).forEach((function(t){var a;a=t===$n.gold?5:2===e.players.length?4:3===e.players.length?5:7,e.tokens[t]=a})),e}var br,yr=function(e){var t={};return t.params=e,Promise.resolve(t).then(hr).then(pr).then(gr).then(fr)},vr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name="Splendor",e.NewGame=yr,e.isMyTurn=or.isMyTurn.bind(or),e}return Object(h.a)(a,[{key:"renderStartNewGame",value:function(){return c.a.createElement("div",null,c.a.createElement("button",{onClick:this.startNewGame.bind(this)},"New Game"))}},{key:"getParams",value:function(){return{lobby:nr.lobby}}}]),a}(ce),kr=a(38),wr=a.n(kr),Or=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(V.a.bubble," ").concat(wr.a.rules)},c.a.createElement("h2",null,c.a.createElement("a",{href:"https://cdn.1j1ju.com/medias/7f/91/ba-splendor-rulebook.pdf"},"Rules")),c.a.createElement("ol",null,c.a.createElement("li",null,"Once a player has earned 15 points, finish the round, and the player with the most points wins."),c.a.createElement("li",null,"Points are earned primarily through buying cards."),c.a.createElement("li",null,"To buy a card, pay the token cost listed. Cards that you have bought will give you a permanent discount on tokens of that card's color."),c.a.createElement("li",null,'You can see the discounts from cards that all players have earned in the "Players" bubble. Your discounts are also visible in your "Tokens" bubble.'),c.a.createElement("li",null,"You can also earn points by getting Nobles. Nobles are worth 3 points each, and are automatically earned when you have bought the cards of the listed colors."),c.a.createElement("li",null,"Tokens are used to pay for cards. To take tokens, select 3 colors from the bank. If there are 4 players, and there are at least 6 of a color in the bank, you can take 2 of that single color instead of 3 different colors. Gold stars can not be taken using this action."),c.a.createElement("li",null,"If you have more than 10 tokens at the end of your turn, you must discard some until you only have 10."),c.a.createElement("li",null,"The only way to get gold stars is to reserve a card. Click the gold star followed by the card you want to reserve. Reserving a card puts it into your hand, and only you can buy that card."),c.a.createElement("li",null,"You can also reserve a random face-down card from the deck, in the case that you don't like any revealed cards, or you don't want your opponent to know what card you want to build."),c.a.createElement("li",null,"You cannot reserve a card if you already have 3 cards in your hand. If there are no gold star tokens available, you can still reserve a card, but you won't get a gold star."),c.a.createElement("li",null,"Whenever a card is bought or reserved, a new card from that level is revealed, so that there are always 4 cards of each level available.")))}}]),a}(c.a.Component),jr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(or.isMyTurn()&&V.a.my_turn)},c.a.createElement("div",{className:V.a.main},c.a.createElement(vr,null),c.a.createElement("div",{className:V.a.content},c.a.createElement("div",null,c.a.createElement("div",{className:V.a.flex},nr.gameW.game&&c.a.createElement(mr,null)),c.a.createElement("div",null,c.a.createElement(Or,null))))))}}]),a}(c.a.Component),Er=R,xr=new(function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return a}(G)),Wr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,Er.gameW.game.players.map((function(e,t){return c.a.createElement("div",{className:"".concat(V.a.bubble," ").concat(Er.gameW.game.currentPlayer===t&&V.a.blue),key:t},c.a.createElement("h2",null,e.userName),c.a.createElement("div",null,"Points: ",e.points),c.a.createElement("div",null,"Clues: ",e.clues),c.a.createElement("div",null,"Bingos: ",e.bingos))})))}}]),a}(c.a.Component);function Cr(e){return e.players=Object.entries(Er.lobby).sort((function(e,t){return t[0]===Er.me.userId?1:-1})).map((function(e){var t=Object(l.a)(e,2);return{userId:t[0],userName:t[1],clues:0,points:0,bingos:0}})),e.currentPlayer=xr.myIndex(e),e}!function(e){e[e.easy=0]="easy",e[e.hard=1]="hard"}(br||(br={}));var Nr,Ir=function(e){var t={};return t.params=e,Promise.resolve(t).then(Cr)};function Tr(e){return e.split("\n").filter(Boolean).map((function(e){var t=e.split(",");return{a:t[0].toUpperCase(),b:t[1].toUpperCase()}}))}var Mr=(Nr={},Object(He.a)(Nr,br.easy,Tr("\nbad TV show, good TV show\ndirty, clean\nbad actor, good actor\ndangerous job, safe job\ncasual, formal\ndry, wet\nforbidden, encouraged\nhard to remember, easy to remember\nunhealthy, healthy\nhistorically important, historically irrelevant\ninflexible, flexible\nintrovert, extrovert\nbad movie, good movie\nhappens slowly, happens suddenly\nloved, hated\nfragile, durable\ngood, evil\nbad habit, good habit\nguilty pleasure, openly love\ndark, light\nhard to find, easy to find\nbad pizza topping, good pizza topping\nmature person, immature person\nmean person, nice person\nmental activity, physical activity\nneed, want\nnormal thing to own, weird thing to own\nbad person, good person\nethical to eat, unethical to eat\noptional, mandatory\nordinary, extraordinary\nlow quality, high quality\nplain, fancy\npoorly made, well made\nquiet place, loud place\ndangerous, safe\nreplaceable, irreplaceable\nhot, cold\ncolorless, colorful\nfeels bad, feels good\ncheap, expensive\nrare, common\neasy subject, hard subject\ndifficult to use, easy to use\nrole model, bad influence\nrough, smooth\npeaceful, warlike\nround, pointy\nsad movie, happy movie\nscary animal, nice animal\nshort lived, long lived\nuseless body part, useful body part\nweak, strong\nuseless invention, useful invention\nunpopular, popular\nboring, exciting\nvillain, hero\nuseless in an emergency, useful in an emergency\nwise, intelligent\nworthless, priceless\nunstable, stable\neasy to kill, hard to kill\ndivided, whole\nunderrated musician, overrated musician\neasy to spell, hard to spell\nmovie that godzilla would ruin, movie that godzilla would improve\nbad music, good music\ngryffindor, slytherin\nunforgiveable, forgiveable\nfreedom fighter, terrorist\nboring hobby, interesting hobby\nmessy food, clean food\nuncool, cool\nsport, game\nlooks like a person, doesn't look like a person\nunbelievable, believable\nbad superpower, good superpower\nartisinal, mass produced\nbetter hot, better cold\nsustenance, haute cuisine\nsnack, meal\nsmells bad, smells good\nmildly addictive, highly addictive\nbad man, good man\nhairless, hairy\nnormal pet, exotic pet\nbook was better, movie was better\nugly, beautiful\njob, career\nthe light side of the force, the dark side of the force\ngeek, dork\nworst day of the year, best day of the year\ncat person, dog person\nuntalented, talented\nunderrated actor, overrated actor\nugly man, beautiful man\ndystopia, utopia\nunderrated thing to own, overrated thing to own\naction movie, adventure movie\nuncontroversial topic, controversial topic\ndry food, wet food\nstraight, curvy\n80s, 90s\nmovie, film\nunderrated letter of the alphabet, overrated letter of the alphabet\nhard to pronounce, easy to pronounce\nunsexy animal, sexy animal\nhas a bad reputation, has a good reputation\nfantasy, sci-fi\nunderpaid, overpaid\nunderrated skill, overrated skill\nsad song, happy song\nlowbrow, highbrow\ntraditionally masculine, traditionally feminine\nrequires luck, requires skill\nbasic, hipster\nnot a sandwich, a sandwich\ncomedy, drama\nculturally significant, culturally insignificant\nworst athlete of all time, greatest athlete of all time\nnormal, weird\nlow calorie, high calorie\ninessential, essential\nunderrated weapon, overrated weapon\nunsexy emoji, sexy emoji\nunknown, famous\ntired, wired\nuseless major, useful major\nunderrated movie, overrated movie\nbad for you, good for you\nproof that God exists, proof that God doesn't exist\nwaste of time, good use of time\nmainstream, niche\nnobody does it, everybody does it\nfad, classic\ndisgusting cereal, delicious cereal\nliberal, conservative\nfriend, enemy\nsmelly in a bad way, smelly in a good way\nunderrated thing to do, overrated thing to do\nfor kids, for adults\nhard to do, easy to do\nnature, nurture\nround animal, pointy animal\nunreliable, reliable\nunpopular activity, popular activity\nvice, virtue\nunimportant, important\nuseless, useful\nunhygienic, hygienic\nharmless, harmful\nfailure, masterpiece\nunfashionable, fashionable\nunethical, ethical\nunderrated, overrated\nworst living person, greatest living person\ntastes bad, tastes good\ntemporary, permanent\ntrashy, classy\nineffective, effective\nstupid, brilliant\nsquare, round\nsoft, hard\nleast evil company, most evil company\nstar wars, star trek\nbad, good\n")),Object(He.a)(Nr,br.hard,Tr("\ntick, tock\none hit wonder, pop icon\nbad dog (breed), good dog (breed)\nheterogeneous, homogeneous\nunsceneted, scented\nnot enough, too much\ngossip, news\nlimp, firm\nscience, pseudoscience\nvapes, doesn't vape\nbenefits you, benefits everyone\netiquette, manners\ngenuine person, phony person\nsmall, tiny\nold fashioned, avant garde\nsmall number, large number\nworst era to time travel, best era to time travel\nlocal issue, global issue\nlittle known fact, well known fact\nworst year in history, best year in history\ntoo small, too big\nunsexy pokemon, sexy pokemon\nout of control, in control\nillegal, prohibited\nreligious, sacrilegious\nsmall talk, heavy topic\ncasual event, formal event\nnon-partisan, partisan\nnormal greeting, weird greeting\nillegal, legal\nbad school, good school\nnever on time, always on time\nsimilar, identical\nbad president, good president\nleast powerful god, most powerful god\nunderrated book, overrated book\nworst chore, best chore\nblue, green\nthrilling, terrifying\nexpected, unexpected\nunderrated game, overrated game\nbad advice, good advice\nart, commerce\ninclusive, exclusive\nnot huggable, huggable\nhorizontal, vertical\nhard to sit on, easy to sit on\nguilty pleasure, actually just bad\nfunny topic, serious topic\nfruit, vegetable\npowerless, powerful\nunsexy color, sexy color\nderivative, original\nunnatural, natural\nugly word, beautiful word\ntrue, false\nthe worst, the best\ntalent, skill\nstationary, mobile\nsocialist, capitalist\nshort, long\nsecret, public knowledge\nquiet, loud\npopular, elitist\nnot art, art\nmild, spicy\nbad investment, good investment\nlimited, infinite\ndog name, cat name\ndicatatorship, democracy\nbad mouthfeel, good mouthfeel\ndeep thought, shallow thought\nwon't live to 100, will live to 100\nbad disney character, good disney character\nweird, strange\nfamous, infamous\nboring person, fun person\nconventional wisdom, fringe belief\nendangered species, overpopulated species\nperson you could beat up, person who'd beat you up\nnerd, jock\nunreasonable phobia, reasonable phobia\n")),Nr),Sr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return c.a.createElement("div",null,xr.enumArray(br).map((function(t){return c.a.createElement("button",{onClick:function(){return e.draw(t)},key:t},"Draw ",br[t])})))}},{key:"draw",value:function(e){var t=xr.myIndex();if(-1!==t){Er.gameW.game.currentPlayer=t;var a=xr.shuffle(Array.from(Mr[e]))[0],n=Math.floor(101*Math.random());Er.gameW.game.cardW={difficulty:e,card:a,target:n},Er.update("drew [".concat(br[e],"]"))}}}]),a}(c.a.Component),_r=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return void 0===this.props.cardW?null:c.a.createElement("div",null,c.a.createElement("div",{className:V.a.bubble},c.a.createElement("div",null,"Level: ",br[this.props.cardW.difficulty]),c.a.createElement("div",null,this.props.cardW.card.a," -> ",this.props.cardW.card.b)))}}]),a}(c.a.Component),Pr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).clueRef=c.a.createRef(),n.answerRef=c.a.createRef(),n.state={visible:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e=Er.gameW.game.clue;if(void 0!==e)return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:V.a.bubble},"Clue: ",e),c.a.createElement("div",{className:V.a.bubble},c.a.createElement("form",{onSubmit:this.answerClue.bind(this)},"Answer: ",c.a.createElement("input",{type:"number",ref:this.answerRef}))));var t=Er.gameW.game.cardW;return void 0!==t&&xr.isMyTurn()?c.a.createElement("div",{className:V.a.bubble},c.a.createElement("div",{onClick:this.toggle.bind(this)},"Target: ",this.state.visible?t.target:"?"),c.a.createElement("form",{onSubmit:this.giveClue.bind(this)},c.a.createElement("input",{type:"text",ref:this.clueRef}))):null}},{key:"giveClue",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.clueRef.current.value;return Er.gameW.game.clue=t,this.setState({visible:!1}),Er.update("gave a clue - ".concat(t)),!1}},{key:"answerClue",value:function(e){e.preventDefault(),e.stopPropagation();var t=parseFloat(this.answerRef.current.value);if(t>=0&&t<=100){var a=Er.gameW.game.cardW.target,n=Math.abs(a-t),r=xr.getCurrent(),o=-Math.floor(.5+n/6);0===o&&r.bingos++,(o+=4)<2&&(o=0),r.clues++,r.points+=o,xr.incrementPlayerTurn(),Er.gameW.game.lastRound={cluer:r.userName,answerer:Er.lobby[Er.me.userId],answer:t,target:a,cardW:Er.gameW.game.cardW,clue:Er.gameW.game.clue,points:o},delete Er.gameW.game.cardW,delete Er.gameW.game.clue,Er.update("answered: ".concat(t," (").concat(a,")"))}else alert("Need to pick a target between 0 and 100");return!1}},{key:"toggle",value:function(){this.setState({visible:!this.state.visible})}}]),a}(c.a.Component),Rr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=Er.gameW.game.lastRound;return void 0===e?null:c.a.createElement("div",null,c.a.createElement("div",{className:V.a.bubble},c.a.createElement("h2",null,"Previous Round"),c.a.createElement(_r,{cardW:e.cardW}),c.a.createElement("div",null,e.cluer," received target ",e.target),c.a.createElement("div",null,"Clue: ",e.clue),c.a.createElement("div",null,e.answerer," answered ",e.answer),c.a.createElement("div",null,e.cluer," received ",e.points," points")))}}]),a}(c.a.Component),Ar=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(Wr,null),c.a.createElement(Sr,null),c.a.createElement(_r,{cardW:Er.gameW.game.cardW}),c.a.createElement(Pr,null),c.a.createElement(Rr,null))}}]),a}(c.a.Component),Gr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name="Wavelength",e.NewGame=Ir,e.isMyTurn=xr.isMyTurn.bind(xr),e}return Object(h.a)(a,[{key:"renderStartNewGame",value:function(){return c.a.createElement("div",null,c.a.createElement("button",{onClick:this.startNewGame.bind(this)},"New Game"))}},{key:"getParams",value:function(){return{lobby:Er.lobby}}}]),a}(ce),Fr={fox:se,timeline:De,"7wd":Bt,loveletter:Xn,splendor:jr,wavelength:function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(xr.isMyTurn()&&V.a.my_turn)},c.a.createElement("div",{className:V.a.main},c.a.createElement(Gr,null),c.a.createElement("div",{className:V.a.content},Er.gameW.game&&c.a.createElement(Ar,null))))}}]),a}(c.a.Component)},Dr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("h2",null,Object.keys(Fr).map(this.renderLink.bind(this)))}},{key:"renderLink",value:function(e){return c.a.createElement("div",{key:e,className:V.a.bubble},c.a.createElement(u.b,{to:"/".concat(e)},e.toLocaleUpperCase()))}}]),a}(c.a.Component),Br=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return"Loading..."}}]),a}(c.a.Component),Hr=a(40),zr=a.n(Hr),Lr=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).inputRef=c.a.createRef(),e}return Object(h.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"".concat(zr.a.login," ").concat(V.a.bubble)},c.a.createElement("p",null,"Welcome to ",R.me.gameName,"!"),c.a.createElement("p",null,"Enter your name to continue"),c.a.createElement("form",{onSubmit:this.setUsername.bind(this)},c.a.createElement("input",{type:"text",ref:this.inputRef})))}},{key:"setUsername",value:function(e){e.preventDefault();var t=this.inputRef.current.value;P.setUsername(t)}}]),a}(c.a.Component),Ur=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.title=this.props.gameName.toLocaleUpperCase(),P.init(this.props.roomId,this.props.gameName,this.forceUpdate.bind(this))}},{key:"render",value:function(){return R.lobby?R.lobby[R.me.userId]?R.gameW?c.a.createElement(this.props.component,null):null:c.a.createElement(Lr,null):c.a.createElement(Br,null)}}]),a}(c.a.Component);var qr=function(){return c.a.createElement(u.a,null,c.a.createElement("div",null,c.a.createElement(d.a,{exact:!0,path:"/",component:Dr}),function(){for(var e=[],t=function(){var t=Object(l.a)(n[a],2),r=t[0],o=t[1];e.push(c.a.createElement(d.a,{key:r,path:"/".concat(r,"/:roomId(\\d+)?"),render:function(e){return c.a.createElement(Ur,{component:o,gameName:r,roomId:parseInt(e.match.params.roomId)||-1})}}))},a=0,n=Object.entries(Fr);a<n.length;a++)t();return c.a.createElement(c.a.Fragment,null,e)}()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(54);s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(qr,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports={info:"app_info__C4YU0",image:"app_image__1tZgk",settings_form:"app_settings_form__uelWK",settings_input:"app_settings_input__2uaOu",settings_select:"app_settings_select__1jS9v",card:"app_card__2q0oc",target:"app_target__n2IMe",selectedCard:"app_selectedCard__o9hZ5",correct:"app_correct__BEfuw",incorrect:"app_incorrect__13cEZ",wrongTarget:"app_wrongTarget__7fKUB",board_card:"app_board_card__24D1v"}}},[[42,1,2]]]);
//# sourceMappingURL=main.e54d73c1.chunk.js.map