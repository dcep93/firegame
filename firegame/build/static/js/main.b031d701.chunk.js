(this.webpackJsonpfiregame=this.webpackJsonpfiregame||[]).push([[0],{15:function(e,t,a){e.exports={main:"app_main__3jjzv",sidebar:"app_sidebar__20SHM",content:"app_content__hgfbw",info:"app_info__2n-j1",image:"app_image__2wvIg",settings_form:"app_settings_form__5kVEC",settings_input:"app_settings_input__1BUSE",settings_select:"app_settings_select__wWaYW",card:"app_card__3VP3w",target:"app_target__e6Cac",selectedCard:"app_selectedCard__ZUTQz",correct:"app_correct__VlquI",incorrect:"app_incorrect__NwrJH"}},31:function(e,t,a){e.exports={login:"components_login__1by_G"}},35:function(e,t,a){e.exports=a(48)},48:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(29),i=a.n(c),u=a(11),s=a(32),o=a(12),m=a(1),d=a(4),p=a(3),f=a(2),h=a(20),v=a.n(h),b=(a(40),{databaseURL:"https://firegame-7eb05.firebaseio.com/"}),g=0;var y={init:function(){v.a.initializeApp(b),(n=v.a.database()).ref(".info/serverTimeOffset").once("value").then((function(e){return g=e.val()}))},now:function(){return g+Date.now()},latestChild:function(e,t){n.ref(e).limitToLast(1).on("value",(function(e){var a=e.val();t(a)}))},push:function(e,t){n.ref(e).push(t)},connect:function(e,t){n.ref(e).on("value",(function(e){var a=e.val();t(a)}))},set:function(e,t){n.ref(e).set(t)}};function E(e){y.push(x(),e)}function _(e){if(e){var t=Object.values(e)[0];if(y.now()-t.info.timestamp<72e5)return P.gameW=t,void N()}P.gameW||E({info:{playerId:P.me.userId,playerName:P.lobby[P.me.userId],message:"opened a room",host:P.me.userId,timestamp:y.now(),id:0},game:null})}function k(){y.set("".concat(S(),"/timestamp"),y.now())}function O(e){var t={};if(e)for(var a=0,n=Object.entries(e);a<n.length;a++){var r=Object(u.a)(n[a],2),l=r[0],c=r[1];y.now()-c.timestamp>3e3||(t[l]=c.username,l===P.me.userId&&I())}(function(e){if(!P.lobby)return!1;if(Object.keys(e).length!==Object.keys(P.lobby).length)return!1;for(var t=0,a=Object.entries(e);t<a.length;t++){var n=Object(u.a)(a[t],2),r=n[0],l=n[1];if(P.lobby[r]!==l)return!1}return!0})(t)||(P.lobby=t,N())}var j=!1;function I(){j||(j=!0,setInterval(k,1e3),y.latestChild(x(),_))}var w=!1;var N=function(){throw Error("this should be overwritten during init")};function C(){return"".concat(R(),"/lobby")}function S(){return"".concat(C(),"/").concat(P.me.userId)}function R(){return"".concat(P.me.gameName,"/").concat(P.me.roomId)}function x(){return"".concat(R(),"/game")}var W,T={init:function(e,t,a){if(!w){w=!0,y.init();var n=function(){localStorage.version!==z&&(localStorage.version=z,localStorage.userId="u_".concat(Math.random().toString(16).substr(2)));return localStorage.userId}(),r={roomId:e,gameName:t,VERSION:z,userId:n};P.me=r,N=a,y.connect(C(),O)}},setUsername:function(e){var t=P.me.userId,a=y.now(),n={userId:t,username:e,timestamp:a,signInTime:a};y.set("".concat(S()),n)},sendGameState:function(e,t){var a=P.gameW.info;E({game:t,info:{id:a.id+1,timestamp:y.now(),host:a.host,playerId:P.me.userId,playerName:P.lobby[P.me.userId],message:e}})}};var P=W={update:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t||W.gameW.game;T.sendGameState(e,a)}},z="v0.0.9",F=function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:"isMyTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||P.gameW.game;return t&&t.players[t.currentPlayer].userId===P.me.userId}},{key:"incrementPlayerTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||P.gameW.game;t.currentPlayer=this.playerIndexByIndex(t.currentPlayer+1,t)}},{key:"playerIndexByIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t||P.gameW.game;return e%a.players.length}},{key:"playerIndexById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=t||P.gameW.game;return a.players.map((function(e){return e.userId})).indexOf(e)}},{key:"myIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return this.playerIndexById(P.me.userId,e)}},{key:"getMe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||P.gameW.game;return t.players[this.myIndex(t)]}},{key:"getCurrent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=e||P.gameW.game;return t.players[t.currentPlayer]}},{key:"shuffle",value:function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}}}]),e}(),M=P,U=new F;function L(e){return e.currentPlayer=e.dealer,e.dealer=U.playerIndexByIndex(e.dealer+1),e.lead=null,e.deck=function(){for(var e=[],t=0;t<3;t++)for(var a=String.fromCharCode(65+t),n=1;n<=11;n++)e.push({suit:a,value:n});return U.shuffle(e),e}(),e.players=function(e){return e.players.map((function(t){return Object.assign(t,{hand:D(e),tricks:0})}))}(e),e.trump=e.deck.shift(),e}function D(e){for(var t=[],a=0;a<13;a++)t.push(e.deck.shift());return B(t),t}function B(e){e.sort((function(e,t){return H(e)-H(t)}))}function H(e){return 11*e.suit.codePointAt(0)+e.value}function q(e){return"".concat(e.suit,"/").concat(e.value||"-")}var V=function(e){var t=U.getMe(),a=t.hand[e],n=M.gameW.game,r=Boolean(n.staging);if(r)!function(e){var t=M.gameW.game;5===t.staging.value?t.deck.push(e):3===t.staging.value&&(t.trump=e)}(a),a=n.staging,n.staging=null;else if(n.lead&&!function(e,t){if(e.suit===t.suit){if(11!==t.value)return!0;if(1===e.value)return!0}for(var a=U.getMe().hand,n=0;n<a.length;n++){var r=a[n];if(r.suit===t.suit){if(11!==t.value)return!1;if(r.value>e.value)return!1}}return!0}(a,n.lead))return alert("cant play that card");if(t.hand.splice(e,1),!r){var l=function(e){var t=U.getMe().hand,a=M.gameW.game;if(5===e.value){var n=a.deck.shift(),r=q(n);return alert("you drew ".concat(r)),t.unshift(n),B(t),"draws a card"}if(3===e.value)return t.unshift(a.trump),B(t),"swaps trump";return null}(a);if(null!==l)return n.staging=a,M.update(l)}var c,i=q(a);if(!n.lead)return n.lead=a,U.incrementPlayerTurn(),M.update("lead with ".concat(i));!function(e){var t=M.gameW.game,a=t.lead;if(e.suit===a.suit)return e.value>a.value;if(9===e.value){if(9!==a.value)return a.suit!==t.trump.suit||e.value>a.value}else if(9===a.value&&e.value<a.value)return!1;return e.suit===t.trump.suit}(a)?(U.incrementPlayerTurn(),c=U.getCurrent()):c=t,c.tricks++,function(e,t){var a=U.getMe(),n=M.gameW.game;1===e.value?t!==a&&U.incrementPlayerTurn():1===n.lead.value&&t===a&&U.incrementPlayerTurn();7===e.value&&t.score++;7===n.lead.value&&t.score++}(a,c),n.previous="".concat(q(n.lead)," vs ").concat(i),n.lead=null;var u="played ".concat(i);if(0===t.hand.length){var s=n.players.map((function(e){return"".concat(e.userName,": ").concat(e.tricks)})).join(" / ");u="".concat(u," - new hand - ").concat(s),n.previous+="\n".concat(s),function(){for(var e=M.gameW.game.players,t=0;t<e.length;t++){var a=e[t];switch(a.tricks){case 0:case 1:case 2:case 3:return void(a.score+=6);case 4:return void(a.score+=1);case 5:return void(a.score+=2);case 6:return void(a.score+=3);case 7:case 8:case 9:return void(a.score+=6)}}}(),L(n)}M.update(u)},G=a(5),A=a.n(G),J=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:A.a.bubble,onClick:this.play.bind(this)},q(this.props.card))}},{key:"play",value:function(){var e=V(this.props.index);e&&M.update(e)}}]),a}(l.a.Component),Y=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=U.getMe();return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("h2",null,"Hand"),e&&e.hand.map((function(e,t){return l.a.createElement(J,{key:t,card:e,index:t})})))}}]),a}(l.a.Component),Z=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=M.gameW.game.lead||{suit:"-",value:0};return l.a.createElement("div",null,l.a.createElement("div",{className:A.a.bubble},l.a.createElement("p",null,"Trump"),l.a.createElement("p",null,q(M.gameW.game.trump))),l.a.createElement("div",{className:A.a.bubble},l.a.createElement("p",null,"Lead"),l.a.createElement("p",null,q(e))),l.a.createElement("div",{className:A.a.bubble},l.a.createElement("p",null,"Last"),l.a.createElement("p",null,M.gameW.game.previous)))}}]),a}(l.a.Component),Q=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("h2",null,"Rules"),l.a.createElement("pre",{className:A.a.bubble},l.a.createElement("div",null,l.a.createElement("span",null,"11")," ",l.a.createElement("span",null,"If lead, force either a 1 of same suit or highest card of same suit")),l.a.createElement("div",null,l.a.createElement("span",null,"9"),"  ",l.a.createElement("span",null,"Counts as trump if is only 9")),l.a.createElement("div",null,l.a.createElement("span",null,"7"),"  ",l.a.createElement("span",null,"Winner of this trick gets a point")),l.a.createElement("div",null,l.a.createElement("span",null,"5"),"  ",l.a.createElement("span",null,"Draw a card, then put a card at bottom of deck")),l.a.createElement("div",null,l.a.createElement("span",null,"3"),"  ",l.a.createElement("span",null,"May trade trump card with a card in hand")),l.a.createElement("div",null,l.a.createElement("span",null,"1"),"  ",l.a.createElement("span",null,"Lead next trick even if lose this trick"))),l.a.createElement("pre",{className:A.a.bubble},l.a.createElement("div",null,l.a.createElement("span",null,"0-3"),"  ","/",l.a.createElement("span",null,"6")," ",l.a.createElement("span",null,"Humble")),l.a.createElement("div",null,l.a.createElement("span",null,"4"),"    ","/",l.a.createElement("span",null,"1")," ",l.a.createElement("span",null,"DEFEATED")),l.a.createElement("div",null,l.a.createElement("span",null,"5"),"    ","/",l.a.createElement("span",null,"2")," ",l.a.createElement("span",null,"Defeated")),l.a.createElement("div",null,l.a.createElement("span",null,"6"),"    ","/",l.a.createElement("span",null,"3")," ",l.a.createElement("span",null,"defeated")),l.a.createElement("div",null,l.a.createElement("span",null,"7-9"),"  ","/",l.a.createElement("span",null,"6")," ",l.a.createElement("span",null,"Victory")),l.a.createElement("div",null,l.a.createElement("span",null,"10-13"),"/",l.a.createElement("span",null,"0")," ",l.a.createElement("span",null,"Greedy"))))}}]),a}(l.a.Component),K=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(Y,null),l.a.createElement("br",null),l.a.createElement(Z,null),l.a.createElement("br",null),l.a.createElement(Q,null))}}]),a}(l.a.Component);function $(e){return e.players=Object.keys(e.params.lobby).map((function(t,a){return{hand:[],tricks:0,score:0,userId:t,userName:e.params.lobby[t]}})),e}function X(e){return e.dealer=U.myIndex(),e.previous="new game",e}var ee=function(e){var t={};return t.params=e,Promise.resolve(t).then($).then(X).then(L)},te=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("h1",null,"Players"),Object.keys(M.lobby).map(this.renderPlayer.bind(this)),l.a.createElement("button",{onClick:this.startNewGame.bind(this)},"New Game"))}},{key:"renderPlayer",value:function(e){var t="";M.gameW.info.host===e&&(t+="(host) "),M.me.userId===e&&(t+="(you) ");var a=[l.a.createElement("p",{key:"name"},"".concat(t).concat(M.lobby[e]))],n=M.gameW.game.players[U.playerIndexById(e)];return n&&(a.push(l.a.createElement("p",{key:"tricks"},"tricks: ",n.tricks)),a.push(l.a.createElement("p",{key:"score"},"score: ",n.score))),l.a.createElement("div",{key:e},l.a.createElement("div",{className:A.a.bubble},a))}},{key:"startNewGame",value:function(){Promise.resolve().then(this.getParams.bind(this)).then(ee).then((function(e){return e&&M.update("started a new game",e)}))}},{key:"getParams",value:function(){return{lobby:M.lobby}}}]),a}(l.a.Component),ae=a(30),ne=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("pre",{onClick:this.revert.bind(this)},this.getMessage())}},{key:"getMessage",value:function(){var e=this.props.wrapper,t=new Date(e.info.timestamp).toLocaleTimeString();return"(".concat(e.info.id,") ").concat(t," [").concat(e.info.playerName,"] ").concat(e.info.message)}},{key:"revert",value:function(){var e=P.me.userId;if(P.gameW.info.host!==e){var t,a=Object(ae.a)(this.props.history);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.info.id===this.props.wrapper.info.id)break;if(n.info.playerId!==e)return void alert("only the host can revert")}}catch(l){a.e(l)}finally{a.f()}}var r="restored to [".concat(this.getMessage(),"]");P.update(r,this.props.wrapper.game)}}]),a}(l.a.Component),re=[],le=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={history:re},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.updateHistory()}},{key:"componentDidUpdate",value:function(){this.updateHistory()}},{key:"updateHistory",value:function(){var e=P.gameW;this.state.history[0]&&e.info.id===this.state.history[0].info.id||(this.state.history.unshift(JSON.parse(JSON.stringify(e))),this.setState({}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("h2",null,"Log"),l.a.createElement("div",{className:A.a.dont_grow},l.a.createElement("div",{className:A.a.log_entry_parent},l.a.createElement("div",{className:A.a.log_entry_child},this.state.history.map((function(t){return l.a.createElement(ne,{key:t.info.id,wrapper:t,history:e.state.history})}))))))}}]),a}(l.a.Component),ce=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return a}(le),ie=a(15),ue=a.n(ie),se=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:ue.a.sidebar},l.a.createElement(ce,null),l.a.createElement(te,null))}}]),a}(l.a.Component),oe=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=[ue.a.main];return U.isMyTurn()&&e.push(A.a.my_turn),l.a.createElement("div",null,l.a.createElement("div",{className:e.join(" ")},l.a.createElement(se,null),l.a.createElement("div",{className:ue.a.content},l.a.createElement("div",null,M.gameW.game&&l.a.createElement(K,null)))))}}]),a}(l.a.Component),me=P,de=new F;function pe(e){e.board.sort((function(e,t){return t-e}))}var fe=a(6),he=a.n(fe),ve=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("h2",null,"Hand"),this.getHand())}},{key:"getHand",value:function(){var e=de.getMe();return e?e.hand.map(this.renderCard.bind(this)):null}},{key:"renderCard",value:function(e,t){var a=this,n=me.gameW.game.terms[e],r=[A.a.bubble];return this.props.selectedIndex===t&&r.push(he.a.selectedCard),l.a.createElement("div",{key:t,className:r.join(" "),onClick:function(e){return a.selectCard(t,e)}},l.a.createElement("div",{className:he.a.info},l.a.createElement("div",{className:he.a.card},l.a.createElement("p",null,n.word)),n.image&&l.a.createElement("img",{className:he.a.image,src:n.image,alt:""})))}},{key:"selectCard",value:function(e,t){t.stopPropagation(),this.props.selectCard(e)}}]),a}(l.a.Component),be=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("h2",null,"Timeline"),this.getCardsAndTargets())}},{key:"getCardsAndTargets",value:function(){var e=this,t=[this.renderTarget(0)];return me.gameW.game.board.forEach((function(a,n){t.push(e.renderCard(a)),t.push(e.renderTarget(n+1))})),t}},{key:"renderTarget",value:function(e){var t=this;return l.a.createElement("div",{key:"t".concat(e),className:"".concat(A.a.bubble," ").concat(he.a.target),onClick:function(a){return t.selectTarget(e,a)}})}},{key:"renderCard",value:function(e){var t=me.gameW.game.terms[e],a=[A.a.bubble],n=me.gameW.game.last;return e===(null===n||void 0===n?void 0:n.termIndex)&&a.push(n.correct?he.a.correct:he.a.incorrect),l.a.createElement("div",{key:"c".concat(e),className:a.join(" ")},l.a.createElement("div",{className:he.a.info},l.a.createElement("div",{className:he.a.card},l.a.createElement("p",null,t.word),l.a.createElement("p",null,t.definition)),t.image&&l.a.createElement("img",{className:he.a.image,src:t.image,alt:""})))}},{key:"selectTarget",value:function(e,t){t.stopPropagation(),this.props.selectTarget(e)}}]),a}(l.a.Component),ge=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e;return l.a.createElement("div",null,l.a.createElement(ve,{selectedIndex:null===(e=this.state)||void 0===e?void 0:e.selectedIndex,selectCard:this.selectCard.bind(this)}),l.a.createElement(be,{selectTarget:this.selectTarget.bind(this)}))}},{key:"selectCard",value:function(e){var t;(null===(t=this.state)||void 0===t?void 0:t.selectedIndex)===e&&(e=-1),this.setState({selectedIndex:e})}},{key:"selectTarget",value:function(e){var t;if(!((null===(t=this.state)||void 0===t?void 0:t.selectedIndex)>-1))return alert("need to select a card from hand first");var a=me.gameW.game,n=a.board[e-1],r=a.board[e],l=a.players[a.currentPlayer],c=l.hand[this.state.selectedIndex],i=me.gameW.game.terms[c],u=this.isBetween(i,n,r);if(!u){var s=a.deck;s.length>0&&l.hand.push(s.pop())}a.last={correct:u,termIndex:c},a.board.push(l.hand.splice(this.state.selectedIndex,1)[0]),pe(me.gameW.game),this.setState({selectedIndex:-1});var o="played [".concat(i.word,"]: [").concat(i.definition,"] - ").concat(u?"CORRECT":"WRONG");de.incrementPlayerTurn(),me.update(o)}},{key:"isBetween",value:function(e,t,a){var n=me.gameW.game,r=parseInt(e.definition),l=n.terms[t],c=n.terms[a];return!(l&&parseInt(l.definition)>r)&&!(c&&parseInt(c.definition)<r)}}]),a}(l.a.Component),ye="https://cors-anywhere.herokuapp.com/https://quizlet.com/webapi/3.1/",Ee=ye+"sets/";var _e={fetch:function(e,t){return fetch(e+t).then((function(e){return e.json()})).then((function(e){return e.responses[0].models}))},TERMS_URL:"https://cors-anywhere.herokuapp.com/https://quizlet.com/webapi/3.1/terms?filters[isDeleted]=0&filters[setId]=",SEARCH_URL:"https://cors-anywhere.herokuapp.com/https://quizlet.com/webapi/3.1/sets/search?filters[isDeleted]=0&perPage=9&query=",FOLDER_URL:"https://cors-anywhere.herokuapp.com/https://quizlet.com/webapi/3.1/folder-sets?filters[folderId]=49189251&filters[isDeleted]=0",SET_URL:Ee};function ke(e){var t=_e.fetch(_e.SET_URL,e).then((function(e){return e.set[0]})),a=_e.fetch(_e.TERMS_URL,e).then((function(e){return e.term}));return Promise.all([t,a]).then((function(e){var t=Object(u.a)(e,2);return{set:t[0],terms:t[1]}}))}function Oe(e){return _e.fetch(_e.SEARCH_URL,e).then((function(e){return e.set[0].id})).then(ke)}function je(e){var t=e.response.terms.map((function(e){return{definition:e.definition||null,word:e.word||null,image:e._imageUrl||null}}));e.game.params.reverse&&t.reverse(),e.game.params.swap&&t.forEach((function(e){var t=[e.definition,e.word];e.word=t[0],e.definition=t[1]})),e.game.params.useRank&&t.forEach((function(e,t){e.definition=t.toString()}));var a=t.map((function(e,t){return t}));return de.shuffle(a),e.game.title=e.response.set.title,e.game.setId=e.response.set.id,e.game.terms=t,e.game.deck=a,e}function Ie(e){var t=Object.keys(e.game.params.lobby).map((function(t,a){return{index:a,userName:e.game.params.lobby[t],userId:t,hand:e.game.deck.splice(0,e.game.params.handSize)}}));return e.game.players=t,e.game.currentPlayer=de.myIndex(e.game),e}function we(e){if(e.game.board=e.game.deck.splice(0,e.game.params.boardStartingSize),e.game.board.length<1)throw Error("too few terms in that set (".concat(e.game.terms.length,")"));return pe(e.game),e}var Ne=function(e){var t=parseInt(e.quizlet)?ke:Oe,a={};return a.params=e,t(e.quizlet).then((function(e){return{response:e,game:a}})).then(je).then(Ie).then(we).then((function(e){return e.game}))},Ce=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handSizeRef=l.a.createRef(),e.boardSizeRef=l.a.createRef(),e.swapRef=l.a.createRef(),e.reverseRef=l.a.createRef(),e.useRankRef=l.a.createRef(),e.quizletRef=l.a.createRef(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.state||this.fetchFromFolder()}},{key:"render",value:function(){return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("form",{className:he.a.settings_form},l.a.createElement("div",null,l.a.createElement("span",null,"Hand Size: "),l.a.createElement("input",{className:he.a.settings_input,type:"text",defaultValue:"6",size:4,ref:this.handSizeRef})),l.a.createElement("div",null,l.a.createElement("span",null,"Board Size: "),l.a.createElement("input",{className:he.a.settings_input,type:"number",defaultValue:"6",ref:this.boardSizeRef})),l.a.createElement("div",null,l.a.createElement("label",null,"Swap: ",l.a.createElement("input",{type:"checkbox",ref:this.swapRef})),l.a.createElement("br",null),l.a.createElement("label",null,"Reverse:"," ",l.a.createElement("input",{type:"checkbox",ref:this.reverseRef})),l.a.createElement("br",null),l.a.createElement("label",null,"Use Rank:"," ",l.a.createElement("input",{type:"checkbox",ref:this.useRankRef}))),l.a.createElement("div",{className:A.a.dont_grow},l.a.createElement("select",{className:he.a.settings_select,onChange:this.selectChange.bind(this)},l.a.createElement("option",{defaultChecked:!0},"Select Set"),this.state&&this.getSets())),l.a.createElement("div",null,l.a.createElement("span",null,"Quizlet: "),l.a.createElement("input",{type:"text",size:"284065846".length+2,ref:this.quizletRef,defaultValue:"284065846"})),l.a.createElement("div",null,l.a.createElement("button",{onClick:this.startGame.bind(this)},"Start Game"))))}},{key:"getSets",value:function(){for(var e=[],t=0,a=Object.entries(this.state.setsToTitles);t<a.length;t++){var n=Object(u.a)(a[t],2),r=n[0],c=n[1];e.push(l.a.createElement("option",{key:r,value:r},c))}return e}},{key:"selectChange",value:function(e){e.preventDefault();var t=e.target.selectedIndex;if(0!==t){var a=e.target.options[t];this.quizletRef.current.value=a.value}}},{key:"fetchFromFolder",value:function(){var e=this;this.fetchFromFolderHelper().then((function(t){return e.setState({setsToTitles:t})}))}},{key:"fetchFromFolderHelper",value:function(){return localStorage.fetchedFromFolderVersion===me.me.VERSION&&localStorage.fetchedFromFolder?Promise.resolve(localStorage.fetchedFromFolder).then(JSON.parse):_e.fetch(_e.FOLDER_URL,"").then(this.seedFromFolder.bind(this)).then((function(e){return localStorage.fetchedFromFolder=JSON.stringify(e),localStorage.fetchedFromFolderVersion=me.me.VERSION,e}))}},{key:"seedFromFolder",value:function(e){var t=e.folderSet.map((function(e){return _e.fetch(_e.SET_URL,e.setId.toString())}));return Promise.all(t).then((function(e){return e.map((function(e){var t=e.set[0];return{id:t.id,title:t.title}}))})).then((function(e){var t={};return e.forEach((function(e){return t[e.id]=e.title})),t}))}},{key:"startGame",value:function(e){e.preventDefault(),Promise.resolve().then(this.getParams.bind(this)).then(Ne).catch((function(e){return alert(e)})).then((function(e){return e&&me.update("started a new game",e)}))}},{key:"getParams",value:function(){return{userId:me.me.userId,lobby:me.lobby,quizlet:this.quizletRef.current.value,handSize:parseInt(this.handSizeRef.current.value),boardStartingSize:parseInt(this.boardSizeRef.current.value),swap:this.swapRef.current.checked,reverse:this.reverseRef.current.checked,useRank:this.useRankRef.current.checked}}}]),a}(l.a.Component),Se=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("h1",null,"Players"),Object.keys(me.lobby).map(this.renderPlayer.bind(this)))}},{key:"renderPlayer",value:function(e){var t="";return me.gameW.info.host===e&&(t+="(host) "),me.me.userId===e&&(t+="(you) "),l.a.createElement("p",{key:e},"".concat(t).concat(me.lobby[e]))}}]),a}(l.a.Component),Re=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=me.gameW.game;return l.a.createElement("div",{className:A.a.bubble},l.a.createElement("div",{className:he.a.info},l.a.createElement("p",null,e.title),l.a.createElement("p",null,"Set Id: ",l.a.createElement("span",null,e.setId)),l.a.createElement("p",null,"Current Player:"," ",l.a.createElement("span",null,e.players[e.currentPlayer].userName)),l.a.createElement("div",null,e.players.map((function(e){return l.a.createElement("p",{key:e.index},e.userName," (",e.hand.length,")")})))))}}]),a}(l.a.Component),xe=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return a}(le),We=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:he.a.sidebar},l.a.createElement(xe,null),l.a.createElement(Ce,null),l.a.createElement(Se,null),me.gameW.game&&l.a.createElement(Re,null))}}]),a}(l.a.Component),Te={fox:oe,timeline:function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=[he.a.main];return de.isMyTurn()&&e.push(A.a.my_turn),l.a.createElement("div",null,l.a.createElement("div",{className:e.join(" ")},l.a.createElement(We,null),l.a.createElement("div",{className:he.a.content},l.a.createElement("div",null,me.gameW.game&&l.a.createElement(ge,null)))))}}]),a}(l.a.Component)};var Pe=function(){return"home"},ze=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return"Loading..."}}]),a}(l.a.Component),Fe=a(31),Me=a.n(Fe),Ue=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).inputRef=l.a.createRef(),e}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"".concat(Me.a.login," ").concat(A.a.bubble)},l.a.createElement("p",null,"Welcome to ",P.me.gameName,"!"),l.a.createElement("p",null,"Enter your name to continue"),l.a.createElement("form",{onSubmit:this.setUsername.bind(this)},l.a.createElement("input",{type:"text",ref:this.inputRef})))}},{key:"setUsername",value:function(e){e.preventDefault();var t=this.inputRef.current.value;this.props.setUsername(t)}}]),a}(l.a.Component),Le=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){document.title=this.props.gameName.toLocaleUpperCase(),T.init(this.props.roomId,this.props.gameName,this.forceUpdate.bind(this))}},{key:"render",value:function(){return P.lobby?P.lobby[P.me.userId]?P.gameW?l.a.createElement(this.props.component,null):null:l.a.createElement(Ue,{setUsername:T.setUsername}):l.a.createElement(ze,null)}}]),a}(l.a.Component);var De=function(){return l.a.createElement(s.a,null,l.a.createElement("div",null,l.a.createElement(o.a,{exact:!0,path:"/",render:Pe}),function(){for(var e=[],t=function(){var t=Object(u.a)(n[a],2),r=t[0],c=t[1];e.push(l.a.createElement(o.a,{key:r,path:"/".concat(r,"/:roomId(\\d+)?"),render:function(e){return l.a.createElement(Le,{component:c,gameName:r,roomId:parseInt(e.match.params.roomId)||-1})}}))},a=0,n=Object.entries(Te);a<n.length;a++)t();return l.a.createElement(l.a.Fragment,null,e)}()))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(47);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,a){e.exports={bubble:"styles_bubble__1BYLx",flex:"styles_flex__2Uon1",dont_grow:"styles_dont_grow__3fglV",log_entry_parent:"styles_log_entry_parent__Spbio",log_entry_child:"styles_log_entry_child__24WM2",my_turn:"styles_my_turn__1uYPS"}},6:function(e,t,a){e.exports={main:"app_main__3TvtT",sidebar:"app_sidebar__3-fjl",content:"app_content__39jbO",info:"app_info__C4YU0",image:"app_image__1tZgk",settings_form:"app_settings_form__uelWK",settings_input:"app_settings_input__2uaOu",settings_select:"app_settings_select__1jS9v",card:"app_card__2q0oc",target:"app_target__n2IMe",selectedCard:"app_selectedCard__o9hZ5",correct:"app_correct__BEfuw",incorrect:"app_incorrect__13cEZ"}}},[[35,1,2]]]);
//# sourceMappingURL=main.b031d701.chunk.js.map